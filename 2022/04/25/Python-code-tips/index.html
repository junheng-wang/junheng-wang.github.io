<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="���͡�ѧϰ�����˼�������С�����" />
       
      <meta name="description" content="���˺�����" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>Python其他小知识 |  Wang Junheng</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-Python-code-tips"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Python其他小知识
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/04/25/Python-code-tips/" class="article-date">
  <time datetime="2022-04-25T00:51:33.000Z" itemprop="datePublished">2022-04-25</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E6%8F%90%E5%8D%87/">学习提升</a> / <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E6%8F%90%E5%8D%87/%E7%BC%96%E7%A8%8B%E4%B8%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">编程与深度学习</a> / <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E6%8F%90%E5%8D%87/%E7%BC%96%E7%A8%8B%E4%B8%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/">编程语言学习</a> / <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E6%8F%90%E5%8D%87/%E7%BC%96%E7%A8%8B%E4%B8%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/Python%E5%9F%BA%E7%A1%80/">Python基础</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">15.1k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">65 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="一、编码格式规范"><a href="#一、编码格式规范" class="headerlink" title="一、编码格式规范"></a>一、编码格式规范</h2><h3 id="1-编码"><a href="#1-编码" class="headerlink" title="1 编码"></a>1 编码</h3><p>无特殊情况，建议Python脚本程序一律使用 UTF-8 编码，并且在文件头部必须加入<code>#-*-coding:utf-8-*-</code>标识，声明文件编码方式，程序文件编码要和声明编码保持一致。 </p>
<h3 id="2-代码格式"><a href="#2-代码格式" class="headerlink" title="2 代码格式"></a>2 代码格式</h3><ul>
<li>缩进： 统一使用 4 个空格进行缩进。（默认一个tab键就是4个空格，有时程序格式问题可能出现在这里，tab键不一定就是4个空格）</li>
<li>行宽： 每行代码尽量不超过 80 个字符(在特殊情况下可以略微超过 80 ，但最长不得超过 120)。如果代码过长，说明代码设计方面可能不合理。除此之外也方便在控制台查看代码(linux)以及通过对side-by-side的diff时有帮助。</li>
<li>引号：自然语言，也就是说一般使用双引号；机器标示使用单引号，例如字典中的key，正则表达式使用原生的双引号 r”…”；文档字符串 (docstring) 使用三个双引号 “”” ……”””。当然实际中需要灵活运用，毕竟三种引号使用是有区别的。</li>
<li><strong>空行：</strong><ul>
<li>模块级函数和类定义之间空两行；</li>
<li>类成员函数之间空一行；</li>
</ul>
</li>
</ul>
<p>示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line"><span class="comment"># one line</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="comment"># one line</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hello</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="comment"># one line</span></span><br><span class="line"><span class="comment"># one line</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="keyword">pass</span>   </span><br></pre></td></tr></table></figure>
<h3 id="3-import语句"><a href="#3-import语句" class="headerlink" title="3 import语句"></a>3 import语句</h3><ul>
<li>import 语句应该分行书写；</li>
<li>import语句应该放在文件头部，置于模块说明及docstring之后，于全局变量之前；</li>
<li>import语句应该按照顺序排列，每组之间用一个空行分隔(也就是说同一类型的在一块)；</li>
<li>导入其他模块的类定义时，可以使用相对导入；</li>
</ul>
<h3 id="4-空格使用"><a href="#4-空格使用" class="headerlink" title="4 空格使用"></a>4 空格使用</h3><h5 id="1-在二元运算符两边各空一格-gt-in-is-not-and"><a href="#1-在二元运算符两边各空一格-gt-in-is-not-and" class="headerlink" title="(1) 在二元运算符两边各空一格[=,-,+=,==,&gt;,in,is not, and]"></a>(1) 在二元运算符两边各空一格[=,-,+=,==,&gt;,in,is not, and]</h5><ul>
<li>函数的参数列表中，<code>,</code>之后要有空格</li>
<li>函数的参数列表中，默认值等号两边不要添加空格</li>
<li>左括号之后，右括号之前不要加多余的空格</li>
<li>字典对象的左括号之前不要多余的空格</li>
<li>不要为对齐赋值语句而使用的额外空格</li>
</ul>
<h3 id="5-换行"><a href="#5-换行" class="headerlink" title="5 换行"></a>5 换行</h3><p><strong>Python 支持括号内的换行</strong>。这时有两种情况，如下：</p>
<p><strong>(1) 第二行缩进到括号的起始处</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">foo = long_function_name(var_one, var_two,</span><br><span class="line">                         var_three, var_four)</span><br></pre></td></tr></table></figure>
<p><strong>(2) 第二行缩进 4 个空格，适用于起始括号就换行的情</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">long_function_name</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        var_one, var_two, var_three,</span></span></span><br><span class="line"><span class="params"><span class="function">        var_four</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(var_one)</span><br></pre></td></tr></table></figure>
<p><strong>(3) 使用反斜杠\换行</strong></p>
<p>二元运算符<code>+</code> 、<code>.</code>等应出现在行末；长字符串也可以用此法换行</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">session.query(MyTable).\</span><br><span class="line">        filter_by(<span class="built_in">id</span>=<span class="number">1</span>).\</span><br><span class="line">        one()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;Hello, &#x27;</span>\</span><br><span class="line">      <span class="string">&#x27;%s %s!&#x27;</span> %\</span><br><span class="line">      (<span class="string">&#x27;Harry&#x27;</span>, <span class="string">&#x27;Potter&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>(4) 禁止复合语句</strong></p>
<p> 即一行中包含多个语句： </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 正确的写法</span></span><br><span class="line">do_first()</span><br><span class="line">do_second()</span><br><span class="line">do_third()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不推荐的写法</span></span><br><span class="line">do_first();do_second();do_third();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="6-注释"><a href="#6-注释" class="headerlink" title="6 注释"></a>6 注释</h3><p><strong>块注释</strong> ：“#”号后空一格，段落件用空行分开（同样需要“#”号）</p>
<p><strong>行注释：</strong> 至少使用两个空格和语句分开，不要使用无意义的注释 </p>
<p><strong>补充：</strong> 在代码的关键部分(或比较复杂的地方), 能写注释的要尽量写注释；比较重要的注释段, 使用多个等号隔开, 可以更加醒目, 突出重要性。 </p>
<h3 id="7-命名规范"><a href="#7-命名规范" class="headerlink" title="7 命名规范"></a>7 命名规范</h3><p><strong>模块</strong>： 模块尽量使用小写命名，首字母保持小写，尽量不要用下划线(除非多个单词，且数量不多的情况)</p>
<p><strong>类名</strong>： 类名使用驼峰(CamelCase)命名风格，首字母大写，私有类可用一个下划线开头；将相关的类和顶级函数放在同一个模块里. 不像Java, 没必要限制一个类一个模块。 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Farm</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnimalFarm</span>(<span class="params">Farm</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_PrivateFarm</span>(<span class="params">Farm</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>函数名：</strong></p>
<p>函数名一律小写，如有多个单词，用<strong>下划线</strong>隔开；</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_with_env</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p><strong>变量名</strong></p>
<ul>
<li>变量名尽量小写, 如有多个单词，用下划线隔开</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    school_name = <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>常量采用全大写，如有多个单词，使用下划线隔开</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MAX_CLIENT = <span class="number">100</span></span><br><span class="line">MAX_CONNECTION = <span class="number">1000</span></span><br><span class="line">CONNECTION_TIMEOUT = <span class="number">600</span></span><br></pre></td></tr></table></figure>
<p>【参考资料1】：<a target="_blank" rel="noopener" href="https://blog.csdn.net/meiqi0538/article/details/104993760">【Python】编程代码书写规范！ -  科皮子菊 - CSDN</a></p>
<p>【参考资料2】：<a target="_blank" rel="noopener" href="https://python.freelycode.com/contribution/detail/47">PEP8中文版 — Python编码风格指南</a></p>
<h2 id="二、深度学习的相关库"><a href="#二、深度学习的相关库" class="headerlink" title="二、深度学习的相关库"></a>二、深度学习的相关库</h2><p><img src="https://pic.imgdb.cn/item/66778500d9c307b7e9f7a3df.png" alt="image.png"></p>
<p>① NumPy 包为Python 加上了关键的数组变量类型，弥补了Python 的不足；<br>② Pandas 包在NumPy 数组的基础上添加了与Excel 类似的行列标签；<br>③ Matplotlib 库借鉴Matlab，帮Python 具备了绘图能力，使其如虎添翼；<br>④ Scikit-learn 库是机器学习库，内含分类、回归、聚类、降维等多种算法；<br>⑤ TensorFlow 库是Google 公司开发的深度学习框架，于2015 年问世；<br>⑥ PyTorch 库是Facebook 公司开发的深度学习框架，于2017 年问世。</p>
<h3 id="2-1-Numpy学习"><a href="#2-1-Numpy学习" class="headerlink" title="2.1 Numpy学习"></a>2.1 Numpy学习</h3><div class="bvideo">
    <a href="//www.bilibili.com/video/BV1Wy4y1h7ii" target="_blank">
        <div class="bvideo-box">
            <div class="bvideo-cover">
                <div class="cover-default"></div>
                <div class="bvideo-cover-layer" style="background-image:url(https://images.weserv.nl/?url=http://i0.hdslb.com/bfs/archive/ab719949488afaf673a171c1b2ae61f525450b12.jpg)">
                    <i class="icon-video"></i>
                </div>
                <span class="duration">00:08:44</span>
            </div>
            <div class="bvideo-info">
                <p class="title">一个10分钟的numpy入门教程</p>
                <p class="card-status">
                    <span class="play-num">
                        <i class="fa fa-youtube-play"></i>
                        <span>17.1万</span></span>
                    <span>
                        <i class="fa fa-list-alt"></i>
                        <span>344</span></span></p>
                <div class="partition">
                    <label class="card-label">视频</label>
                    <label class="up-label"></label>
                    <label class="up-name">奇乐编程学院</label>
                </div>
                <div class="actions hide"></div>
            </div>
        </div>
    </a>
</div>
<div class="bvideo">
    <a href="//www.bilibili.com/video/BV1Ym4y1U7at" target="_blank">
        <div class="bvideo-box">
            <div class="bvideo-cover">
                <div class="cover-default"></div>
                <div class="bvideo-cover-layer" style="background-image:url(https://images.weserv.nl/?url=http://i2.hdslb.com/bfs/archive/6394a64929382e1451f20ed843a1091df68d121e.jpg)">
                    <i class="icon-video"></i>
                </div>
                <span class="duration">01:17:48</span>
            </div>
            <div class="bvideo-info">
                <p class="title">巨硬的Numpy：从小白到入门</p>
                <p class="card-status">
                    <span class="play-num">
                        <i class="fa fa-youtube-play"></i>
                        <span>3.2万</span></span>
                    <span>
                        <i class="fa fa-list-alt"></i>
                        <span>10</span></span></p>
                <div class="partition">
                    <label class="card-label">视频</label>
                    <label class="up-label"></label>
                    <label class="up-name">二次元的Datawhale</label>
                </div>
                <div class="actions hide"></div>
            </div>
        </div>
    </a>
</div> 
<div class="bvideo">
    <a href="//www.bilibili.com/video/BV1H84y1g7RE" target="_blank">
        <div class="bvideo-box">
            <div class="bvideo-cover">
                <div class="cover-default"></div>
                <div class="bvideo-cover-layer" style="background-image:url(https://images.weserv.nl/?url=http://i0.hdslb.com/bfs/archive/244825726856d4162d887d1cb68d6daa7a86e188.jpg)">
                    <i class="icon-video"></i>
                </div>
                <span class="duration">01:15:19</span>
            </div>
            <div class="bvideo-info">
                <p class="title">Python深度学习：NumPy数组库</p>
                <p class="card-status">
                    <span class="play-num">
                        <i class="fa fa-youtube-play"></i>
                        <span>6.0万</span></span>
                    <span>
                        <i class="fa fa-list-alt"></i>
                        <span>417</span></span></p>
                <div class="partition">
                    <label class="card-label">视频</label>
                    <label class="up-label"></label>
                    <label class="up-name">爆肝杰哥</label>
                </div>
                <div class="actions hide"></div>
            </div>
        </div>
    </a>
</div>
<h4 id="2-1-1-数组基础"><a href="#2-1-1-数组基础" class="headerlink" title="2.1.1 数组基础"></a>2.1.1 数组基础</h4><p>导入NumPy 时，通常给其一个别名“np”，即<code>import numpy as np</code>。<br>NumPy 库中的函数，要在函数名前加上导入的库名 np. 才能使用。</p>
<h5 id="Ⅰ数据类型"><a href="#Ⅰ数据类型" class="headerlink" title="Ⅰ数据类型"></a>Ⅰ数据类型</h5><p><strong>(1) 整数型数组与浮点型数组</strong></p>
<p>python中的列表存在缺点，列表内的每一个元素可以是不同的数据类型。为克服列表的缺点，一个NumPy数组只<strong>容纳一种数据类型</strong>，以节约内存。为方便起见，可将NumPy数组简单分为<strong>整数型数组</strong>与<strong>浮点型数组</strong>。</p>
<p>示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 利用np.array将python的list转化为Numpy数组，产生一个实例化类对象，如下面的arr1、arr2，</span></span><br><span class="line"><span class="comment"># 实例化对象里面有许多可以调用的成员方法，例如 .astype( )</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建整数型数组：</span></span><br><span class="line">arr1 = np.array( [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] ) <span class="comment"># 元素若都是整数，则为整数型数组</span></span><br><span class="line"><span class="built_in">print</span>(arr1)	<span class="comment"># 输出 [1 2 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建浮点型数组：</span></span><br><span class="line">arr2 = np.array( [<span class="number">1.0</span>, <span class="number">2</span>, <span class="number">3</span>] ) <span class="comment"># 内含浮点数，则为浮点型数组</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># 输出 [1. 2. 3.]</span></span><br></pre></td></tr></table></figure>
<p><strong>(2) 整数型数组和浮点型数组相互转换</strong></p>
<p>规范的方法是使用<code>.astype( )</code>方法。</p>
<p>示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 整数型数组</span></span><br><span class="line">arr1 = np.array( [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] )</span><br><span class="line"><span class="built_in">print</span>(arr1)	<span class="comment"># 输出 [1 2 3]</span></span><br><span class="line"><span class="comment"># 整数型数组 ——&gt; 浮点型数组</span></span><br><span class="line">arr2 = arr1.astype(<span class="built_in">float</span>)</span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># 输出 [1. 2. 3.]</span></span><br><span class="line"><span class="comment"># 浮点型数组 ——&gt; 整数型数组</span></span><br><span class="line">arr3 = arr2.astype(<span class="built_in">int</span>)</span><br><span class="line"><span class="built_in">print</span>(arr3) <span class="comment"># 输出 [1 2 3]</span></span><br></pre></td></tr></table></figure>
<p>整数型数组在程序的运算中会很容易变成浮点型，但浮点型数组在运算过程中一般不会降级为整数型。</p>
<h5 id="Ⅱ-数组维度"><a href="#Ⅱ-数组维度" class="headerlink" title="Ⅱ 数组维度"></a>Ⅱ 数组维度</h5><p><strong>(1) 一维数组与二维数组</strong><br>考虑到深度学习中三维及其以上的数组出现次数少，后续主要讲解NumPy 中的一维数组和二维数组，学了一维和二维后，很好类推到三维。</p>
<ul>
<li>不同维度的数组之间，从外形上的本质区别是<ul>
<li>一维数组使用1层<strong>中括号</strong>表示；</li>
<li>二维数组使用2层<strong>中括号</strong>表示；</li>
<li>三维数组使用3层<strong>中括号</strong>表示。</li>
</ul>
</li>
<li>有些函数需要传入数组的形状参数，不同维度数组的形状参数为<ul>
<li>一维数组的形状参数形如： x 或 (x,) ；</li>
<li>二维数组的形状参数形如： (x,y) ；</li>
<li>三维数组的形状参数形如： (x,y,z) 。</li>
</ul>
</li>
<li>现在以同一个序列进行举例<ul>
<li>当数组有1 层中括号，如[1 2 3]，则其为一维数组，其形状是 3 或 (3,) ；</li>
<li>当数组有2 层中括号，如[[1 2 3]]，则其为二维数组，其形状是 (1,3) ；</li>
<li>当数组有3 层中括号，如[[[1 2 3]]]，则其为三维数组，其形状是 (1,1,3) ；</li>
</ul>
</li>
</ul>
<p>这里用后面要讲的<code>np.ones( )</code>函数进行演示，只因其刚好需要传入形状参数。</p>
<p>示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr1 = np.ones(<span class="number">3</span>) <span class="comment"># 传入形状3</span></span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># 造出一维数组 [1. 1. 1.]</span></span><br><span class="line"></span><br><span class="line">arr2 = np.ones((<span class="number">1</span>,<span class="number">3</span>)) <span class="comment"># 传入形状(1,3)</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># 造出二维数组 [[1. 1. 1.]]</span></span><br><span class="line"></span><br><span class="line">arr3 = np.ones((<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>)) <span class="comment"># 传入形状(1,1,3)</span></span><br><span class="line"><span class="built_in">print</span>(arr3) <span class="comment"># 造出三维数组 [[[1. 1. 1.]]]</span></span><br></pre></td></tr></table></figure>
<p>同时，我们还可以使用数组的<code>.shape</code> 属性查看arr1和arr2的形状。</p>
<p>示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>( arr1.shape ) <span class="comment"># 输出 (3,)</span></span><br><span class="line"><span class="built_in">print</span>( arr2.shape ) <span class="comment"># 输出(1, 3)</span></span><br><span class="line"><span class="built_in">print</span>( arr3.shape ) <span class="comment"># 输出(1, 1, 3)</span></span><br></pre></td></tr></table></figure>
<p>大家可以随时留意一下数组的维度（通过中括号的数量），后面有些函数（比如数组的拼接函数）需要两个数组是同维度的。</p>
<p><strong>(2) 不同维度数组之间的转换</strong><br>一维数组转二维数组，还是二维数组转一维数组，均要使用的是数组的重塑方法<code>.reshape( )</code> ，该方法需要传入重塑后的形状（shape）参数。<br>这个方法神奇的是，给定了其他维度的数值，剩下一个维度可以填-1，让它<strong>自己去计算</strong>。比如把一个5 行6 列的矩阵重塑为3 行10 列的矩阵，当列的参数10告诉它，行的参数直接可以用-1 来替代，它会自己去用30 除以10 来计算。</p>
<p>示例1：将一维数组升级为二维数组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一维数组</span></span><br><span class="line">arr1 = np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># 输出[0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 升级为二维数组</span></span><br><span class="line">arr2 = arr1.reshape( (<span class="number">1</span>,-<span class="number">1</span>) )</span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [[0 1 2 3 4 5 6 7 8 9]]</span></span><br></pre></td></tr></table></figure>
<p>示例2：将二维数组降级为一维数组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建二维数组</span></span><br><span class="line">arr2 = np.arange(<span class="number">10</span>).reshape(<span class="number">2</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># 输出 [[0 1 2 3 4]</span></span><br><span class="line"><span class="comment">#       [5 6 7 8 9]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 降级为一维数组</span></span><br><span class="line">arr1 = arr2.reshape( -<span class="number">1</span> )</span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"><span class="comment"># 输出 [0 1 2 3 4 5 6 7 8 9]</span></span><br></pre></td></tr></table></figure>
<h4 id="2-1-2-数组的创建"><a href="#2-1-2-数组的创建" class="headerlink" title="2.1.2 数组的创建"></a>2.1.2 数组的创建</h4><h5 id="Ⅰ-创建指定数组"><a href="#Ⅰ-创建指定数组" class="headerlink" title="Ⅰ 创建指定数组"></a>Ⅰ 创建指定数组</h5><p>当明确知道数组每一个元素的具体数值时，可以使用<code>np.array( )</code>函数，将Python列表转化为NumPy数组。</p>
<p>示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一维数组——向量</span></span><br><span class="line">arr1 = np.array( [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] )</span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [1 2 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建二维数组——行矩阵</span></span><br><span class="line">arr2 = np.array( [ [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] ] )</span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [[1 2 3]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建二维数组——列矩阵</span></span><br><span class="line">arr3 = np.array( [ [<span class="number">1</span>],[<span class="number">2</span>],[<span class="number">3</span>] ] )</span><br><span class="line"><span class="built_in">print</span>(arr3)</span><br><span class="line"><span class="comment"># [[1]</span></span><br><span class="line"><span class="comment">#  [2]</span></span><br><span class="line"><span class="comment">#  [3]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建二维数组——矩阵</span></span><br><span class="line">arr4 = np.array( [ [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>] ] )</span><br><span class="line"><span class="built_in">print</span>(arr4)</span><br><span class="line"><span class="comment"># [[1 2 3]</span></span><br><span class="line"><span class="comment">#  [4 5 6]]</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅱ-创建递增数组"><a href="#Ⅱ-创建递增数组" class="headerlink" title="Ⅱ 创建递增数组"></a>Ⅱ 创建递增数组</h5><p>递增数组使用 <code>np.arange( )</code> 函数进行创建（arange 全称是array_range）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 递增数组</span></span><br><span class="line">arr1 = np.arange(<span class="number">10</span>) <span class="comment"># 从0 开始，到10 之前结束</span></span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 递增数组</span></span><br><span class="line">arr2 = np.arange(<span class="number">10</span>, <span class="number">20</span>) <span class="comment"># 从10 开始，到20 之前结束</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [10 11 12 13 14 15 16 17 18 19]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 递增数组</span></span><br><span class="line">arr3 = np.arange(<span class="number">1</span>,<span class="number">21</span>,<span class="number">2</span>) <span class="comment"># 从1 开始，到21 之前结束，步长为2</span></span><br><span class="line"><span class="built_in">print</span>(arr3) <span class="comment"># [1 3 5 7 9 11 13 15 17 19]</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅲ-创建同值数组"><a href="#Ⅲ-创建同值数组" class="headerlink" title="Ⅲ 创建同值数组"></a>Ⅲ 创建同值数组</h5><p>需要创建同值数组时，使用 <code>np.zeros( )</code> 函数以及 <code>np.ones( )</code> 函数，如示例。</p>
<p>示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 全0 数组</span></span><br><span class="line">arr1 = np.zeros( <span class="number">3</span> ) <span class="comment"># 形状为3 的向量</span></span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [0. 0. 0.]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 全1 数组</span></span><br><span class="line">arr2 = np.ones( (<span class="number">1</span>,<span class="number">3</span>) ) <span class="comment"># 形状为(1,3)的矩阵</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [[1. 1. 1.]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 全3.14 数组</span></span><br><span class="line">arr3 = <span class="number">3.14</span> * np.ones( (<span class="number">2</span>,<span class="number">3</span>) ) <span class="comment"># 形状为(2,3)的矩阵</span></span><br><span class="line"><span class="built_in">print</span>(arr3)</span><br><span class="line"><span class="comment"># [[3.14 3.14 3.14]</span></span><br><span class="line"><span class="comment">#  [3.14 3.14 3.14]]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="Ⅳ-创建随机数组"><a href="#Ⅳ-创建随机数组" class="headerlink" title="Ⅳ 创建随机数组"></a>Ⅳ 创建随机数组</h5><p>有时需要创建随机数组，那么可以使用 <code>np.random</code> 系列函数，如示例所示。</p>
<p>示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 0-1 均匀分布的浮点型随机数组</span></span><br><span class="line">arr1 = np.random.random( <span class="number">5</span> ) <span class="comment"># 形状为5 的向量</span></span><br><span class="line"><span class="built_in">print</span>( arr1 ) <span class="comment"># [0.59699399 0.89113584 0.00695752 0.49089431 0.32050609]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 整数型随机数组</span></span><br><span class="line">arr2 = np.random.randint( <span class="number">10</span>,<span class="number">100</span>,(<span class="number">1</span>,<span class="number">15</span>) ) <span class="comment"># 范围为10~100的形状为(1,15)的矩阵</span></span><br><span class="line"><span class="built_in">print</span>( arr2 ) <span class="comment"># [[17 65 54 48 82 57 52 26 28 27 53 36 61 92 13]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 服从正态分布的随机数组</span></span><br><span class="line">arr3 = np.random.normal( <span class="number">0</span>,<span class="number">1</span>,(<span class="number">2</span>,<span class="number">3</span>) ) <span class="comment"># 均值为0、标准差为1的形状为(2,3)的二维高斯矩阵</span></span><br><span class="line"><span class="built_in">print</span>( arr3 )</span><br><span class="line"><span class="comment"># [[-0.43163964 -1.56817412 0.5460523 ]</span></span><br><span class="line"><span class="comment">#  [-2.93093358 0.42577899 -1.69842077]]</span></span><br></pre></td></tr></table></figure>
<h4 id="2-1-3-数组的索引"><a href="#2-1-3-数组的索引" class="headerlink" title="2.1.3 数组的索引"></a>2.1.3 数组的索引</h4><h5 id="Ⅰ-访问数组元素"><a href="#Ⅰ-访问数组元素" class="headerlink" title="Ⅰ 访问数组元素"></a>Ⅰ 访问数组元素</h5><p>与Python列表一致，访问NumPy数组元素时使用<strong>中括号</strong>，索引由0开始。</p>
<p><strong>(1) 访问向量(一维数组)</strong></p>
<p>示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 创建向量</span></span><br><span class="line">arr1 = np.arange( <span class="number">1</span>,<span class="number">10</span> )</span><br><span class="line"><span class="built_in">print</span>( arr1 ) <span class="comment"># [1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问元素</span></span><br><span class="line"><span class="built_in">print</span>( arr1[<span class="number">3</span>] ) <span class="comment"># 正着访问 4</span></span><br><span class="line"><span class="built_in">print</span>( arr1[-<span class="number">1</span>] ) <span class="comment"># 倒着访问 9</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改数组元素</span></span><br><span class="line">arr1[<span class="number">3</span>] = <span class="number">100</span>;</span><br><span class="line"><span class="built_in">print</span>( arr1 ) <span class="comment"># [1 2 3 100 5 6 7 8</span></span><br></pre></td></tr></table></figure>
<p><strong>(2) 访问矩阵</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建矩阵</span></span><br><span class="line">arr2 = np.array( [ [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>] ] )</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># [[1 2 3]</span></span><br><span class="line"><span class="comment">#  [4 5 6]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问元素</span></span><br><span class="line"><span class="built_in">print</span>( arr2[<span class="number">0</span>,<span class="number">2</span>] ) <span class="comment"># 3</span></span><br><span class="line"><span class="built_in">print</span>( arr2[<span class="number">1</span>,-<span class="number">2</span>] )<span class="comment"># 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改元素</span></span><br><span class="line">arr2[<span class="number">1</span>,<span class="number">1</span>] = <span class="number">100.9</span></span><br><span class="line"><span class="built_in">print</span>( arr2 ) <span class="comment"># 浮点数100.9 插入到整数型数组时被截断了</span></span><br><span class="line"><span class="comment"># [[001 002 003]</span></span><br><span class="line"><span class="comment">#  [004 100 006]]</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅱ-花式索引"><a href="#Ⅱ-花式索引" class="headerlink" title="Ⅱ 花式索引"></a>Ⅱ 花式索引</h5><p>花式索引（Fancy indexing）又名“花哨的索引”，上一小节访问单个元素时，向量用arr1[x]，矩阵用arr2[x,y]。逗号在矩阵里用于区分行与列，这一小节，逗号新增一个功能，且不会与矩阵里的逗号混淆。<br><strong>普通索引用一层中括号，花式索引用两层中括号</strong>。</p>
<p><strong>(1) 向量的花式索引</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建向量</span></span><br><span class="line">arr1 = np.arange(<span class="number">0</span>,<span class="number">90</span>,<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [ 0 10 20 30 40 50 60 70 80]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 花式索引</span></span><br><span class="line"><span class="built_in">print</span>( arr1[ [<span class="number">0</span>,<span class="number">2</span>] ] ) <span class="comment"># [0 20]</span></span><br></pre></td></tr></table></figure>
<p><strong>(2) 矩阵的花式索引</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建矩阵</span></span><br><span class="line">arr2 = np.arange(<span class="number">1</span>,<span class="number">17</span>).reshape(<span class="number">4</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># [[01 02 03 04]</span></span><br><span class="line"><span class="comment">#  [05 06 07 08]</span></span><br><span class="line"><span class="comment">#  [09 10 11 12]</span></span><br><span class="line"><span class="comment">#  [13 14 15 16]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 花式索引</span></span><br><span class="line"><span class="built_in">print</span>( arr2[ [<span class="number">0</span>,<span class="number">1</span>] , [<span class="number">0</span>,<span class="number">1</span>] ] ) <span class="comment"># [1 6]</span></span><br><span class="line"><span class="built_in">print</span>( arr2[ [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>] , [<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>] ] ) <span class="comment"># [3 6 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改数组元素</span></span><br><span class="line">arr2[ [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] , [<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>] ] = <span class="number">100</span></span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># [[001 002 003 100]</span></span><br><span class="line"><span class="comment">#  [005006 100 008]</span></span><br><span class="line"><span class="comment">#  [009 100 011 012]</span></span><br><span class="line"><span class="comment">#  [100 014 015 016]]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://pic.imgdb.cn/item/667793a7d9c307b7e91154c9.png" alt="image.png"></p>
<p>根据以上实例，花式索引输出的仍然是一个向量。</p>
<h5 id="Ⅲ-访问数组切片"><a href="#Ⅲ-访问数组切片" class="headerlink" title="Ⅲ 访问数组切片"></a>Ⅲ 访问数组切片</h5><p><strong>(1) 向量的切片</strong></p>
<p>向量与列表切片的操作完全一致，因此本页内容在Python 基础中均有涉及。</p>
<p><img src="https://pic.imgdb.cn/item/667793f2d9c307b7e911deb7.png" alt="image.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">arr1 = np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>( arr1 ) <span class="comment"># [1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当明确知道从第x个元素切到第y个元素，如示例所示。</span></span><br><span class="line"><span class="built_in">print</span>( arr1[ <span class="number">1</span> : <span class="number">4</span> ] ) <span class="comment"># 从索引[1]开始，切到索引[4]之前 [1 2 3]</span></span><br><span class="line"><span class="built_in">print</span>( arr1[ <span class="number">1</span> : ] ) <span class="comment"># 从索引[1]开始，切到结尾 [1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"><span class="built_in">print</span>( arr1[ : <span class="number">4</span> ] ) <span class="comment"># 从数组开头开始，切到索引[4]之前 [0 1 2 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当明确切除数组的开头与结尾，如示例所示。</span></span><br><span class="line"><span class="built_in">print</span>( arr1[ <span class="number">2</span> : -<span class="number">2</span> ] ) <span class="comment"># 切除开头2个和结尾2个 [2 3 4 5 6 7]</span></span><br><span class="line"><span class="built_in">print</span>( arr1[ <span class="number">2</span> : ] ) <span class="comment"># 切除开头2个 [2 3 4 5 6 7 8 9]</span></span><br><span class="line"><span class="built_in">print</span>( arr1[ : -<span class="number">2</span> ] ) <span class="comment"># 切除结尾2个 [0 1 2 3 4 5 6 7]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当明确隔几个元素采样一次时，示例如下。</span></span><br><span class="line"><span class="built_in">print</span>( arr1[ : : <span class="number">2</span> ] ) <span class="comment"># 每2 个元素采样一次 [0 2 4 6 8]</span></span><br><span class="line"><span class="built_in">print</span>( arr1[ : : <span class="number">3</span> ] ) <span class="comment"># 每3 个元素采样一次 [0 3 6 9]</span></span><br><span class="line"><span class="built_in">print</span>( arr1[ <span class="number">1</span> : -<span class="number">1</span> : <span class="number">2</span> ] ) <span class="comment"># 切除一头一尾后，每2个元素采样一次 [1 3 5 7]</span></span><br></pre></td></tr></table></figure>
<p><strong>(2) 矩阵的切片</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr2 = np.arange(<span class="number">1</span>,<span class="number">21</span>).reshape(<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>( arr2 )</span><br><span class="line"><span class="comment"># [[01 02 03 04 05]</span></span><br><span class="line"><span class="comment">#  [06 07 08 09 10]</span></span><br><span class="line"><span class="comment">#  [11 12 13 14 15]</span></span><br><span class="line"><span class="comment">#  [16 17 18 19 20]]</span></span><br><span class="line"><span class="built_in">print</span>( arr2[ <span class="number">1</span>:<span class="number">3</span> , <span class="number">1</span>:-<span class="number">1</span> ] )</span><br><span class="line"><span class="comment"># [[07 08 09]</span></span><br><span class="line"><span class="comment">#  [12 13 14]]</span></span><br><span class="line"><span class="built_in">print</span>( arr2[ ::<span class="number">3</span> , ::<span class="number">2</span> ] ) <span class="comment"># 跳跃采样</span></span><br><span class="line"><span class="comment"># [[01 03 05]</span></span><br><span class="line"><span class="comment">#  [16 18 20]]</span></span><br></pre></td></tr></table></figure>
<p><strong>(3) 提取矩阵的行</strong></p>
<p>基于矩阵的切片功能，我们可以提取其部分行，如示例所示。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr3 = np.arange(<span class="number">1</span>,<span class="number">21</span>).reshape(<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>( arr3 )</span><br><span class="line"><span class="comment"># [[ 01 02 03 04 05]</span></span><br><span class="line"><span class="comment">#  [06 07 08 09 10]</span></span><br><span class="line"><span class="comment">#  [11 12 13 14 15]</span></span><br><span class="line"><span class="comment">#  [16 17 18 19 20]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr3[ <span class="number">2</span> , : ] ) <span class="comment"># 提取第2行</span></span><br><span class="line"><span class="comment"># [11 12 13 14 15]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr3[ <span class="number">1</span>:<span class="number">3</span> , : ] ) <span class="comment"># 提取1至2行</span></span><br><span class="line"><span class="comment"># [[06 07 08 09 10]</span></span><br><span class="line"><span class="comment">#  [11 12 13 14 15]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 考虑代码的简洁，当提取矩阵的某几行时可简写（但提取列的时候不可简写）。</span></span><br><span class="line"><span class="built_in">print</span>( arr3[ <span class="number">2</span> , : ] ) <span class="comment"># 规范的提取行 [11 12 13 14 15]</span></span><br><span class="line"><span class="built_in">print</span>( arr3[<span class="number">2</span>] ) <span class="comment"># 简便的提取行 [11 12 13 14 15]</span></span><br></pre></td></tr></table></figure>
<p>所以，有时你可能看到诸如 <code>arr[1][2]</code> 这样的语法，不必吃惊，其实这只是先提取了第1 行，再提取该行中第2 个元素。提一句，UP 并不推荐这样的写法。</p>
<p><strong>(4) 提取矩阵的列</strong></p>
<p>基于矩阵的切片功能，我们可以提取其部分列，如示例所示。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr4 = np.arange(<span class="number">1</span>,<span class="number">21</span>).reshape(<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>( arr4 )</span><br><span class="line"><span class="comment"># [[ 01 02 03 04 05]</span></span><br><span class="line"><span class="comment">#  [06 07 08 09 10]</span></span><br><span class="line"><span class="comment">#  [11 12 13 14 15]</span></span><br><span class="line"><span class="comment">#  [16 17 18 19 20]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr4[ : , <span class="number">2</span> ] ) <span class="comment"># 提取第2列（注意，输出的是向量）</span></span><br><span class="line"><span class="comment"># [3 8 13 18]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr4[ : , <span class="number">1</span>:<span class="number">3</span> ] ) <span class="comment"># 提取1 至2 列</span></span><br><span class="line"><span class="comment"># [[ 02 03]</span></span><br><span class="line"><span class="comment">#  [07 08]</span></span><br><span class="line"><span class="comment">#  [12 13]</span></span><br><span class="line"><span class="comment">#  [17 18]]</span></span><br></pre></td></tr></table></figure>
<p>值得注意的是，提取某一个单独的列时，出来的结果是一个向量。其实这么做只是为了省空间，我们知道，列矩阵必须用两层中括号来存储，而形状为1000的向量，自然比形状为(1000,1)的列矩阵更省空间（节约了1000 对括号）。<br>如果你真的想要提取一个列矩阵出来，示例如下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr5 = np.arange(<span class="number">1</span>,<span class="number">16</span>).reshape(<span class="number">3</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>( arr5 )</span><br><span class="line"><span class="comment"># [[ 01 02 03 04 05]</span></span><br><span class="line"><span class="comment">#  [06 07 08 09 10]</span></span><br><span class="line"><span class="comment">#  [11 12 13 14 15]]</span></span><br><span class="line"></span><br><span class="line">cut = arr5[ : , <span class="number">2</span> ] <span class="comment"># 提取第2列为向量</span></span><br><span class="line"><span class="built_in">print</span>( cut )</span><br><span class="line"><span class="comment"># [3 8 13]</span></span><br><span class="line"></span><br><span class="line">cut = cut.reshape( (-<span class="number">1</span>,<span class="number">1</span>) ) <span class="comment"># 升级为列矩阵</span></span><br><span class="line"><span class="built_in">print</span>(cut)</span><br><span class="line"><span class="comment"># [[ 3]</span></span><br><span class="line"><span class="comment"># [ 8]</span></span><br><span class="line"><span class="comment"># [13]]</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅳ-数组切片仅是视图"><a href="#Ⅳ-数组切片仅是视图" class="headerlink" title="Ⅳ 数组切片仅是视图"></a>Ⅳ 数组切片仅是视图</h5><p><strong>(1) 数组切片仅是视图</strong></p>
<p>与Python列表和Matlab不同，NumPy数组的<strong>切片仅仅是原数组的一个视图</strong>。换言之，<strong>NumPy切片并不会创建新的变量</strong>，示例如下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr = np.arange(<span class="number">10</span>) <span class="comment"># 创建原数组arr</span></span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line">cut = arr[ : <span class="number">3</span> ] <span class="comment"># 创建arr的切片cut</span></span><br><span class="line"><span class="built_in">print</span>(cut)</span><br><span class="line"><span class="comment"># [0 1 2]</span></span><br><span class="line"></span><br><span class="line">cut[<span class="number">0</span>] = <span class="number">100</span> <span class="comment"># 对切片的数值进行修改</span></span><br><span class="line"><span class="built_in">print</span>(cut)</span><br><span class="line"><span class="comment"># [100 1 2]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(arr) <span class="comment"># 原数组也被修改</span></span><br><span class="line"><span class="comment"># [100 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>习惯Matlab 的用户可能无法理解，但其实这正是NumPy 的精妙之处。试想一下，一个几百万条数据的数组，每次切片时都创建一个新变量，势必造成大量的内存浪费。因此，NumPy 的切片被设计为原数组的视图是极好的。<br>深度学习中为节省内存，将多次使用<code>arr[:] = &lt;表达式&gt;</code> 来替代<code>arr = &lt;表达式&gt;</code>。</p>
<p><strong>(2) 备份切片为新变量</strong></p>
<p>如果真的需要为切片创建新变量（这种情况很稀少），使用 <code>.copy( )</code> 方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr = np.arange(<span class="number">10</span>) <span class="comment"># 创建一个0 到10 的向量arr</span></span><br><span class="line"><span class="built_in">print</span>(arr) <span class="comment"># [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line">copy = arr[ : <span class="number">3</span> ] .copy() <span class="comment"># 创建arr 的拷贝切片</span></span><br><span class="line"><span class="built_in">print</span>(copy) <span class="comment"># [0 1 2]</span></span><br><span class="line"></span><br><span class="line">copy [<span class="number">0</span>] = <span class="number">100</span> <span class="comment"># 对拷贝切片的数值进行修改</span></span><br><span class="line"><span class="built_in">print</span>(copy) <span class="comment"># [100 1 2]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(arr) <span class="comment"># 原数组不为所动 [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="Ⅴ-数组赋值仅是绑定"><a href="#Ⅴ-数组赋值仅是绑定" class="headerlink" title="Ⅴ 数组赋值仅是绑定"></a>Ⅴ 数组赋值仅是绑定</h5><p><strong>(1) 数组赋值仅是绑定(不可变数据)</strong></p>
<p>与NumPy 数组的切片一样，NumPy 数组完整的赋值给另一个数组，也只是绑定。换言之，NumPy数组之间的赋值并不会创建新的变量，示例如下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr1 = np.arange(<span class="number">10</span>) <span class="comment"># 创建一个0 到10 的数组变量arr</span></span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line">arr2 = arr1 <span class="comment"># 把数组1 赋值给另一个数组2</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line">arr2[<span class="number">0</span>] = <span class="number">100</span> <span class="comment"># 修改数组2</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [100 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># 原数组也被修改 [100 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>此特性的出现仍然是为了节约空间，破局的方法仍然与前面相同。</p>
<p><strong>(2) 复制数组为新变量</strong></p>
<p>如果真的需要赋给一个新数组，使用<code>.copy( )</code>方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr1 = np.arange(<span class="number">10</span>) <span class="comment"># 创建一个0 到10 的数组变量arr</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line">arr2 = arr1.copy() <span class="comment"># 把数组1 的拷贝赋值给另一个数组2</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line">arr2[<span class="number">0</span>] = <span class="number">100</span> <span class="comment"># 修改数组2</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [100 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># 查看数组1 [0 1 2 3 4 5 6 7 8 9]</span></span><br></pre></td></tr></table></figure>
<h4 id="2-1-4-数组的变形"><a href="#2-1-4-数组的变形" class="headerlink" title="2.1.4 数组的变形"></a>2.1.4 数组的变形</h4><h5 id="Ⅰ-数组的转置"><a href="#Ⅰ-数组的转置" class="headerlink" title="Ⅰ 数组的转置"></a>Ⅰ 数组的转置</h5><p>数组的转置方法为<code>.T</code>，其只对矩阵有效，因此遇到向量要先将其转化为矩阵。</p>
<p><strong>(1) 向量的转置</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr1 = np.arange(<span class="number">1</span>,<span class="number">4</span>) <span class="comment"># 创建向量</span></span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [1 2 3]</span></span><br><span class="line"></span><br><span class="line">arr2 = arr1.reshape( (<span class="number">1</span>,-<span class="number">1</span>) ) <span class="comment"># 升级为矩阵</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [[1 2 3]]</span></span><br><span class="line"></span><br><span class="line">arr3 = arr2.T <span class="comment"># 行矩阵的转置</span></span><br><span class="line"><span class="built_in">print</span>(arr3)</span><br><span class="line"><span class="comment"># [[1]</span></span><br><span class="line"><span class="comment">#  [2]</span></span><br><span class="line"><span class="comment">#  [3]]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>(2) 矩阵的转置</strong></p>
<p>行矩阵的转置刚演示了，列矩阵和普通矩阵的转置如示例所示。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr1 = np.arange(<span class="number">3</span>).reshape(<span class="number">3</span>,<span class="number">1</span>) <span class="comment"># 创建列矩阵</span></span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"><span class="comment"># [[0]</span></span><br><span class="line"><span class="comment">#  [1]</span></span><br><span class="line"><span class="comment">#  [2]]</span></span><br><span class="line"></span><br><span class="line">arr2 = arr1.T <span class="comment"># 列矩阵的转置</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># 结果为行矩阵</span></span><br><span class="line"><span class="comment"># [[0 1 2]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 矩阵的转置如示例所示。</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr1 = np.arange(<span class="number">4</span>).reshape(<span class="number">2</span>,<span class="number">2</span>) <span class="comment"># 创建矩阵</span></span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"><span class="comment"># [[0 1]</span></span><br><span class="line"><span class="comment">#  [2 3]]</span></span><br><span class="line"></span><br><span class="line">arr2 = arr1.T <span class="comment"># 矩阵的转置</span></span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># [[0 2]</span></span><br><span class="line"><span class="comment">#  [1 3]]</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅱ-数组的翻转"><a href="#Ⅱ-数组的翻转" class="headerlink" title="Ⅱ 数组的翻转"></a>Ⅱ 数组的翻转</h5><p>数组的翻转方法有两个，一个是上下翻转的 <code>np.flipud( )</code> ，表示up-down；一个是左右翻转的 <code>np.fliplr( )</code>，表示left-right。其中，<strong>向量</strong>只能使用<code>np.flipud( )</code>，在数学中，向量并不是横着排的，而是竖着排的。</p>
<p><strong>(1) 向量的翻转</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建向量</span></span><br><span class="line">arr1 = np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>( arr1 ) <span class="comment"># [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 翻转向量</span></span><br><span class="line">arr_ud = np.flipud(arr1)</span><br><span class="line"><span class="built_in">print</span>( arr_ud ) <span class="comment">#[9 8 7 6 5 4 3 2 1 0]</span></span><br></pre></td></tr></table></figure>
<p><strong>(2) 矩阵的翻转</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建矩阵</span></span><br><span class="line">arr2 = np.arange(<span class="number">1</span>,<span class="number">21</span>).reshape(<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>( arr2 )</span><br><span class="line"><span class="comment"># [[ 01 02 03 04 05]</span></span><br><span class="line"><span class="comment">#  [06 07 08 09 10]</span></span><br><span class="line"><span class="comment">#  [11 12 13 14 15]</span></span><br><span class="line"><span class="comment">#  [16 17 18 19 20]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 左右翻转</span></span><br><span class="line">arr_lr = np.fliplr(arr2)</span><br><span class="line"><span class="built_in">print</span>( arr_lr )</span><br><span class="line"><span class="comment"># [[05 04 03 02 01]</span></span><br><span class="line"><span class="comment">#  [10 09 08 07 06]</span></span><br><span class="line"><span class="comment">#  [15 14 13 12 11]</span></span><br><span class="line"><span class="comment">#  [20 19 18 17 16]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 上下翻转</span></span><br><span class="line">arr_ud = np.flipud(arr2)</span><br><span class="line"><span class="built_in">print</span>( arr_ud )</span><br><span class="line"><span class="comment"># [[16 17 18 19 20]</span></span><br><span class="line"><span class="comment">#  [11 12 13 14 15]</span></span><br><span class="line"><span class="comment">#  [06 07 08 09 10]</span></span><br><span class="line"><span class="comment">#  [01 02 03 04 05]]</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅲ-数组的重塑"><a href="#Ⅲ-数组的重塑" class="headerlink" title="Ⅲ 数组的重塑"></a>Ⅲ 数组的重塑</h5><p>想要重塑数组的形状，需要用到 <code>.reshape( )</code> 方法。前面说过，给定了其他维度的数值，剩下一个维度可以填-1，让它自己去计算。比如把一个5 行6 列的矩阵重塑为3 行10 列的矩阵，当列的参数10 告诉它，行的参数直接可以用-1 来替代，它会自己去用30 除以10 来计算。</p>
<p><strong>(1) 向量的变形</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr1 = np.arange(<span class="number">1</span>,<span class="number">10</span>) <span class="comment"># 创建向量</span></span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line">arr2 = arr1.reshape(<span class="number">3</span>,<span class="number">3</span>) <span class="comment"># 变形为矩阵</span></span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># [[1 2 3]</span></span><br><span class="line"><span class="comment">#  [4 5 6]</span></span><br><span class="line"><span class="comment">#  [7 8 9]]</span></span><br></pre></td></tr></table></figure>
<p><strong>(2) 矩阵的变形</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr1 = np.array( [ [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>] ] ) <span class="comment"># 创建矩阵</span></span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"><span class="comment"># [[1 2 3]</span></span><br><span class="line"><span class="comment">#  [4 5 6]]</span></span><br><span class="line"></span><br><span class="line">arr2 = arr1.reshape(<span class="number">6</span>) <span class="comment"># 变形为向量</span></span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># [1 2 3 4 5 6]</span></span><br><span class="line"></span><br><span class="line">arr3 = arr1.reshape(<span class="number">1</span>,<span class="number">6</span>) <span class="comment"># 变形为矩阵</span></span><br><span class="line"><span class="built_in">print</span>(arr3)</span><br><span class="line"><span class="comment"># [[1 2 3 4 5 6]]</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅳ-数组的拼接"><a href="#Ⅳ-数组的拼接" class="headerlink" title="Ⅳ 数组的拼接"></a>Ⅳ 数组的拼接</h5><p><strong>(1) 向量的拼接</strong></p>
<p>两个向量拼接，使用<code>np.concatenate( [arr1, arr2] )</code>，将得到一个新的加长版向量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建向量1</span></span><br><span class="line">arr1 = np.array( [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] )</span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [1 2 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建向量2</span></span><br><span class="line">arr2 = np.array( [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>] )</span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [4 5 6]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拼接</span></span><br><span class="line">arr3 = np.concatenate( [arr1, arr2] )</span><br><span class="line"><span class="built_in">print</span>(arr3) <span class="comment"># [1 2 3 4 5 6]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>(2) 矩阵的拼接</strong></p>
<p>两个矩阵可以按不同的维度进行拼接，但拼接时必须注意维度的吻合。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建矩阵1</span></span><br><span class="line">arr1 = np.array( [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[ <span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]] )</span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"><span class="comment"># [[1 2 3]</span></span><br><span class="line"><span class="comment">#  [4 5 6]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建矩阵2</span></span><br><span class="line">arr2 = np.array( [[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>],[<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]] )</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># [[07 08 09]</span></span><br><span class="line"><span class="comment">#  [10 11 12]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按第一个维度（行）拼接</span></span><br><span class="line">arr3 = np.concatenate( [arr1,arr2] ) <span class="comment"># 默认参数axis=0</span></span><br><span class="line"><span class="built_in">print</span>(arr3)</span><br><span class="line"><span class="comment"># [[01 02 03]</span></span><br><span class="line"><span class="comment">#  [04 05 06]</span></span><br><span class="line"><span class="comment">#  [07 08 09]</span></span><br><span class="line"><span class="comment">#  [10 11 12]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按第二个维度（列）拼接</span></span><br><span class="line">arr4 = np.concatenate( [arr1,arr2] ,axis=<span class="number">1</span> )</span><br><span class="line"><span class="built_in">print</span>(arr4)</span><br><span class="line"><span class="comment"># [[01 02 03 07 08 09]</span></span><br><span class="line"><span class="comment">#  [04 05 06 10 11 12]]</span></span><br></pre></td></tr></table></figure>
<p>最后要说明的是，<strong>向量和矩阵不能直接进行拼接</strong>，必须先把向量升级为矩阵。</p>
<h5 id="Ⅴ-数组的分裂"><a href="#Ⅴ-数组的分裂" class="headerlink" title="Ⅴ 数组的分裂"></a>Ⅴ 数组的分裂</h5><p><strong>(1) 向量的分裂</strong></p>
<p>向量分裂使用<code>np.split( )</code>，将得到若干个更短的向量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建向量</span></span><br><span class="line">arr = np.arange(<span class="number">10</span>,<span class="number">100</span>,<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(arr) <span class="comment"># [10 20 30 40 50 60 70 80 90]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 分裂数组</span></span><br><span class="line">arr1,arr2,arr3 = np.split( arr , [<span class="number">2</span>,<span class="number">8</span>] )</span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [10 20]</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [30 40 50 60 70 80]</span></span><br><span class="line"><span class="built_in">print</span>(arr3) <span class="comment"># [90]</span></span><br></pre></td></tr></table></figure>
<p><code>np.split( )</code>函数中，给出的第二个参数<code>[2,8]</code>表示在索引<code>[2]</code>和索引<code>[8]</code>的位置截断。</p>
<p><strong>(2) 矩阵的分裂</strong></p>
<p>矩阵的分裂同样可以按不同的维度进行，分裂出来的均为矩阵。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建矩阵</span></span><br><span class="line">arr = np.arange(<span class="number">1</span>,<span class="number">9</span>).reshape(<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[1 2 3 4]</span></span><br><span class="line"><span class="comment">#  [5 6 7 8]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按第一个维度（行）分裂</span></span><br><span class="line">arr1, arr2 = np.split(arr,[<span class="number">1</span>]) <span class="comment"># 默认参数axis=0</span></span><br><span class="line"><span class="built_in">print</span>(arr1 , <span class="string">&#x27;\n\n&#x27;</span> , arr2) <span class="comment"># 注意输出的是矩阵</span></span><br><span class="line"><span class="comment"># [[1 2 3 4]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [[5 6 7 8]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按第二个维度（列）分裂</span></span><br><span class="line">arr1,arr2,arr3 = np.split( arr , [<span class="number">1</span>,<span class="number">3</span>] , axis=<span class="number">1</span> )</span><br><span class="line"><span class="built_in">print</span>( arr1 , <span class="string">&#x27;\n\n&#x27;</span> , arr2 , <span class="string">&#x27;\n\n&#x27;</span> , arr3 )</span><br><span class="line"><span class="comment"># [[1]</span></span><br><span class="line"><span class="comment">#  [5]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [[2 3]</span></span><br><span class="line"><span class="comment">#  [6 7]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [[4]</span></span><br><span class="line"><span class="comment">#  [8]]</span></span><br></pre></td></tr></table></figure>
<h4 id="2-1-5-数组的运算"><a href="#2-1-5-数组的运算" class="headerlink" title="2.1.5 数组的运算"></a>2.1.5 数组的运算</h4><h5 id="Ⅰ-数组与系数之间的运算"><a href="#Ⅰ-数组与系数之间的运算" class="headerlink" title="Ⅰ 数组与系数之间的运算"></a>Ⅰ 数组与系数之间的运算</h5><p>Python 基础中，常用的运算符如下表所示，NumPy的运算符与之相同。</p>
<p><img src="https://pic.imgdb.cn/item/6677d3d4d9c307b7e98ccf98.png" alt="image.png"></p>
<p>这里仅以矩阵为例，向量与系数的操作与之相同。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建矩阵</span></span><br><span class="line">arr = np.arange(<span class="number">1</span>,<span class="number">9</span>).reshape(<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>( arr )</span><br><span class="line"><span class="comment"># [[1 2 3 4]</span></span><br><span class="line"><span class="comment">#  [5 6 7 8]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr + <span class="number">10</span> ) <span class="comment"># 加法</span></span><br><span class="line"><span class="comment"># [[11 12 13 14]</span></span><br><span class="line"><span class="comment">#  [15 16 17 18]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr - <span class="number">10</span> ) <span class="comment"># 减法</span></span><br><span class="line"><span class="comment"># [[-9 -8 -7 -6]</span></span><br><span class="line"><span class="comment">#  [-5 -4 -3 -2]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr * <span class="number">10</span> ) <span class="comment"># 乘法</span></span><br><span class="line"><span class="comment"># [[10 20 30 40]</span></span><br><span class="line"><span class="comment">#  [50 60 70 80]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr / <span class="number">10</span> ) <span class="comment"># 除法</span></span><br><span class="line"><span class="comment"># [[0.1 0.2 0.3 0.4]</span></span><br><span class="line"><span class="comment">#  [0.5 0.6 0.7 0.8]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr ** <span class="number">2</span>) <span class="comment"># 平方</span></span><br><span class="line"><span class="comment"># [[01 04 09 16]</span></span><br><span class="line"><span class="comment">#  [25 36 49 64]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr // <span class="number">6</span>) <span class="comment"># 取整</span></span><br><span class="line"><span class="comment"># [[0 0 0 0]</span></span><br><span class="line"><span class="comment">#  [0 1 1 1]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr % <span class="number">6</span>) <span class="comment"># 取余</span></span><br><span class="line"><span class="comment"># [[1 2 3 4]</span></span><br><span class="line"><span class="comment">#  [5 0 1 2]]</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅱ-数组与数组之间的运算"><a href="#Ⅱ-数组与数组之间的运算" class="headerlink" title="Ⅱ 数组与数组之间的运算"></a>Ⅱ 数组与数组之间的运算</h5><p>同维度数组间的运算即对应元素之间的运算，这里仅以矩阵为例，向量与向量的操作与之相同。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建矩阵</span></span><br><span class="line">arr1 = np.arange(-<span class="number">1</span>,-<span class="number">9</span>,-<span class="number">1</span>).reshape(<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line">arr2 = -arr1</span><br><span class="line"><span class="built_in">print</span>( arr1 )</span><br><span class="line"><span class="comment"># [[-1 -2 -3 -4]</span></span><br><span class="line"><span class="comment">#  [-5 -6 -7 -8]]</span></span><br><span class="line"><span class="built_in">print</span>( arr2 )</span><br><span class="line"><span class="comment"># [[1 2 3 4]</span></span><br><span class="line"><span class="comment">#  [5 6 7 8]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr1 + arr2 ) <span class="comment"># 加法</span></span><br><span class="line"><span class="comment"># [[0 0 0 0]</span></span><br><span class="line"><span class="comment">#  [0 0 0 0]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr1 - arr2 ) <span class="comment"># 减法</span></span><br><span class="line"><span class="comment"># [[ 0-2 0-4 0-6 0-8]</span></span><br><span class="line"><span class="comment">#  [-10 -12 -14 -16]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr1 * arr2 ) <span class="comment"># 乘法</span></span><br><span class="line"><span class="comment"># [[ -1 -4 -9 -16]</span></span><br><span class="line"><span class="comment">#  [-25 -36 -49 -64]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr1 / arr2 ) <span class="comment"># 除法</span></span><br><span class="line"><span class="comment"># [[-1. -1. -1. -1.]</span></span><br><span class="line"><span class="comment">#  [-1. -1. -1. -1.]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( arr1 ** arr2) <span class="comment"># 幂方</span></span><br><span class="line"><span class="comment"># [[ -1 4 -27 256]</span></span><br><span class="line"><span class="comment">#  [ -3125 46656 -823543 16777216]]</span></span><br></pre></td></tr></table></figure>
<p>上述示例中，乘法是遵循对应元素相乘的，你可以称之为<strong>“逐元素乘积/哈达玛积(<em>Hadamard</em> product) ”</strong>。</p>
<p>那么如何实现线性代数中的“矩阵级乘法”呢？6.1 会介绍到相关函数。</p>
<h5 id="Ⅲ-广播"><a href="#Ⅲ-广播" class="headerlink" title="Ⅲ 广播"></a>Ⅲ 广播</h5><p>Ⅱ是同形状数组之间的逐元素运算，本节讲解不同形状的数组之间的运算。本课件仅讨论二维数组之内的情况，不同形状的数组之间的运算有以下规则：</p>
<ul>
<li>如果是向量与矩阵之间做运算，向量自动升级为行矩阵；</li>
<li>如果某矩阵是行矩阵或列矩阵，则其被广播，以适配另一个矩阵的形状。</li>
</ul>
<p><strong>(1) 向量被广播</strong></p>
<p>当一个形状为(x,y)的矩阵与一个向量做运算时，要求该向量的形状必须为y，运算时向量会自动升级成形状为(1,y)的行矩阵，该形状为(1,y)的行矩阵再自动被广播为形状为(x,y)的矩阵，这样就与另一个矩阵的形状适配了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 向量</span></span><br><span class="line">arr1 = np.array([-<span class="number">100</span>,<span class="number">0</span>,<span class="number">100</span>])</span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"><span class="comment"># [-100 0 100]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 矩阵</span></span><br><span class="line">arr2 = np.random.random( (<span class="number">10</span>,<span class="number">3</span>) )</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># [[0.60755301 0.47875215 0.70909527]</span></span><br><span class="line"><span class="comment">#  [0.12946037 0.78380689 0.7771824 ]</span></span><br><span class="line"><span class="comment">#  [0.2658308 0.34287368 0.21176781]</span></span><br><span class="line"><span class="comment">#  [0.93920876 0.73860266 0.32531675]</span></span><br><span class="line"><span class="comment">#  [0.92474339 0.97997977 0.98410076]</span></span><br><span class="line"><span class="comment">#  [0.52791609 0.17325381 0.04736612]</span></span><br><span class="line"><span class="comment">#  [0.8543378 0.707902 0.36518268]</span></span><br><span class="line"><span class="comment">#  [0.72053659 0.71830332 0.12972364]</span></span><br><span class="line"><span class="comment">#  [0.86540524 0.95537187 0.66062319]</span></span><br><span class="line"><span class="comment">#  [0.46449401 0.88824093 0.77800761]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 广播</span></span><br><span class="line"><span class="built_in">print</span>(arr1*arr2)</span><br><span class="line"><span class="comment"># [[-60.75530134 0. 70.90952713]</span></span><br><span class="line"><span class="comment">#  [-12.94603684 0. 77.71823953]</span></span><br><span class="line"><span class="comment">#  [-26.58307957 0. 21.17678114]</span></span><br><span class="line"><span class="comment">#  [-93.92087564 0. 32.53167491]</span></span><br><span class="line"><span class="comment">#  [-92.47433933 0. 98.41007632]</span></span><br><span class="line"><span class="comment">#  [-52.7916095 0. 4.73661185]</span></span><br><span class="line"><span class="comment">#  [-85.43377956 0. 36.51826765]</span></span><br><span class="line"><span class="comment">#  [-72.05365932 0. 12.97236352]</span></span><br><span class="line"><span class="comment">#  [-86.54052368 0. 66.06231879]</span></span><br><span class="line"><span class="comment">#  [-46.44940114 0. 77.80076055]]</span></span><br></pre></td></tr></table></figure>
<p><strong>(2) 列矩阵被广播</strong></p>
<p>当一个形状为(x,y)的矩阵与一个列矩阵做运算时，要求该列矩阵的形状必须为(x,1)，该形状为(x,1)的列矩阵再自动被广播为形状为(x,y)的矩阵，这样就与另一个矩阵的形状适配了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列矩阵</span></span><br><span class="line">arr1 = np.arange(<span class="number">3</span>).reshape(<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"><span class="comment"># [[0]</span></span><br><span class="line"><span class="comment">#  [1]</span></span><br><span class="line"><span class="comment">#  [2]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 矩阵</span></span><br><span class="line">arr2 = np.ones( (<span class="number">3</span>,<span class="number">5</span>) )</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># [[1. 1. 1. 1. 1.]</span></span><br><span class="line"><span class="comment">#  [1. 1. 1. 1. 1.]</span></span><br><span class="line"><span class="comment">#  [1. 1. 1. 1. 1.]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 广播</span></span><br><span class="line"><span class="built_in">print</span>(arr1*arr2)</span><br><span class="line"><span class="comment"># [[0. 0. 0. 0. 0.]</span></span><br><span class="line"><span class="comment">#  [1. 1. 1. 1. 1.]</span></span><br><span class="line"><span class="comment">#  [2. 2. 2. 2. 2.]]</span></span><br></pre></td></tr></table></figure>
<p><strong>(3) 行矩阵与列矩阵同时被广播</strong></p>
<p>当一个形状为(1,y)的行矩阵与一个形状为(x,1) 的列矩阵做运算时，这俩矩阵都会被自动广播为形状为(x,y)的矩阵，这样就互相适配了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 向量</span></span><br><span class="line">arr1 = np.arange(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"><span class="comment"># [0 1 2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列矩阵</span></span><br><span class="line">arr2 = np.arange(<span class="number">3</span>).reshape(<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># [[0]</span></span><br><span class="line"><span class="comment">#  [1]</span></span><br><span class="line"><span class="comment">#  [2]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 广播</span></span><br><span class="line"><span class="built_in">print</span>(arr1*arr2)</span><br><span class="line"><span class="comment"># [[0 0 0]</span></span><br><span class="line"><span class="comment">#  [0 1 2]</span></span><br><span class="line"><span class="comment">#  [0 2 4]]</span></span><br></pre></td></tr></table></figure>
<h4 id="2-1-6-数组的函数"><a href="#2-1-6-数组的函数" class="headerlink" title="2.1.6 数组的函数"></a>2.1.6 数组的函数</h4><h5 id="Ⅰ-矩阵乘积"><a href="#Ⅰ-矩阵乘积" class="headerlink" title="Ⅰ 矩阵乘积"></a>Ⅰ 矩阵乘积</h5><ul>
<li>2.1.5 中的乘法都是“逐元素相乘”，这里介绍线性代数中的矩阵乘积，本节只需要使用 <code>np.dot( )</code> 函数。</li>
<li>当矩阵乘积中混有向量时，根据需求，其可充当行矩阵，也可充当列矩阵，但混有向量时输出结果必为向量。</li>
</ul>
<p><strong>(1) 向量与向量的乘积</strong></p>
<p>设两个向量的形状按前后顺序分别是 5 以及 5 。从矩阵乘法的角度，有$(1,5) \times (5,1) = (1,1)$，因此输出的应该是形状为 1 的向量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建向量</span></span><br><span class="line">arr1 = np.arange(<span class="number">5</span>)</span><br><span class="line">arr2 = np.arange(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [0 1 2 3 4]</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [0 1 2 3 4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 矩阵乘积</span></span><br><span class="line"><span class="built_in">print</span>( np.dot(arr1,arr2) )</span><br><span class="line"><span class="number">30</span></span><br></pre></td></tr></table></figure>
<p><strong>(2) 向量与矩阵的乘积</strong></p>
<p>设向量的形状是5 ， 矩阵的形状是 (5,3) 。从矩阵乘法的角度， 有$(1,5)\times(5,3) = (1,3)$，因此输出的应该是形状为 3 的向量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数组</span></span><br><span class="line">arr1 = np.arange(<span class="number">5</span>)</span><br><span class="line">arr2 = np.arange(<span class="number">15</span>).reshape(<span class="number">5</span>,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [0 1 2 3 4]</span></span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># [[00 01 02]</span></span><br><span class="line"><span class="comment">#  [03 04 05]</span></span><br><span class="line"><span class="comment">#  [06 07 08]</span></span><br><span class="line"><span class="comment">#  [09 10 11]</span></span><br><span class="line"><span class="comment">#  [12 13 14]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 矩阵乘积</span></span><br><span class="line"><span class="built_in">print</span>( np.dot(arr1,arr2) )</span><br><span class="line"><span class="comment"># [90 100 110]</span></span><br></pre></td></tr></table></figure>
<p><strong>(3) 矩阵与矩阵的乘积</strong></p>
<p>设两个矩阵的形状按前后顺序分别是$(5,2)$以及$(2,8)$ 。从矩阵乘法的角度，有$(5, 2)\times(2,8) = (5,8)$，因此输出的应该是形状为$(5,8)$的矩阵。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 创建数组1</span></span><br><span class="line">arr1 = np.arange(<span class="number">10</span>).reshape(<span class="number">5</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"><span class="comment"># [[0 1]</span></span><br><span class="line"><span class="comment">#  [2 3]</span></span><br><span class="line"><span class="comment">#  [4 5]</span></span><br><span class="line"><span class="comment">#  [6 7]</span></span><br><span class="line"><span class="comment">#  [8 9]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数组2</span></span><br><span class="line">arr2 = np.arange(<span class="number">16</span>).reshape(<span class="number">2</span>,<span class="number">8</span>)</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="comment"># [[00 01 02 03 04 05 06 07]</span></span><br><span class="line"><span class="comment">#  [08 09 10 11 12 13 14 15]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 矩阵乘积</span></span><br><span class="line"><span class="built_in">print</span>( np.dot(arr1,arr2) )</span><br><span class="line"><span class="comment"># [[008 009 010 011 012 013 014 015]</span></span><br><span class="line"><span class="comment">#  [024 029 034 039 044 049 054 059]</span></span><br><span class="line"><span class="comment">#  [040 049 058 067 076 085 094 103]</span></span><br><span class="line"><span class="comment">#  [056 069 082 095 108 121 134 147]</span></span><br><span class="line"><span class="comment">#  [072 089 106 123 140 157 174 191]]</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅱ-数学函数"><a href="#Ⅱ-数学函数" class="headerlink" title="Ⅱ 数学函数"></a>Ⅱ 数学函数</h5><p>NumPy 设计了很多数学函数，这里列举其中最重要、最常见的几个。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绝对值函数</span></span><br><span class="line">arr_v = np.array( [-<span class="number">10</span>, <span class="number">0</span>, <span class="number">10</span>] )</span><br><span class="line">abs_v = np.<span class="built_in">abs</span>(arr_v)</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;原数组是：&#x27;</span> , arr_v )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;绝对值是：&#x27;</span> , abs_v )</span><br><span class="line"><span class="comment"># 原数组是： [-10 0 10]</span></span><br><span class="line"><span class="comment"># 绝对值是： [10 0 10]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 三角函数</span></span><br><span class="line">theta = np.arange(<span class="number">3</span>) * np.pi / <span class="number">2</span></span><br><span class="line">sin_v = np.sin(theta)</span><br><span class="line">cos_v = np.cos(theta)</span><br><span class="line">tan_v = np.tan(theta)</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;原数组是：&#x27;</span> , theta )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;正弦值是：&#x27;</span> , sin_v )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;余弦值是：&#x27;</span> , cos_v )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;正切值是：&#x27;</span> , tan_v )</span><br><span class="line"><span class="comment"># 原数组是： [0. 1.57079633 3.14159265]</span></span><br><span class="line"><span class="comment"># 正弦值是： [0.0000000e+00 1.0000000e+00 1.2246468e-16]</span></span><br><span class="line"><span class="comment"># 余弦值是： [ 1.000000e+00 6.123234e-17 -1.000000e+00]</span></span><br><span class="line"><span class="comment"># 正切值是： [ 0.00000000e+00 1.63312394e+16 -1.22464680e-16]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指数函数</span></span><br><span class="line">x = np.arange(<span class="number">1</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;x =&#x27;</span> , x )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;e^x =&#x27;</span> , np.exp(x) )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;2^x =&#x27;</span> , <span class="number">2</span>**x )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;10^x = &#x27;</span> , <span class="number">10</span>**x )</span><br><span class="line"><span class="comment"># x = [1 2 3]</span></span><br><span class="line"><span class="comment"># e^x = [ 2.71828183 7.3890561 20.08553692]</span></span><br><span class="line"><span class="comment"># 2^x = [2 4 8]</span></span><br><span class="line"><span class="comment"># 10^x = [ 10 100 1000]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对数函数</span></span><br><span class="line">x = np.array( [<span class="number">1</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">1000</span>] )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;x =&#x27;</span> , x )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;ln(x) =&#x27;</span> , np.log(x) )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;log2(x) =&#x27;</span> , np.log(x) / np.log(<span class="number">2</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;log10(x) =&#x27;</span> , np.log(x) / np.log(<span class="number">10</span>) )</span><br><span class="line"><span class="comment"># x = [ 1 10 100 1000]</span></span><br><span class="line"><span class="comment"># ln(x) = [0. 2.30258509 4.60517019 6.90775528]</span></span><br><span class="line"><span class="comment"># log2(x) = [0. 3.32192809 6.64385619 9.96578428]</span></span><br><span class="line"><span class="comment"># log10(x) = [0. 1. 2. 3.]</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅲ-聚合函数"><a href="#Ⅲ-聚合函数" class="headerlink" title="Ⅲ 聚合函数"></a>Ⅲ 聚合函数</h5><p>聚合很有用，这里用矩阵演示。向量与之一致，但没有<code>axis</code> 参数。以下在注释中介绍了6个最重要的聚合函数，其用法完全一致，仅演示其中3 个。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最大值函数np.max( )与最小值函数np.min( )</span></span><br><span class="line">arr = np.random.random((<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line"><span class="built_in">print</span>( arr )</span><br><span class="line"><span class="comment"># [[0.54312818 0.57067295 0.11898755]</span></span><br><span class="line"><span class="comment">#  [0.85857494 0.33915753 0.4742594 ]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;按维度一求最大值：&#x27;</span> , np.<span class="built_in">max</span>(arr,axis=<span class="number">0</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;按维度二求最大值：&#x27;</span> , np.<span class="built_in">max</span>(arr,axis=<span class="number">1</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;整体求最大值：&#x27;</span> , np.<span class="built_in">max</span>(arr) )</span><br><span class="line"><span class="comment"># 按维度一求最大值： [0.85857494 0.57067295 0.4742594 ]</span></span><br><span class="line"><span class="comment"># 按维度二求最大值： [0.57067295 0.85857494]</span></span><br><span class="line"><span class="comment"># 整体求最大值： 0.8585749445359108</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 求和函数np.sum( )与求积函数np.prod( )</span></span><br><span class="line">arr = np.arange(<span class="number">10</span>).reshape(<span class="number">2</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>( arr )</span><br><span class="line"><span class="comment"># [[0 1 2 3 4]</span></span><br><span class="line"><span class="comment">#  [5 6 7 8 9]]</span></span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;按维度一求和：&#x27;</span> , np.<span class="built_in">sum</span>(arr,axis=<span class="number">0</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;按维度二求和：&#x27;</span> , np.<span class="built_in">sum</span>(arr,axis=<span class="number">1</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;整体求和：&#x27;</span> , np.<span class="built_in">sum</span>(arr) )</span><br><span class="line"><span class="comment"># 按维度一求和： [ 5 7 9 11 13]</span></span><br><span class="line"><span class="comment"># 按维度二求和： [10 35]</span></span><br><span class="line"><span class="comment"># 整体求和： 45</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 均值函数np.mean( )与标准差函数np.std( )</span></span><br><span class="line">arr = np.arange(<span class="number">10</span>).reshape(<span class="number">2</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>( arr )</span><br><span class="line"><span class="comment"># [[0 1 2 3 4]</span></span><br><span class="line"><span class="comment">#  [5 6 7 8 9]]</span></span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;按维度一求平均：&#x27;</span> , np.mean(arr,axis=<span class="number">0</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;按维度二求平均：&#x27;</span> , np.mean(arr,axis=<span class="number">1</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;整体求平均：&#x27;</span> , np.mean(arr) )</span><br><span class="line"><span class="comment"># 按维度一求平均： [2.5 3.5 4.5 5.5 6.5]</span></span><br><span class="line"><span class="comment"># 按维度二求平均： [2. 7.]</span></span><br><span class="line"><span class="comment"># 整体求平均： 4.5</span></span><br></pre></td></tr></table></figure>
<ul>
<li>当 <code>axis=0</code> 时，最终结果与每一行的元素个数一致；</li>
<li>当 <code>axis=1</code> 时，最终结果与每一列的元素个数一致。</li>
</ul>
<p>考虑到大型数组难免有缺失值，以上聚合函数碰到缺失值时会报错，因此出现了聚合函数的安全版本，即计算时忽略缺失值：<code>np.nansum( )</code>、<code>np.nanprod( )</code> 、<code>np.nanmean( )</code>、<code>np.nanstd( )</code>、<code>np.nanmax( )</code>、<code>np.nanmin( )</code>。</p>
<h4 id="2-1-7-布尔型数组"><a href="#2-1-7-布尔型数组" class="headerlink" title="2.1.7 布尔型数组"></a>2.1.7 布尔型数组</h4><p>除了整数型数组和浮点型数组，还有一种有用的数组类型——布尔型数组。</p>
<h5 id="Ⅰ-创建布尔型数组"><a href="#Ⅰ-创建布尔型数组" class="headerlink" title="Ⅰ 创建布尔型数组"></a>Ⅰ 创建布尔型数组</h5><p>由于NumPy 的主要数据类型是整数型数组或浮点型数组，因此布尔型数组的产生离不开：大于&gt;、大于等于&gt;=、等于==、不等号!=、小于&lt;、小于等于&lt;=。</p>
<p>首先，我们将数组与系数作比较，以产生布尔型数组，示例如下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数组</span></span><br><span class="line">arr = np.arange(<span class="number">1</span>,<span class="number">7</span>).reshape(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[1 2 3]</span></span><br><span class="line"><span class="comment">#  [4 5 6]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数组与数字作比较</span></span><br><span class="line"><span class="built_in">print</span>( arr &gt;= <span class="number">4</span> )</span><br><span class="line"><span class="comment"># [[False False False]</span></span><br><span class="line"><span class="comment">#  [True True True]]</span></span><br></pre></td></tr></table></figure>
<p>其次，我们将同维数组作比较，以产生布尔型数组，示例如下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建同维数组</span></span><br><span class="line">arr1 = np.arange(<span class="number">1</span>,<span class="number">6</span>)</span><br><span class="line">arr2 = np.flipud(arr1)</span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [1 2 3 4 5]</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [5 4 3 2 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 同维度数组作比较</span></span><br><span class="line"><span class="built_in">print</span>( arr1 &gt; arr2)</span><br><span class="line"><span class="comment"># [False False False True True]</span></span><br></pre></td></tr></table></figure>
<p>最后，还可以同时比较多个条件。Python 基础里，同时检查多个条件使用的与、或、非是and、or、not。但NumPy 中使用的与、或、非是 &amp; 、 | 、 ~ 。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数组</span></span><br><span class="line">arr = np.arange(<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多个条件</span></span><br><span class="line"><span class="built_in">print</span>( (arr &lt; <span class="number">4</span>) | (arr &gt; <span class="number">6</span>) )</span><br><span class="line"><span class="comment"># [ True True True False False False True True True]</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅱ-布尔型数组中True-的数量"><a href="#Ⅱ-布尔型数组中True-的数量" class="headerlink" title="Ⅱ 布尔型数组中True 的数量"></a>Ⅱ 布尔型数组中True 的数量</h5><p>有三个关于Ture 数量的有用函数，分别是<code>np.sum( )</code>、<code>np.any( )</code>、<code>np.all( )</code>。</p>
<p><code>np.sum( )</code>函数：统计布尔型数组里True 的个数。示例如下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个形状为10000 的标准正态分布数组</span></span><br><span class="line">arr = np.random.normal( <span class="number">0</span>,<span class="number">1</span>,<span class="number">10000</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计该分布中绝对值小于1 的元素个数</span></span><br><span class="line">num = np.<span class="built_in">sum</span>( np.<span class="built_in">abs</span>(arr) &lt; <span class="number">1</span> )</span><br><span class="line"><span class="built_in">print</span>( num ) <span class="comment"># 6814</span></span><br></pre></td></tr></table></figure>
<p>上述示例里，<code>np.abs(arr) &lt; 1</code> 可以替换为 <code>(arr&gt;-1) &amp; (arr&lt;1)</code>。此外，最终统计的数量为6814，其概率近似为0.6827，这符合统计学中的3σ 准则。</p>
<p><code>np.any( )</code>函数：只要布尔型数组里含有一个及其以上的True，就返回True。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建同维数组</span></span><br><span class="line">arr1 = np.arange(<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line">arr2 = np.flipud(arr1)</span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [9 8 7 6 5 4 3 2 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计这两个数组里是否有共同元素</span></span><br><span class="line"><span class="built_in">print</span>( np.<span class="built_in">any</span>( arr1 == arr2 ) )</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p>从结果来看，arr1 与arr2 里含有共同元素，那就是5。</p>
<p><code>np.all( )</code>函数：当布尔型数组里全是True时，才返回True，示例如下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟英语六级的成绩，创建100000 个样本</span></span><br><span class="line">arr = np.random.normal( <span class="number">500</span>,<span class="number">70</span>,<span class="number">100000</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断是否所有考生的分数都高于250</span></span><br><span class="line"><span class="built_in">print</span>( np.<span class="built_in">all</span>( arr &gt; <span class="number">250</span> ) )</span><br><span class="line"><span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<p>从结果来看，尽管3σ 准则告诉我们有99.73%的考生成绩高于290 分（290通过$500−3\times70$计算得到），但仍然有最终成绩低于 250 分的裸考者。</p>
<h5 id="Ⅲ-布尔型数组作为掩码"><a href="#Ⅲ-布尔型数组作为掩码" class="headerlink" title="Ⅲ 布尔型数组作为掩码"></a>Ⅲ 布尔型数组作为掩码</h5><p>若一个普通数组和一个布尔型数组的维度相同，可以将布尔型数组作为普通数组的掩码，这样可以对普通数组中的元素作筛选。给出两个示例。</p>
<p>第一个示例，筛选出数组中大于、等于或小于某个数字的元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数组</span></span><br><span class="line">arr = np.arange(<span class="number">1</span>,<span class="number">13</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[01 02 03 04]</span></span><br><span class="line"><span class="comment">#  [05 06 07 08]</span></span><br><span class="line"><span class="comment">#  [09 10 11 12]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数组与数字作比较</span></span><br><span class="line"><span class="built_in">print</span>( arr &gt; <span class="number">4</span> )</span><br><span class="line"><span class="comment"># [[False False False False]</span></span><br><span class="line"><span class="comment">#  [ True True True True]</span></span><br><span class="line"><span class="comment">#  [ True True True True]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 筛选出 arr &gt; 4 的元素</span></span><br><span class="line"><span class="built_in">print</span>( arr[ arr &gt; <span class="number">4</span> ] )</span><br><span class="line"><span class="comment">#  [05 06 07 08 09 10 11 12]</span></span><br></pre></td></tr></table></figure>
<p>注意，这个矩阵进行掩码操作后，退化为了向量。</p>
<p>第二个示例，筛选出数组逐元素比较的结果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>] : <span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建同维数组</span></span><br><span class="line">arr1 = np.arange(<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line">arr2 = np.flipud(arr1)</span><br><span class="line"><span class="built_in">print</span>(arr1) <span class="comment"># [1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"><span class="built_in">print</span>(arr2) <span class="comment"># [9 8 7 6 5 4 3 2 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 同维度数组作比较</span></span><br><span class="line"><span class="built_in">print</span>( arr1 &gt; arr2)</span><br><span class="line"><span class="comment"># [False False False False False True True True True]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 筛选出 arr1 &gt; arr2 位置上的元素</span></span><br><span class="line"><span class="built_in">print</span>( arr1[ arr1 &gt; arr2 ] )</span><br><span class="line"><span class="comment"># [6 7 8 9]</span></span><br><span class="line"><span class="built_in">print</span>( arr2[ arr1 &gt; arr2 ] )</span><br><span class="line"><span class="comment"># [4 3 2 1]</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅳ-满足条件的元素所在位置"><a href="#Ⅳ-满足条件的元素所在位置" class="headerlink" title="Ⅳ 满足条件的元素所在位置"></a>Ⅳ 满足条件的元素所在位置</h5><p>现在我们来思考一种情况：假设一个很长的数组，我想知道满足某个条件的元素们所在的索引位置，此时使用<code>np.where( )</code>函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>] : <span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟英语六级成绩的随机数组，取10000 个样本</span></span><br><span class="line">arr = np.random.normal( <span class="number">500</span>,<span class="number">70</span>,<span class="number">1000</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 找出六级成绩超过650 的元素所在位置</span></span><br><span class="line"><span class="built_in">print</span>( np.where( arr &gt; <span class="number">650</span> ) )</span><br><span class="line"><span class="comment"># (array([127, 129, 317, 342, 484, 490, 634, 658, 677, 755, 763, 819, 820,</span></span><br><span class="line"><span class="comment">#   853, 926, 932, 982], dtype=int64),)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 找出六级成绩最高分的元素所在位置</span></span><br><span class="line"><span class="built_in">print</span>( np.where( arr == np.<span class="built_in">max</span>(arr) ) )</span><br><span class="line"><span class="comment"># (array([342], dtype=int64),)</span></span><br></pre></td></tr></table></figure>
<p><code>np.where( )</code>函数的输出看起来比较怪异，它是输出了一个<strong>元组</strong>。元组第一个元素是“满足条件的元素所在位置”；第二个元素是数组类型，可忽略掉。</p>
<h4 id="2-1-8-其他补充"><a href="#2-1-8-其他补充" class="headerlink" title="2.1.8 其他补充"></a>2.1.8 其他补充</h4><h5 id="Ⅰ-np-array和np-ndarry-的区别"><a href="#Ⅰ-np-array和np-ndarry-的区别" class="headerlink" title="Ⅰ np.array和np.ndarry 的区别"></a>Ⅰ np.array和np.ndarry 的区别</h5><p>np.array和np.ndarray都是NumPy中用于创建多维数组的函数。</p>
<p>np.ndarray是NumPy中的多维数组类，它是一种可变的数组，可以通过修改数组中的元素来改变其内容。使用np.ndarray创建的数组必须指定形状、元素类型和存储器位置等参数。例如，可以使用以下代码创建一个2x2的整数数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = np.ndarray(shape=(<span class="number">2</span>, <span class="number">2</span>), dtype=<span class="built_in">int</span>, buffer=np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]))</span><br></pre></td></tr></table></figure>
<p>np.array是用于创建多维数组的函数，它会将输入的数据转换为一个NumPy数组。与np.ndarray不同，使用np.array创建的数组不需要指定形状、元素类型和存储器位置等参数。例如，以下代码将一个Python列表转换为一个NumPy数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br></pre></td></tr></table></figure>
<p>在实际使用中，<strong>np.array更加常用，因为它可以从Python列表、元组、其他序列类型等对象自动推断形状和数据类型，并且不需要手动指定存储器位置</strong>。但如果你需要创建一些特定的数组，比如指定从已有的数据缓冲区中创建数组，或者指定存储器位置，那么np.ndarray可能更适合你的需求。</p>
<p>总之，np.ndarray是NumPy中的一个多维数组类，而np.array是一个用于创建多维数组的函数，两者的使用场景略有不同。</p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/joiln/p/17279249.html">np.array和np.ndarry 的区别 - 个人博客</a></p>
<h4 id="2-1-9-从数组到张量"><a href="#2-1-9-从数组到张量" class="headerlink" title="2.1.9 从数组到张量"></a>2.1.9 从数组到张量</h4><p>本视频中，numpy为1.21.5版本，torch为1.12.0版本。PyTorch不同版本的发行日志：<a target="_blank" rel="noopener" href="https://pytorch.org/blog/。">https://pytorch.org/blog/。</a></p>
<h5 id="Ⅰ-数组与张量"><a href="#Ⅰ-数组与张量" class="headerlink" title="Ⅰ 数组与张量"></a>Ⅰ 数组与张量</h5><ul>
<li>本次课属于《Python 深度学习》系列视频，PyTorch 作为当前首屈一指的深度学习库，其将NumPy 的语法尽数吸收，作为自己处理数组的基本语法，且运算速度从使用CPU 的数组进步到使用GPU 的张量。</li>
<li>NumPy 和PyTorch 的基础语法几乎一致，具体表现为：<ul>
<li>① np 对应torch；</li>
<li>② 数组array 对应张量tensor；</li>
<li>③ NumPy 的n 维数组对应着PyTorch 的n 阶张量。</li>
</ul>
</li>
<li>数组与张量之间可以相互转换：<ul>
<li>数组arr 转为张量ts：ts = torch.tensor(arr)；</li>
<li>张量ts 转为数组arr：arr = np.array(ts)。</li>
</ul>
</li>
</ul>
<h5 id="Ⅱ-语法不同点"><a href="#Ⅱ-语法不同点" class="headerlink" title="Ⅱ 语法不同点"></a>Ⅱ 语法不同点</h5><p>为找到NumPy 和PyTorch哪些语法不同，UP对本文档进行了替换操作，将np改为torch，将array改为tensor，并重新运行所有代码，得出结论：PyTorch只是少量修改了NumPy 的部分函数或方法，现对其中不同的地方进行罗列。</p>
<p><img src="https://pic.imgdb.cn/item/6677e61ed9c307b7e9b196e7.png" alt="image.png"></p>
<h3 id="2-2-Tensor学习"><a href="#2-2-Tensor学习" class="headerlink" title="2.2 Tensor学习"></a>2.2 Tensor学习</h3><div class="bvideo">
    <a href="//www.bilibili.com/video/BV1dp4y1U7mD" target="_blank">
        <div class="bvideo-box">
            <div class="bvideo-cover">
                <div class="cover-default"></div>
                <div class="bvideo-cover-layer" style="background-image:url(https://images.weserv.nl/?url=http://i1.hdslb.com/bfs/archive/94cd4d825559b6558f673ee5eef0500ad70a709f.jpg)">
                    <i class="icon-video"></i>
                </div>
                <span class="duration">00:31:03</span>
            </div>
            <div class="bvideo-info">
                <p class="title">02 轻松学 PyTorch 初识Tensor</p>
                <p class="card-status">
                    <span class="play-num">
                        <i class="fa fa-youtube-play"></i>
                        <span>1.5万</span></span>
                    <span>
                        <i class="fa fa-list-alt"></i>
                        <span>66</span></span></p>
                <div class="partition">
                    <label class="card-label">视频</label>
                    <label class="up-label"></label>
                    <label class="up-name">唐国梁Tommy</label>
                </div>
                <div class="actions hide"></div>
            </div>
        </div>
    </a>
</div> 
<div class="table-container">
<table>
<thead>
<tr>
<th>Tensor基本概念的理解</th>
</tr>
</thead>
<tbody>
<tr>
<td>我们都知道Numpy是支持大量维度数组与矩阵运算的常用扩展库(只能在cpu上跑numpy)。但是对于<br><strong>计算图，深度学习或者梯度</strong>，Numpy是有心无力，因为它的计算无法像Tensor一样在能用GPU加速。<br>Tensor是n维的数组，在概念上与numpy数组是一样的，但不同的是Tensor可以跟踪计算图和计算梯<br>度[<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/142859846">参考链接1</a>]。</td>
</tr>
<tr>
<td>Tensor与Numpy没区别，就是多维数组而已，不是物理概念的张量。不用numpy是因为pytorch需要<br>支持额外的功能：① GPU等其它硬件的支持；② 自动的梯度计算和back propagation[<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/598278407/answer/3019708794">参考链接2</a>]。<br>不精确地说， 若numpy数据结构也支持GPU，现在深度学习里大概就都叫ndarray而不是Tensor了。</td>
</tr>
<tr>
<td>在PyTorch中，张量Tensor是最基础的运算单位，与NumPy中的NDArray类似，张量表示的是一个多维<br>矩阵。不同的是，PyTorch中的Tensor可以运行在GPU上，而NumPy的NDArray只能运行在CPU上。由<br>于Tensor能在GPU上运行，故大大加快了运算速度，tensor再怎么高级也只是一个数据结构而已。 <br><strong>一句话总结：一个可以运行在gpu上的多维数据而已</strong>[<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1883945">参考链接3</a>]。</td>
</tr>
<tr>
<td></td>
</tr>
</tbody>
</table>
</div>
<h4 id="2-2-1-为什么要用tensor"><a href="#2-2-1-为什么要用tensor" class="headerlink" title="2.2.1  为什么要用tensor"></a>2.2.1  为什么要用tensor</h4><p>深度学习中的tensor指的是张量，相比于numpy中的数组，它有如下优点，</p>
<ul>
<li><strong>支持 GPU 加速</strong>：深度学习中，需要对大量数据进行计算，并且这些计算通常是高度并行化的。使用 tensor 可以方便地将计算放到 GPU 上进行加速，而 numpy 则通常只能在 CPU 上进行计算。</li>
<li><strong>支持自动求导</strong>：深度学习中，需要对模型参数进行优化，而优化通常需要求解参数的梯度。使用 tensor 可以方便地实现自动求导，而 numpy 则需要手动实现求导过程。</li>
<li><strong>支持动态计算图</strong>：深度学习中，通常需要构建复杂的计算图来描述模型结构和计算过程。使用 tensor 可以方便地构建动态计算图，而 numpy  则只能使用静态计算图。</li>
</ul>
<p>因此，使用 tensor 可以提高深度学习的计算效率和开发效率，并且方便实现自动求导和构建动态计算图。虽然 tensor  相对于numpy复杂一些，但是在深度学习中，使用 tensor 是非常普遍和必要的。</p>
<h4 id="2-2-2-Tensor属性"><a href="#2-2-2-Tensor属性" class="headerlink" title="2.2.2 Tensor属性"></a>2.2.2 Tensor属性</h4><h5 id="Ⅰ-Tensor属性概述"><a href="#Ⅰ-Tensor属性概述" class="headerlink" title="Ⅰ Tensor属性概述"></a>Ⅰ Tensor属性概述</h5><p>在 PyTorch 0.4.0 之前，<code>torch.autograd</code> 包中存在 Variable 这种数据类型，主要是用于封装 Tensor，进行自动求导。Variable 主要包含下面几种属性。 在 PyTorch 0.4.0之后，Variable 并入了 Tensor。在之后版本的 Tensor 中，除了具有上面 Variable 的 5 个属性，还有另外 3 个属性。 </p>
<p><img src="https://pic.imgdb.cn/item/6677f774d9c307b7e9d1966b.png" alt="image.png"></p>
<ul>
<li>data：被包装的Tensor；</li>
<li>grad：data的梯度；</li>
<li>grad_fn：创建Tensor所使用的Function，是自动求导的关键，因为根据所记录的函数才能计算出导数。</li>
<li>requires_grad：指示是否需要梯度，并不是所有的张量都需要计算梯度。</li>
<li>is_leaf：指示是否为叶子节点（张量），叶子节点的概念在计算图中会用到，后面详细介绍。</li>
<li>dtype：张量的数据类型，如 torch.FloatTensor，torch.cuda.FloatTensor</li>
<li>shape：张量的形状。如 (64, 3, 224, 224)</li>
<li>device：张量所在设备 (CPU/GPU)，GPU 是加速计算的关键</li>
</ul>
<h5 id="Ⅱ-Tensor数据类型"><a href="#Ⅱ-Tensor数据类型" class="headerlink" title="Ⅱ Tensor数据类型"></a>Ⅱ Tensor数据类型</h5><p>torch.dtype属性标识了torch.Tensor的数据类型。PyTorch有八种不同的数据类型：</p>
<p><img src="https://pic.imgdb.cn/item/6677f829d9c307b7e9d32edf.png" alt="8a85fcc7257c4b34890002090a7f007e.png"></p>
<h5 id="Ⅲ-Tensor所在设备"><a href="#Ⅲ-Tensor所在设备" class="headerlink" title="Ⅲ Tensor所在设备"></a>Ⅲ Tensor所在设备</h5><p><img src="https://pic.imgdb.cn/item/6677f871d9c307b7e9d3c2a0.png" alt="64d489edcf384fbc81c0e9942725fecf.png"></p>
<p>如图所示，我们可以看到每种类型的数据都有一个CPU和一个GPU版本，因此我们对张量进行处理的时候需要指定一个设备，它要么是CPU要么是GPU，这是数据被分配的位置，这决定了给定张量的张量计算位置。</p>
<p>Pytorch支持多种设备的使用，我们可以用<code>torch.device</code>来创建一个设备，并指定索引，例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">device=torch.device(<span class="string">&#x27;cuda:0&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>输出结果为：<code>device(type=‘cuda’,index=0)</code>，可看到类型为’cuda’，即GPU，索引0表示为第一个GPU。</p>
<p>[<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_29923461/article/details/121400160?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171910922016800227421466%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=171910922016800227421466&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-5-121400160-null-null.142^v100^control&amp;utm_term=pytorch%20tensor&amp;spm=1018.2226.3001.4187">参考链接</a>]、[<a target="_blank" rel="noopener" href="https://blog.csdn.net/xu1129005165/article/details/130727373?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171910922016800227421466%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=171910922016800227421466&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-4-130727373-null-null.142^v100^control&amp;utm_term=pytorch%20tensor&amp;spm=1018.2226.3001.4187">参考链接</a>]。</p>
<h4 id="2-2-2-Tensor创建"><a href="#2-2-2-Tensor创建" class="headerlink" title="2.2.2 Tensor创建"></a>2.2.2 Tensor创建</h4><h5 id="Ⅰ-直接创建Tensor"><a href="#Ⅰ-直接创建Tensor" class="headerlink" title="Ⅰ 直接创建Tensor"></a>Ⅰ 直接创建Tensor</h5><p>直接创建Tensor的语法如下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">data：数据，可以是list, numpy</span></span><br><span class="line"><span class="string">dtype：数据类型，默认与data对应</span></span><br><span class="line"><span class="string">device：张量所在的设备(cuda或cpu)</span></span><br><span class="line"><span class="string">requires_grad：是否需要梯度</span></span><br><span class="line"><span class="string">pin_memory：是否存于锁存内存</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">torch.tensor(data, dtype=<span class="literal">None</span>, device=<span class="literal">None</span>, requires_grad=<span class="literal">False</span>, pin_memory=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意：pin_memory就是锁页内存，创建DataLoader时，设置pin_memory=True，</span></span><br><span class="line"><span class="comment"># 则意味着生成的Tensor数据最开始是属于内存中的锁页内存，这样将内存的Tensor</span></span><br><span class="line"><span class="comment"># 转义到GPU的显存就会更快一些。</span></span><br></pre></td></tr></table></figure>
<p>示例1：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">arr = np.ones((<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[1. 1. 1.]</span></span><br><span class="line"><span class="comment">#  [1. 1. 1.]</span></span><br><span class="line"><span class="comment">#  [1. 1. 1.]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ndarray的数据类型： float64</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ndarray的数据类型：&quot;</span>, arr.dtype)</span><br><span class="line"></span><br><span class="line">t= torch.tensor(arr)</span><br><span class="line"><span class="built_in">print</span>(t)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">tensor([[1., 1., 1.],</span></span><br><span class="line"><span class="string">        [1., 1., 1.],</span></span><br><span class="line"><span class="string">        [1., 1., 1.]], dtype=torch.float64)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>如需创建一个放在GPU的数据，则可做如下修改，运行结果同上。 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">device= torch.device(<span class="string">&quot;cuda&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&#x27;cpu&#x27;</span>)</span><br><span class="line">arr = np.ones((<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ndarray的数据类型：&quot;</span>, arr.dtype)</span><br><span class="line">t = torch.tensor(arr, device=device)</span><br><span class="line"><span class="built_in">print</span>(t)</span><br></pre></td></tr></table></figure>
<h5 id="Ⅱ-从Numpy中创建"><a href="#Ⅱ-从Numpy中创建" class="headerlink" title="Ⅱ 从Numpy中创建"></a>Ⅱ 从Numpy中创建</h5><ul>
<li><code>torch.from_numpy()</code>是PyTorch提供的一个便捷函数，用于将NumPy数组转换为PyTorch张量。该函数在内部使用了NumPy的C接口，所以它保留了NumPy数组的形状和数据类型[<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41813454/article/details/129838551">参考链接-CSDN博客</a>]。<ul>
<li><strong>数据类型</strong>：<code>torch.from_numpy()</code>会保留NumPy数组的数据类型。如果NumPy数组是浮点数类型，转换后的张量也将是浮点数类型。</li>
<li><strong>不可变数据类型</strong>：通过<code>torch.from_numpy()</code>创建的张量默认是不可变的，这意味着你不能直接修改其内容。如果你需要修改张量，可以通过<code>.clone()</code>方法创建一个副本。</li>
<li><strong>内存共享</strong>：<code>torch.from_numpy()</code>创建的张量和原始NumPy数组共享相同的内存。这意味着对张量的修改将影响原始数组，反之亦然。如果你不希望共享内存，可以使用<code>.clone()</code>方法。</li>
</ul>
</li>
<li><code>torch.Tensor</code>是默认的tensor类型(torch.FloatTensor)的简称，它是一个类，也就是说使用它只能创建torch.FloatTensot类型</li>
<li><code>torch.tensor</code>是一个函数/方法，它根据参数data创建Tensor，Tensor类型根据数据进行推断，也就是说当我们没有指定dtype使用它创建的类型和data一致，</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">numpy_array= np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">torch_tensor1 = torch.from_numpy(numpy_array)</span><br><span class="line">torch_tensor2 = torch.Tensor(numpy_array) <span class="comment"># 实例化一个Tensor类的对象</span></span><br><span class="line">torch_tensor3 = torch.tensor(numpy_array) <span class="comment"># 函数返回一个Tensor数据</span></span><br></pre></td></tr></table></figure>
<p>在PyTorch中，<code>torch.Tensor</code>是主要的<strong>tensor类</strong>，所有的tensor都是<code>torch.Tensor</code>的实例。<code>torch.Tensor</code>是<code>torch.FloatTensor</code>的别名。  而<code>torch.tensor</code>是一个<strong>函数</strong>，返回的是一个tensor。</p>
<blockquote>
<p>区别1：</p>
<ul>
<li>torch.Tensor(data)：将输入的data转化torch.FloatTensor；</li>
<li>torch.tensor(data)：(当你未指定dype的类型时)将data转化为torch.FloatTensor、torch.LongTensor、torch.DoubleTensor等类型，转化类型依据于data的类型或者dtype的值；</li>
</ul>
<p>区别2：</p>
<ul>
<li>使用如下语句：<code>tensor_without_data = torch.Tensor()</code> 可以创建一个空的FloatTensor；</li>
<li>而当你使用<code>tensor_without_data = torch.tensor()</code>时候则会报错。</li>
</ul>
<p>[<a target="_blank" rel="noopener" href="https://blog.csdn.net/Edisonleeee/article/details/90171442?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7EPaidSort-1-90171442-blog-135943835.235%5Ev43%5Epc_blog_bottom_relevance_base9&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7EPaidSort-1-90171442-blog-135943835.235%5Ev43%5Epc_blog_bottom_relevance_base9&amp;utm_relevant_index=1">参考链接</a>]</p>
</blockquote>
<h5 id="Ⅲ-从Python内置类型中创建"><a href="#Ⅲ-从Python内置类型中创建" class="headerlink" title="Ⅲ 从Python内置类型中创建"></a>Ⅲ 从Python内置类型中创建</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">torch_tensor1 = torch.tensor(a)</span><br><span class="line">a1 = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">torch_tensor2  = torch.tensor(a1)</span><br></pre></td></tr></table></figure>
<h5 id="Ⅳ-其他方式"><a href="#Ⅳ-其他方式" class="headerlink" title="Ⅳ 其他方式"></a>Ⅳ 其他方式</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建相同元素的Tensor</span></span><br><span class="line">torch_tensor1  = torch.full([<span class="number">2</span>,<span class="number">3</span>],<span class="number">2</span>)</span><br><span class="line"><span class="comment"># 创建全为1的Tensor</span></span><br><span class="line">torch_tensor2 = torch.ones([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="comment"># 创建全为0的Tensor</span></span><br><span class="line">torch_tensor3 = torch.zeors([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="comment"># 创建对角阵的Tensor</span></span><br><span class="line">torch_tensor4  = torch.eye(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 在区间[1,10]中随机创建Tensor</span></span><br><span class="line">torch_tensor5 = torch.randint(<span class="number">1</span>,<span class="number">10</span>,[<span class="number">2</span>,<span class="number">2</span>])</span><br><span class="line"><span class="comment"># 等等...</span></span><br></pre></td></tr></table></figure>
<p>创建Tensor时候也可指定数据类型和所存储的设备</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">torch_tensor= torch.zeros([<span class="number">2</span>,<span class="number">3</span>],dtype=torch.float64,device=torch.device(<span class="string">&#x27;cuda:0&#x27;</span>))</span><br><span class="line">torch_tensor.dtype <span class="comment">#torch.float64</span></span><br><span class="line">torch_tensor.device <span class="comment">#cuda:0</span></span><br><span class="line">torch_tensor.is_cuda <span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<h4 id="2-2-3-Tensor加速"><a href="#2-2-3-Tensor加速" class="headerlink" title="2.2.3 Tensor加速"></a>2.2.3 Tensor加速</h4><p>我们可以使用以下两种方式使得Tensor在GPU上加速。</p>
<p>第一种方式是定义cuda数据类型。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dtype = torch.cuda.FloatTensor</span><br><span class="line">gpu_tensor = torch.randn(<span class="number">1</span>,<span class="number">2</span>).<span class="built_in">type</span>(dtype) <span class="comment">#把Tensor转换为cuda数据类型</span></span><br></pre></td></tr></table></figure>
<p>第二种方式是直接将Tensor放到GPU上(推荐)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpu_tensor = torch.randn(<span class="number">1</span>,<span class="number">2</span>).cuda(<span class="number">0</span>)<span class="comment">#把Tensor直接放在第一个GPU上</span></span><br><span class="line">gpu_tensor = torch.randn(<span class="number">1</span>,<span class="number">2</span>).cuda(<span class="number">1</span>)<span class="comment">#把Tensor直接放在第二个GPU上</span></span><br></pre></td></tr></table></figure>
<p>而将Tensor放在CPU上也很简单。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cpu_tensor = gpu_tensor.cpu()</span><br></pre></td></tr></table></figure>
<h4 id="2-2-4-查看Tensor属性"><a href="#2-2-4-查看Tensor属性" class="headerlink" title="2.2.4 查看Tensor属性"></a>2.2.4 查看Tensor属性</h4><h5 id="Ⅰ-查看Tensor类型属性"><a href="#Ⅰ-查看Tensor类型属性" class="headerlink" title="Ⅰ 查看Tensor类型属性"></a>Ⅰ 查看Tensor类型属性</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tensor1 = torch.ones([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">tensor1.dtype <span class="comment"># torch.float32</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅱ-查看Tensor尺寸属性"><a href="#Ⅱ-查看Tensor尺寸属性" class="headerlink" title="Ⅱ 查看Tensor尺寸属性"></a>Ⅱ 查看Tensor尺寸属性</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tensor1.shape <span class="comment"># 尺寸</span></span><br><span class="line">tenosr1.ndim <span class="comment">#维度</span></span><br></pre></td></tr></table></figure>
<p>关于Tensor的形状对应</p>
<p>在python中，会有标量，向量，矩阵等的区分。但在PyTorch中，这些统称为张量tensor，只是维度不同而已。</p>
<ul>
<li>标量就是0维张量，只有一个数字，没有维度。</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/66780640d9c307b7e9ecbb31.png" alt="image.png" style="zoom:50%"></p>
<ul>
<li>向量就是1维张量，是有顺序的数字，但没有“行”或“列”的区分。</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/667806f9d9c307b7e9edf7f5.png" alt="image.png" style="zoom:60%"></p>
<ul>
<li>矩阵就是2维张量，有形状，行和列。</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/667807dad9c307b7e9ef8f1b.png" alt="image.png" style="zoom:60%"></p>
<ul>
<li>3维张量</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/66780b34d9c307b7e9f57e7b.png" alt="image.png" style="zoom:60%"></p>
<blockquote>
<p><strong>注：3维张量的大小输出为torch.Size(C=3, H=28, W=28)可以理解为：</strong></p>
<p>1张C=3(RGB)通道的28*28的图片。</p>
</blockquote>
<ul>
<li>4维张量</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/66782071d9c307b7e9220dbc.png" alt="image.png"></p>
<blockquote>
<p><strong>注：4维张量的大小输出为torch.Size(N=2, C=3, H=28, W=28)可以理解为：</strong></p>
<p>N=2张C=3(RGB)通道的28*28的图片。</p>
</blockquote>
<h5 id="Ⅲ-查看Tensor是否存储在GPU上"><a href="#Ⅲ-查看Tensor是否存储在GPU上" class="headerlink" title="Ⅲ 查看Tensor是否存储在GPU上"></a>Ⅲ 查看Tensor是否存储在GPU上</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tensor1.is_cuda <span class="comment">#False</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅳ-查看Tensor存储设备"><a href="#Ⅳ-查看Tensor存储设备" class="headerlink" title="Ⅳ 查看Tensor存储设备"></a>Ⅳ 查看Tensor存储设备</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tensor1.device <span class="comment"># cpu</span></span><br><span class="line">tensor1.cuda(<span class="number">0</span>)</span><br><span class="line">tensor1.device <span class="comment"># cuda:0</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅴ-查看Tensor梯度计算"><a href="#Ⅴ-查看Tensor梯度计算" class="headerlink" title="Ⅴ 查看Tensor梯度计算"></a>Ⅴ 查看Tensor梯度计算</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tensor1.grad</span><br></pre></td></tr></table></figure>
<h4 id="2-2-5-Tensor操作"><a href="#2-2-5-Tensor操作" class="headerlink" title="2.2.5 Tensor操作"></a>2.2.5 Tensor操作</h4><h5 id="Ⅰ-形状重置"><a href="#Ⅰ-形状重置" class="headerlink" title="Ⅰ 形状重置"></a>Ⅰ 形状重置</h5><p>Tensor的shape可通过<code>torch.reshape</code>接口来改变。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">Tensor =torch.tensor([[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">                        [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]],</span><br><span class="line">                      [[<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">                        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>]],</span><br><span class="line">                      [[<span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>],</span><br><span class="line">                        [<span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>]]])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;the shape of Tensor:&quot;</span>, Tensor.shape)</span><br><span class="line"><span class="comment"># the shape of Tensor: torch.Size([3, 2, 5])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 利用reshape改变形状</span></span><br><span class="line">reshape_Tensor = torch.reshape(Tensor, [<span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;After reshape:\n&quot;</span>, reshape_Tensor)</span><br><span class="line"><span class="comment"># tensor([[[ 1,  2,  3],</span></span><br><span class="line"><span class="comment">#           [ 4,  5,  6],</span></span><br><span class="line"><span class="comment">#           [ 7,  8,  9],</span></span><br><span class="line"><span class="comment">#           [10, 11, 12],</span></span><br><span class="line"><span class="comment">#           [13, 14, 15]],</span></span><br><span class="line"><span class="comment">#  </span></span><br><span class="line"><span class="comment">#          [[16, 17, 18],</span></span><br><span class="line"><span class="comment">#           [19, 20, 21],</span></span><br><span class="line"><span class="comment">#           [22, 23, 24],</span></span><br><span class="line"><span class="comment">#           [25, 26, 27],</span></span><br><span class="line"><span class="comment">#           [28, 29, 30]]])</span></span><br></pre></td></tr></table></figure>
<p>在指定新的shape时存在一些技巧：</p>
<ul>
<li>-1 表示这个维度的值是从Tensor的元素总数和剩余维度自动推断出来的。因此，有且只有一个维度可以被设置为-1。</li>
<li>0 表示该维度的元素数量与原值相同，因此shape中0的索引值必须小于Tensor的维度（索引值从 0 开始计，如第 1 维的索引值是 0，第二维的索引值是 1）。</li>
</ul>
<h5 id="Ⅱ-索引和切片"><a href="#Ⅱ-索引和切片" class="headerlink" title="Ⅱ 索引和切片"></a>Ⅱ 索引和切片</h5><p>通过索引或切片方式可访问或修改Tensor。</p>
<p><strong>(1) 访问Tensor</strong> </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">ndim_2_Tensor = torch.tensor([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">                               [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>],</span><br><span class="line">                               [<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Origin Tensor:\n&quot;</span>, ndim_2_Tensor.numpy())</span><br><span class="line"><span class="comment"># Origin Tensor:</span></span><br><span class="line"><span class="comment">#  [[ 0  1  2  3]</span></span><br><span class="line"><span class="comment">#   [ 4  5  6  7]</span></span><br><span class="line"><span class="comment">#   [ 8  9 10 11]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#索引或切片的第一个值对应第 0 维，第二个值对应第 1 维，</span></span><br><span class="line"><span class="comment">#依次类推，如果某个维度上未指定索引，则默认为 :</span></span><br><span class="line"><span class="comment">#所以下面两种操作结果一样</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;First row:&quot;</span>, ndim_2_Tensor[<span class="number">0</span>].numpy())</span><br><span class="line"><span class="comment"># First row: [0 1 2 3]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;First row:&quot;</span>, ndim_2_Tensor[<span class="number">0</span>, :].numpy())</span><br><span class="line"><span class="comment"># First row: [0 1 2 3]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;First column:&quot;</span>, ndim_2_Tensor[:, <span class="number">0</span>].numpy())</span><br><span class="line"><span class="comment"># First column: [0 4 8]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Last column:&quot;</span>, ndim_2_Tensor[:, -<span class="number">1</span>].numpy())</span><br><span class="line"><span class="comment"># Last column: [ 3  7 11]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;All element:\n&quot;</span>, ndim_2_Tensor[:].numpy())</span><br><span class="line"><span class="comment"># All element:</span></span><br><span class="line"><span class="comment">#  [[ 0  1  2  3]</span></span><br><span class="line"><span class="comment">#   [ 4  5  6  7]</span></span><br><span class="line"><span class="comment">#   [ 8  9 10 11]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;First row and second column:&quot;</span>, ndim_2_Tensor[<span class="number">0</span>, <span class="number">1</span>].numpy())</span><br><span class="line"><span class="comment"># First row and second column: 1</span></span><br></pre></td></tr></table></figure>
<p><strong>(2) 修改Tensor</strong></p>
<p>与访问张量类似，可以在单个或多个轴上通过索引或切片操作来修改张量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">ndim_2_Tensor = torch.ones([<span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">ndim_2_Tensor = ndim_2_Tensor.to(torch.float32)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Origin Tensor:\n &#x27;</span>, ndim_2_Tensor)</span><br><span class="line"><span class="comment"># Origin Tensor:</span></span><br><span class="line"><span class="comment">#   tensor([[1., 1., 1.],</span></span><br><span class="line"><span class="comment">#          [1., 1., 1.]])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改第1维为0</span></span><br><span class="line">ndim_2_Tensor[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;change Tensor1:\n &#x27;</span>, ndim_2_Tensor)</span><br><span class="line"><span class="comment"># change Tensor1:</span></span><br><span class="line"><span class="comment">#   tensor([[0., 0., 0.],</span></span><br><span class="line"><span class="comment">#          [1., 1., 1.]])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改第1维为2.1</span></span><br><span class="line">ndim_2_Tensor[<span class="number">0</span>:<span class="number">1</span>] = <span class="number">2.1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;change Tensor2:\n &#x27;</span>, ndim_2_Tensor)</span><br><span class="line"><span class="comment"># change Tensor2:</span></span><br><span class="line"><span class="comment">#   tensor([[2.1000, 2.1000, 2.1000],</span></span><br><span class="line"><span class="comment">#          [1.0000, 1.0000, 1.0000]])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改全部Tensor</span></span><br><span class="line">ndim_2_Tensor[...] = <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;change Tensor3:\n &#x27;</span>, ndim_2_Tensor)</span><br><span class="line"><span class="comment">#change Tensor3:</span></span><br><span class="line"><span class="comment">#   tensor([[3., 3., 3.],</span></span><br><span class="line"><span class="comment">#         [3., 3., 3.]])</span></span><br></pre></td></tr></table></figure>
<h5 id="Ⅲ-Tensor运算"><a href="#Ⅲ-Tensor运算" class="headerlink" title="Ⅲ Tensor运算"></a>Ⅲ Tensor运算</h5><p>张量支持包括基础数学运算、逻辑运算、矩阵运算等100余种运算操作。</p>
<p><strong>(1) 数学运算</strong> </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">x.<span class="built_in">abs</span>()                       <span class="comment"># 逐元素取绝对值</span></span><br><span class="line">x.ceil()                      <span class="comment"># 逐元素向上取整</span></span><br><span class="line">x.floor()                     <span class="comment"># 逐元素向下取整</span></span><br><span class="line">x.<span class="built_in">round</span>()                     <span class="comment"># 逐元素四舍五入</span></span><br><span class="line">x.exp()                       <span class="comment"># 逐元素计算自然常数为底的指数</span></span><br><span class="line">x.log()                       <span class="comment"># 逐元素计算x的自然对数</span></span><br><span class="line">x.reciprocal()                <span class="comment"># 逐元素求倒数</span></span><br><span class="line">x.square()                    <span class="comment"># 逐元素计算平方</span></span><br><span class="line">x.sqrt()                      <span class="comment"># 逐元素计算平方根</span></span><br><span class="line">x.sin()                       <span class="comment"># 逐元素计算正弦</span></span><br><span class="line">x.cos()                       <span class="comment"># 逐元素计算余弦</span></span><br><span class="line">x.add(y)                      <span class="comment"># 逐元素加</span></span><br><span class="line">x.subtract(y)                 <span class="comment"># 逐元素减</span></span><br><span class="line">x.multiply(y)                 <span class="comment"># 逐元素乘（积）</span></span><br><span class="line">x.divide(y)                   <span class="comment"># 逐元素除</span></span><br><span class="line">x.mod(y)                      <span class="comment"># 逐元素除并取余</span></span><br><span class="line">x.<span class="built_in">pow</span>(y)                      <span class="comment"># 逐元素幂</span></span><br><span class="line">x.<span class="built_in">max</span>()                       <span class="comment"># 指定维度上元素最大值，默认为全部维度</span></span><br><span class="line">x.<span class="built_in">min</span>()                       <span class="comment"># 指定维度上元素最小值，默认为全部维度</span></span><br><span class="line">x.prod()                      <span class="comment"># 指定维度上元素累乘，默认为全部维度</span></span><br><span class="line">x.<span class="built_in">sum</span>()                       <span class="comment"># 指定维度上元素的和，默认为全部维度</span></span><br></pre></td></tr></table></figure>
<p><strong>(2) 逻辑运算</strong> </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x.isfinite()                  <span class="comment"># 判断Tensor中元素是否是有限的数字，即不包括inf与nan</span></span><br><span class="line">x.equal_all(y)                <span class="comment"># 判断两个Tensor的全部元素是否相等，并返回形状为[1]的布尔类Tensor</span></span><br><span class="line">x.equal(y)                    <span class="comment"># 判断两个Tensor的每个元素是否相等，并返回形状相同的布尔类Tensor</span></span><br><span class="line">x.not_equal(y)                <span class="comment"># 判断两个Tensor的每个元素是否不相等</span></span><br><span class="line">x.less_than(y)                <span class="comment"># 判断Tensor x的元素是否小于Tensor y的对应元素</span></span><br><span class="line">x.less_equal(y)               <span class="comment"># 判断Tensor x的元素是否小于或等于Tensor y的对应元素</span></span><br><span class="line">x.greater_than(y)             <span class="comment"># 判断Tensor x的元素是否大于Tensor y的对应元素</span></span><br><span class="line">x.greater_equal(y)            <span class="comment"># 判断Tensor x的元素是否大于或等于Tensor y的对应元素</span></span><br><span class="line">x.allclose(y)                 <span class="comment"># 判断两个Tensor的全部元素是否接近</span></span><br></pre></td></tr></table></figure>
<p><strong>(3) 矩阵运算</strong> </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x.t()                         <span class="comment"># 矩阵转置</span></span><br><span class="line">x.transpose([<span class="number">1</span>, <span class="number">0</span>])           <span class="comment"># 交换第 0 维与第 1 维的顺序</span></span><br><span class="line">x.norm(<span class="string">&#x27;fro&#x27;</span>)                 <span class="comment"># 矩阵的弗罗贝尼乌斯范数</span></span><br><span class="line">x.dist(y, p=<span class="number">2</span>)                <span class="comment"># 矩阵（x-y）的2范数</span></span><br><span class="line">x.matmul(y)                   <span class="comment"># 矩阵乘法</span></span><br></pre></td></tr></table></figure>
<p>2.2.6 Tensor的广播机制[<a target="_blank" rel="noopener" href="https://blog.csdn.net/xu1129005165/article/details/130727373?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171910922016800227421466%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=171910922016800227421466&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-4-130727373-null-null.142^v100^control&amp;utm_term=pytorch%20tensor&amp;spm=1018.2226.3001.4187">参考</a>]</p>
<p><img src="https://pic.imgdb.cn/item/667824b7d9c307b7e92b4c85.png" alt="229f2794d5af4d97ab0a37412bdc5531.png"></p>
<h3 id="2-3-Pandas学习"><a href="#2-3-Pandas学习" class="headerlink" title="2.3 Pandas学习"></a>2.3 Pandas学习</h3><div class="bvideo">
    <a href="//www.bilibili.com/video/BV1hP41197we" target="_blank">
        <div class="bvideo-box">
            <div class="bvideo-cover">
                <div class="cover-default"></div>
                <div class="bvideo-cover-layer" style="background-image:url(https://images.weserv.nl/?url=http://i2.hdslb.com/bfs/archive/c789e63c8da8240c34efb235d3ee69d8bf5391d3.jpg)">
                    <i class="icon-video"></i>
                </div>
                <span class="duration">00:55:14</span>
            </div>
            <div class="bvideo-info">
                <p class="title">Python深度学习：Pandas标签库</p>
                <p class="card-status">
                    <span class="play-num">
                        <i class="fa fa-youtube-play"></i>
                        <span>2.3万</span></span>
                    <span>
                        <i class="fa fa-list-alt"></i>
                        <span>117</span></span></p>
                <div class="partition">
                    <label class="card-label">视频</label>
                    <label class="up-label"></label>
                    <label class="up-name">爆肝杰哥</label>
                </div>
                <div class="actions hide"></div>
            </div>
        </div>
    </a>
</div>
<h4 id="2-3-1-对象的创建"><a href="#2-3-1-对象的创建" class="headerlink" title="2.3.1 对象的创建"></a>2.3.1 对象的创建</h4><p>导入Pandas时，通常给其一个别名“pd”，即 <code>import pandas as pd</code>。</p>
<p>作为标签库，Pandas对象在NumPy数组基础上给予其行列标签。可以说：</p>
<p><img src="https://pic.imgdb.cn/item/667826b1d9c307b7e92fb32c.png" alt="image.png" style="zoom:60%"></p>
<p>Pandas中，所有数组特性仍在，Pandas的数据以NumPy数组的方式存储。</p>
<h5 id="Ⅰ-一维对象的创建"><a href="#Ⅰ-一维对象的创建" class="headerlink" title="Ⅰ 一维对象的创建"></a>Ⅰ 一维对象的创建</h5><p><strong>(1) 字典创建法</strong></p>
<p>NumPy中，可以通过<code>np.array()</code>函数，将Python列表转化为NumPy数组；同样，Pandas中，可以通过 <code>pd.Series()</code>函数，将Python字典转化为 Series 对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建字典</span></span><br><span class="line">dict_v = &#123; <span class="string">&#x27;a&#x27;</span>:<span class="number">0</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">0.25</span>, <span class="string">&#x27;c&#x27;</span>:<span class="number">0.5</span>, <span class="string">&#x27;d&#x27;</span>:<span class="number">0.75</span>, <span class="string">&#x27;e&#x27;</span>:<span class="number">1</span> &#125;</span><br><span class="line"><span class="comment"># 用字典创建Pandas对象</span></span><br><span class="line">sr= pd.Series( dict_v)</span><br><span class="line"><span class="built_in">print</span>(sr)</span><br><span class="line"><span class="comment"># a    0.00</span></span><br><span class="line"><span class="comment"># b    0.25</span></span><br><span class="line"><span class="comment"># c    0.50</span></span><br><span class="line"><span class="comment"># d    0.75</span></span><br><span class="line"><span class="comment"># e    1.00</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>
<p><strong>(2) 数组创建法</strong><br>最直接的创建方法即直接给<code>pd.Series()</code>函数参数，其需要两个参数：</p>
<ul>
<li>第一个参数是值 values(<strong>列表、数组、张量</strong>均可)，</li>
<li>第二个参数是键index(索引)。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用列表创建对象</span></span><br><span class="line">v = [<span class="number">0</span>, <span class="number">0.25</span>,<span class="number">0.5</span>,<span class="number">0.75</span>,<span class="number">1</span>]</span><br><span class="line">k = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>]</span><br><span class="line"><span class="comment"># 键值创建法</span></span><br><span class="line">sr = pd.Series(v , index=k)</span><br><span class="line"><span class="built_in">print</span>(sr)</span><br><span class="line"><span class="comment"># a    0.00</span></span><br><span class="line"><span class="comment"># b    0.25</span></span><br><span class="line"><span class="comment"># c    0.50</span></span><br><span class="line"><span class="comment"># d    0.75</span></span><br><span class="line"><span class="comment"># e    1.00</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>
<p>其中，参数index可以省略，省略后索引即从0开始的顺序数字。</p>
<h5 id="Ⅱ-一维对象的属性"><a href="#Ⅱ-一维对象的属性" class="headerlink" title="Ⅱ 一维对象的属性"></a>Ⅱ 一维对象的属性</h5><p>Series 对象有两个属性：values与index。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用数组创建 sr</span></span><br><span class="line">v = np.array([<span class="number">53</span>,<span class="number">64</span>,<span class="number">72</span>,<span class="number">82</span>])</span><br><span class="line">k = [<span class="string">&#x27;1号&#x27;</span>, <span class="string">&#x27;2号&#x27;</span>, <span class="string">&#x27;3号&#x27;</span>,<span class="string">&#x27;4号&#x27;</span>]</span><br><span class="line">sr = pd.Series(v, index=k)</span><br><span class="line"><span class="built_in">print</span>(sr.values)</span><br><span class="line"><span class="comment"># [53 64 72 82]</span></span><br><span class="line"><span class="built_in">print</span>(sr.index)</span><br><span class="line"><span class="comment"># Index([&#x27;1号&#x27;, &#x27;2号&#x27;, &#x27;3号&#x27;, &#x27;4号&#x27;], dtype=&#x27;object&#x27;)     </span></span><br></pre></td></tr></table></figure>
<p>事实上，无论是用列表、数组还是张量来创建对象，最终values均为数组。</p>
<p>可见，虽然Pandas对象的第一个参数values可以传入列表、数组与张量，但传进去后默认的存储方式是 NumPy数组。这一点更加提醒我们，<strong>Pandas是建立在 NumPy基础上的库</strong>，没有NumPy数组库就没有Pandas数据处理库。<strong>当想要 Pandas 退化为 NumPy 时，查看其 values 属性即可</strong>。</p>
<h5 id="Ⅲ-二维对象的创建"><a href="#Ⅲ-二维对象的创建" class="headerlink" title="Ⅲ 二维对象的创建"></a>Ⅲ 二维对象的创建</h5><p>二维对象将面向矩阵，其不仅有行标签index，还有列标签columns。</p>
<p><strong>(1) 字典创建法</strong></p>
<p>用字典法创建二维对象时，必须基于多个Series对象，每一个Series 就是一列数据，相当于对一列一列的数据作拼接。</p>
<ul>
<li>创建 Series对象时，字典的键是index，其延展方向是竖直方向；</li>
<li>创建 DataFrame 对象时，字典的键是columns，其延展方向是水平方向。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建sr1:各个病人的年龄</span></span><br><span class="line">v1 = [<span class="number">53</span>, <span class="number">64</span>, <span class="number">72</span>, <span class="number">82</span> ]</span><br><span class="line">i = [<span class="string">&#x27;1号&#x27;</span>, <span class="string">&#x27;2号&#x27;</span>, <span class="string">&#x27;3号&#x27;</span>, <span class="string">&#x27;4号&#x27;</span>]</span><br><span class="line">sr1 = pd.Series( v1,index=i )</span><br><span class="line"><span class="built_in">print</span>(sr1)</span><br><span class="line"><span class="comment"># 1号    53</span></span><br><span class="line"><span class="comment"># 2号    64</span></span><br><span class="line"><span class="comment"># 3号    72</span></span><br><span class="line"><span class="comment"># 4号    82</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建sr2:各个病人的性别</span></span><br><span class="line">v2 =[<span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>]</span><br><span class="line">i = [<span class="string">&#x27;1号&#x27;</span>, <span class="string">&#x27;2号&#x27;</span>, <span class="string">&#x27;3号&#x27;</span>, <span class="string">&#x27;6号&#x27;</span>]</span><br><span class="line">sr2 = pd.Series(v2, index=i)</span><br><span class="line"><span class="built_in">print</span>(sr2)</span><br><span class="line"><span class="comment"># 1号    女</span></span><br><span class="line"><span class="comment"># 2号    男</span></span><br><span class="line"><span class="comment"># 3号    男</span></span><br><span class="line"><span class="comment"># 4号    女</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建df对象</span></span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">&#x27;年龄&#x27;</span>:sr1,<span class="string">&#x27;性别&#x27;</span>:sr2&#125;)</span><br><span class="line"><span class="built_in">print</span>(df)</span><br><span class="line"><span class="comment">#     年龄 性别</span></span><br><span class="line"><span class="comment"># 1号  53  女</span></span><br><span class="line"><span class="comment"># 2号  64  男</span></span><br><span class="line"><span class="comment"># 3号  72  男</span></span><br><span class="line"><span class="comment"># 4号  82  女</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在做大数据处理的时候，大数据表格一般都长成上述代码中的df那样：列代表不同的特征，行代表不同的个体(采样)</p>
</blockquote>
<p>如果 sr1 和 sr2 的 index 不完全一致，那么二维对象的 index 会取 sr1 与 sr2 的index的交集，相应的，该对象就会产生一定数量的缺失值(NaN)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建sr1:各个病人的年龄</span></span><br><span class="line">v1 = [<span class="number">53</span>, <span class="number">64</span>, <span class="number">72</span>, <span class="number">82</span> ]</span><br><span class="line">i = [<span class="string">&#x27;1号&#x27;</span>, <span class="string">&#x27;2号&#x27;</span>, <span class="string">&#x27;3号&#x27;</span>, <span class="string">&#x27;4号&#x27;</span>]</span><br><span class="line">sr1 = pd.Series( v1,index=i )</span><br><span class="line"><span class="built_in">print</span>(sr1)</span><br><span class="line"><span class="comment"># 1号    53</span></span><br><span class="line"><span class="comment"># 2号    64</span></span><br><span class="line"><span class="comment"># 3号    72</span></span><br><span class="line"><span class="comment"># 4号    82</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建sr2:各个病人的性别</span></span><br><span class="line">v2 =[<span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>]</span><br><span class="line">i = [<span class="string">&#x27;1号&#x27;</span>, <span class="string">&#x27;2号&#x27;</span>, <span class="string">&#x27;3号&#x27;</span>, <span class="string">&#x27;6号&#x27;</span>]</span><br><span class="line">sr2 = pd.Series(v2, index=i)</span><br><span class="line"><span class="built_in">print</span>(sr2)</span><br><span class="line"><span class="comment"># 1号    女</span></span><br><span class="line"><span class="comment"># 2号    男</span></span><br><span class="line"><span class="comment"># 3号    男</span></span><br><span class="line"><span class="comment"># 4号    女</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建df对象</span></span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">&#x27;年龄&#x27;</span>:sr1,<span class="string">&#x27;性别&#x27;</span>:sr2&#125;)</span><br><span class="line"><span class="built_in">print</span>(df)</span><br><span class="line"><span class="comment"># 年龄   性别</span></span><br><span class="line"><span class="comment"># 1号  53.0    女</span></span><br><span class="line"><span class="comment"># 2号  64.0    男</span></span><br><span class="line"><span class="comment"># 3号  72.0    男</span></span><br><span class="line"><span class="comment"># 4号  82.0  NaN</span></span><br><span class="line"><span class="comment"># 6号   NaN    女</span></span><br></pre></td></tr></table></figure>
<p><strong>(2) 数组创建法</strong></p>
<h3 id="2-4-matplotlib学习"><a href="#2-4-matplotlib学习" class="headerlink" title="2.4 matplotlib学习"></a>2.4 matplotlib学习</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt  <span class="comment"># python中画图所用到的第三方库</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1956-1920年对应的GDP值，单位亿元</span></span><br><span class="line">y = [<span class="number">1470.1</span>, <span class="number">1447.5</span>, <span class="number">1312.3</span>, <span class="number">1071.4</span>, <span class="number">1030.7</span>, <span class="number">911.6</span>, <span class="number">859.8</span>, <span class="number">824.4</span>, <span class="number">679.1</span>]  </span><br><span class="line"><span class="comment"># 1952-1960年</span></span><br><span class="line">x = [<span class="number">1960</span>, <span class="number">1959</span>, <span class="number">1958</span>, <span class="number">1957</span>, <span class="number">1956</span>, <span class="number">1955</span>, <span class="number">1954</span>, <span class="number">1953</span>, <span class="number">1952</span>]  </span><br><span class="line"></span><br><span class="line">plt.scatter(x, y)  <span class="comment"># 画点，将列表中的值分别画在plot中</span></span><br><span class="line">plt.plot(x, y, color=<span class="string">&#x27;r&#x27;</span>)  <span class="comment"># 连线，按顺序将</span></span><br><span class="line">plt.xlabel(<span class="string">&quot;year&quot;</span>)  <span class="comment"># 横轴的标签</span></span><br><span class="line">plt.ylabel(<span class="string">&quot;GDP/Billion&quot;</span>)  <span class="comment"># 纵轴的标签</span></span><br><span class="line">plt.title(<span class="string">&quot;Changes in China&#x27;s GDP since the founding of the PRC&quot;</span>)  <span class="comment"># 图像标头</span></span><br><span class="line">plt.show()  <span class="comment"># 相当于将图像显示出，必须要加上才能显示出图像</span></span><br></pre></td></tr></table></figure>
<p><img src="https://pic.imgdb.cn/item/6268bae1239250f7c5112e80.jpg" alt="显示结果" style="zoom:80%"></p>
<link rel="stylesheet" href="/css/bilicard.css" type="text/css"> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://junheng-wang.github.io/2022/04/25/Python-code-tips/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python%E5%9F%BA%E7%A1%80/" rel="tag">Python基础</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E5%86%99%E8%A7%84%E8%8C%83/" rel="tag">编写规范</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2022/04/26/Foundation-of-DeepLearning/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            深度学习_吴恩达_Part_1
          
        </div>
      </a>
    
    
      <a href="/2022/04/24/Foundation-of-Pytorch/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">Pytorch基础</div>
      </a>
    
  </nav>

   
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "0DieopImIy7vnuzj4jQ2wk6O-gzGzoHsz",
    app_key: "j6eRiYtlDSl8eRXVN54blF25",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "给我的文章加点评论吧~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2024
        <i class="ri-heart-fill heart_icon"></i> wjh
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Wang Junheng"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/Alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechatpay.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true,
  };
</script>

<!-- Katex -->
 
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
        <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"></script>
        
            <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.js"></script>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.css">
        
    
 
<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

</body>

</html>