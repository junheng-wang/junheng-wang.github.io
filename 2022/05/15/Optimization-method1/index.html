<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="���͡�ѧϰ�����˼�������С�����" />
       
      <meta name="description" content="���˺�����" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>最优化方法_Part1 |  Wang Junheng</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-Optimization-method1"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  最优化方法_Part1
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/05/15/Optimization-method1/" class="article-date">
  <time datetime="2022-05-15T00:36:01.000Z" itemprop="datePublished">2022-05-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E6%8F%90%E5%8D%87/">学习提升</a> / <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E6%8F%90%E5%8D%87/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/">数学基础</a> / <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E6%8F%90%E5%8D%87/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/%E6%9C%80%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95/">最优化方法</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">6.5k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">29 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <div class="bvideo">
    <a href="//www.bilibili.com/video/BV1m7411u72b" target="_blank">
        <div class="bvideo-box">
            <div class="bvideo-cover">
                <div class="cover-default"></div>
                <div class="bvideo-cover-layer" style="background-image:url(https://images.weserv.nl/?url=http://i2.hdslb.com/bfs/archive/1c52998c22ddf8d0088e8d58f0eb97f5553d5c16.jpg)">
                    <i class="icon-video"></i>
                </div>
                <span class="duration">01:20:50</span>
            </div>
            <div class="bvideo-info">
                <p class="title">最优化理论与方法-第一讲：最优化问题概述</p>
                <p class="card-status">
                    <span class="play-num">
                        <i class="fa fa-youtube-play"></i>
                        <span>14.3万</span></span>
                    <span>
                        <i class="fa fa-list-alt"></i>
                        <span>775</span></span></p>
                <div class="partition">
                    <label class="card-label">视频</label>
                    <label class="up-label"></label>
                    <label class="up-name">superfatseven</label>
                </div>
                <div class="actions hide"></div>
            </div>
        </div>
    </a>
</div>
<h3 id="第一讲-最优化问题概述"><a href="#第一讲-最优化问题概述" class="headerlink" title="第一讲 最优化问题概述"></a>第一讲 最优化问题概述</h3><h4 id="1-1-什么是最优化问题"><a href="#1-1-什么是最优化问题" class="headerlink" title="1.1 什么是最优化问题"></a>1.1 什么是最优化问题</h4><p>最优化问题是<strong>决策问题</strong>，选择一些可以执行的策略来使得目标最优，一个最优化问题包括：</p>
<ul>
<li>决策变量</li>
<li>一个或多个目标函数</li>
<li>一个由可行策略纽成的集合，可由等式或者不等式刻画</li>
</ul>
<h4 id="1-2-基本形式"><a href="#1-2-基本形式" class="headerlink" title="1.2 基本形式"></a>1.2 基本形式</h4><h5 id="一-视频中的形式"><a href="#一-视频中的形式" class="headerlink" title="(一) 视频中的形式"></a>(一) 视频中的形式</h5><script type="math/tex; mode=display">
\begin{cases}\text { min or max } & f(\boldsymbol x) \\ 
\text{ s.t.} & g_{i}(\boldsymbol x) \leq 0, \text{  } i=1, \cdots, m \\ 
& h_{i}(\boldsymbol x) = 0, \text{  } i=1, \cdots, l\end{cases}</script><p>其中，<script type="math/tex">\boldsymbol x = (x_1, x_2, \cdots, x_n)^{\mathrm T} \in \boldsymbol X</script>是<strong>决策变量</strong>，$\boldsymbol X$表示给定的集合，比如<script type="math/tex">\mathbb{R}_+^n、 \mathbb{Z}n</script>等。</p>
<ul>
<li>$f(\boldsymbol x)$即目标函数，$g_i(\boldsymbol x) \leq 0, h_i(\boldsymbol x)=0$分别为不等式约束和等式约束</li>
<li>集合<script type="math/tex">\boldsymbol S = \begin{Bmatrix} \boldsymbol x \in X \mid g_{i}(\boldsymbol x) \leq 0, \text{  } i=1, \cdots, m,  h_{i}(\boldsymbol x) = 0, \text{  } i=1, \cdots, l \end{Bmatrix}</script>称为最优化问题的<strong>可行集(可行域)</strong></li>
</ul>
<h5 id="二-参考其他文献的形式"><a href="#二-参考其他文献的形式" class="headerlink" title="(二) 参考其他文献的形式"></a>(二) 参考其他文献的形式</h5><script type="math/tex; mode=display">
\begin{cases}\text { min } & f(\boldsymbol x) \\ 
\text{ s.t.} & \boldsymbol x \in \mathcal{X} \end{cases}</script><p>其中，$\boldsymbol x = (x_1, x_2, ··· , x_n)^{\mathrm T} ∈ \mathbb{R}^n ​$是<strong>决策变量</strong>，$f : \mathbb{R}^n → \mathbb{R}​$ 是<strong>目标函数</strong>，$\mathcal{X} ⊆ \mathbb{R}^n​$是<strong>约束集合或可行域</strong>，可行域包含的点称为<strong>可行解或可行点</strong>。记号 <code>s.t.</code>是 “subject to”的缩写，专指<strong>约束条件</strong>。当$\mathcal{X} = \mathbb{R}^n​$时，上式称为<strong>无约束优化问题</strong>。集合$\mathcal{X}​$通常可以由约束函数$c_i( \boldsymbol x): \mathbb{R}^n → \mathbb{R} ,i = 1, 2,··· ,m + l ​$表达为如下具体形式：</p>
<script type="math/tex; mode=display">
\begin{aligned}
\mathcal{X}=\left\{x \in \mathbb{R}^{n} \mid c_{i}(x) \leqslant 0,\right.& i=1,2, \cdots, m \\
c_{i}(x)=0, &i=m+1, m+2 \cdots, m+l\}
\end{aligned}</script><blockquote>
<p> 参考资料1：<a target="_blank" rel="noopener" href="https://bicmr.pku.edu.cn/~wenzw/optbook/opt1.pdf">课本——最优化：建模、算法与理论</a></p>
<p> 参考资料2：<a target="_blank" rel="noopener" href="https://blog.csdn.net/jbb0523/article/details/50596387">最优化问题简介 - jbb0523 - CSDN</a></p>
</blockquote>
<h4 id="1-3-最优化问题分类"><a href="#1-3-最优化问题分类" class="headerlink" title="1.3 最优化问题分类"></a>1.3 最优化问题分类</h4><h5 id="一-无约束优化-约束优化"><a href="#一-无约束优化-约束优化" class="headerlink" title="(一) 无约束优化/约束优化"></a>(一) 无约束优化/约束优化</h5><ul>
<li>无约束优化问题：没有约束条件<ul>
<li>常见求解方法：梯度下降法(最速下降法)、牛顿法、共轭梯度法等等</li>
</ul>
</li>
<li>约束优化问题：在一定约束条件下求解目标函数的<code>min OR max</code></li>
</ul>
<blockquote>
<p>易知，实际中最碰见的是约束优化问题，但是我们在课程中却要大量研究无约束优化问题，这个有两方面的原因：一是无约束优化问题求解相对简单；二是可以通过一定的变换将有约束转变为无约束优化。</p>
</blockquote>
<h5 id="二-线性-非线性优化"><a href="#二-线性-非线性优化" class="headerlink" title="(二) 线性/非线性优化"></a>(二) 线性/非线性优化</h5><ul>
<li>线性优化问题的一般形式</li>
</ul>
<script type="math/tex; mode=display">
\begin{cases}\text { min } & \boldsymbol{Cx} \\ 
\text{ s.t.} &  \boldsymbol{Ax = b}\end{cases}</script><p><strong>单纯形方法：</strong>在数学优化领域中常用于<strong>线性规划问题</strong>的数值求解。由线性规划问题的可行集的特征来决定的(线性规划最优解存在时，那么最优解一定存在与问题可行集的<strong>顶点位置</strong>)，单纯性方法就是关注这些顶点。</p>
<blockquote>
<p>参考资料：<a target="_blank" rel="noopener" href="https://oi-wiki.org/math/simplex/">单纯形算法</a></p>
</blockquote>
<ul>
<li>非线性优化(例子说明)：<strong>均值-方差模型</strong></li>
</ul>
<h5 id="三-连续优化-离散优化"><a href="#三-连续优化-离散优化" class="headerlink" title="(三) 连续优化/离散优化"></a>(三) 连续优化/离散优化</h5><ul>
<li>连续优化：$\boldsymbol x = (x_1, x_2, \cdots, x_n)^{\mathrm T} \in \boldsymbol X$中每一个$x_n$的取值是连续的</li>
<li>离散优化：$\boldsymbol x = (x_1, x_2, \cdots, x_n)^{\mathrm T} \in \boldsymbol X$中每一个$x_n$的取值是离散的，比如$0-1$规划</li>
</ul>
<h5 id="四-单目标优化-多目标优化"><a href="#四-单目标优化-多目标优化" class="headerlink" title="(四) 单目标优化/多目标优化"></a>(四) 单目标优化/多目标优化</h5><ul>
<li>单目标优化</li>
<li>多目标优化(均值-方差模型)常采用的办法：<ul>
<li>法1：转化为单目标，即可以将某些目标经过一定形式转化到约束条件中去。</li>
<li>法2：想办法将多个目标融合为单个目标</li>
</ul>
</li>
</ul>
<h5 id="五-动态规划"><a href="#五-动态规划" class="headerlink" title="(五) 动态规划"></a>(五) 动态规划</h5><h5 id="六-随机规划"><a href="#六-随机规划" class="headerlink" title="(六) 随机规划"></a>(六) 随机规划</h5><p>参数中有不确定系数的优化问题。</p>
<h5 id="七-鲁棒优化"><a href="#七-鲁棒优化" class="headerlink" title="(七) 鲁棒优化"></a>(七) 鲁棒优化</h5><h4 id="1-4-最优化方法主要讲解内容"><a href="#1-4-最优化方法主要讲解内容" class="headerlink" title="1.4 最优化方法主要讲解内容"></a>1.4 最优化方法主要讲解内容</h4><ul>
<li>凸优化理论：凸集，凸函数，凸优化问题；</li>
<li>无约束优化问题的算法；</li>
<li>约束优化的最优性条件及对偶理论；</li>
<li>线性规划、二次规划算法；</li>
<li>约束优化的罚函数方法；</li>
<li>优化软件：CVX，CPLEX</li>
</ul>
<h4 id="1-5-预备知识"><a href="#1-5-预备知识" class="headerlink" title="1.5 预备知识"></a>1.5 预备知识</h4><ul>
<li>向量、矩阵、二次型等知识；</li>
<li>微积分知识；</li>
<li>简单的概率知识。</li>
</ul>
<p>课后小问题：</p>
<ul>
<li>$n$元二次函数$f(\boldsymbol x)=\boldsymbol x^{\mathrm T} \boldsymbol H \boldsymbol x ＋\boldsymbol c^{\mathrm T} \boldsymbol x$,其中$\boldsymbol H$为$n$阶对称矩阵，$\boldsymbol c$为$n$维向量；给出$f(\boldsymbol x)$的梯度和hesse炬阵?</li>
<li>设随机向量服从联合正态分布：$\epsilon = (\epsilon_1, \epsilon_2, \cdots, \epsilon_n) \sim N(\mu, \sigma^2)$，令$η = x_1\epsilon_1 + \cdots + x_n\epsilon_n$，给出$η$的$c$分位数。</li>
</ul>
<h3 id="第二讲-凸集"><a href="#第二讲-凸集" class="headerlink" title="第二讲 凸集"></a>第二讲 凸集</h3><p>在最优化范畴里面，凸优化问题是一类常见的且性质很好的(很多时候可以帮助我们解决非凸优化问题)。</p>
<p>如果目标函数<script type="math/tex">f(\boldsymbol x)</script>是一个凸函数，可行集<script type="math/tex">\boldsymbol S</script>或者<script type="math/tex">\mathcal{X}</script>是凸集，通常来讲就是凸优化问题。</p>
<ul>
<li>为什么凸优化问题具有比较好的性质呢？<ul>
<li>例子1：一元最小化问题：<script type="math/tex">\text{min } f(x), \text{  s.t.  } x\in[a, b]</script></li>
</ul>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">凸函数</th>
<th style="text-align:center">非凸函数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://pic.imgdb.cn/item/6281062209475431293471f6.jpg"></td>
<td style="text-align:center"><img src="https://pic.imgdb.cn/item/6281064f0947543129351608.jpg"></td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><ul>
<li>例子2：二元最小化问题：<script type="math/tex">\text{min } f(x_1, x_2) = x_1^2 + x_2^2, \text{  s.t.  } x\in S</script></li>
</ul>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">凸集</th>
<th>非凸集</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://pic.imgdb.cn/item/6281115109475431295d3252.jpg" style="zoom:40%"></td>
<td><img src="https://pic.imgdb.cn/item/6281153d09475431296e05df.jpg"></td>
</tr>
<tr>
<td style="text-align:center">梯度：<script type="math/tex">- \bigtriangledown f(\boldsymbol x^*)</script></td>
<td>梯度：<script type="math/tex">- \bigtriangledown f(\boldsymbol x^*)</script></td>
</tr>
<tr>
<td style="text-align:center">优化问题等价为：<script type="math/tex">\theta > 90° \Leftrightarrow - \bigtriangledown f(\boldsymbol x^*) (\boldsymbol{x-x^*}) \leq 0, \forall \boldsymbol x \in S</script></td>
<td>优化问题等价为：<script type="math/tex">\theta > 90° \Leftrightarrow - \bigtriangledown f(\boldsymbol x^*) (\boldsymbol{x-x^*}) \leq 0, \forall \boldsymbol x \in S</script></td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p><strong>凸集：</strong>集合中的任意两点连线的点都在该集合中，则称该集合为凸集；凹集为非凸集。 </p>
</blockquote>
<h4 id="2-1-凸集的定义"><a href="#2-1-凸集的定义" class="headerlink" title="2.1 凸集的定义"></a>2.1 凸集的定义</h4><h5 id="一-凸集定义的数学表示"><a href="#一-凸集定义的数学表示" class="headerlink" title="(一) 凸集定义的数学表示"></a>(一) 凸集定义的数学表示</h5><p>凸集：对于任意的$x, y \in \boldsymbol C$与任意$\lambda \in [0,1]$，有</p>
<script type="math/tex; mode=display">
\lambda x + (1-\lambda)y \in \boldsymbol C</script><p>那么$\boldsymbol C$为凸集。凸集中任意两点连线的点都在该集合中。</p>
<p><img src="https://pic.imgdb.cn/item/62819d5909475431296cc326.jpg" style="zoom:60%"></p>
<ul>
<li><strong>推广表示方法：</strong></li>
</ul>
<script type="math/tex; mode=display">
\lambda_1 x_1 + \cdots + \lambda_k x_k \in  \boldsymbol C, \text{  }\forall x_1, \cdots, x_k \in \boldsymbol C</script><p>其中，$\lambda_i \geq 0, \lambda_1 + \cdots + \lambda_k = 1$。</p>
<h5 id="二-凸组合："><a href="#二-凸组合：" class="headerlink" title="(二) 凸组合："></a>(二) 凸组合：</h5><p>凸组合是指，假设$x_1, x_2, \cdots , x_n$是一组对象（要根据讨论问题的背景来确定），$\lambda_1, \lambda_2, \cdots, \lambda_k$是$k$个常数，并且满足$\lambda_i \geq 0, \lambda_1 + \cdots + \lambda_k = 1$，那么这些点的凸组合即一个这样的点：</p>
<script type="math/tex; mode=display">
\lambda_1 x_1 + \cdots + \lambda_k x_k \</script><p>就称为$x_1, x_2, \cdots , x_n$的凸组合。注意区分<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/348388306">线性组合,仿射组合,非负组合,凸组合</a>。</p>
<blockquote>
<p>通常你看到凸组合只意味着一个意思：<strong>线性组合，系数和为一</strong> </p>
<p>任意两个点的凸组合都在它们之间的线段上。</p>
</blockquote>
<h5 id="三-凸包："><a href="#三-凸包：" class="headerlink" title="(三) 凸包："></a>(三) 凸包：</h5><p>凸包是针对一个集合来说的。任意一个集合(不一定是凸集)$\boldsymbol C$，其中的点的凸组合构成的集合就称为凸包。</p>
<blockquote>
<p>点集的<a target="_blank" rel="noopener" href="https://zh.m.wikipedia.org/wiki/%E5%87%B8%E5%8C%85">凸包</a>等价于该点集的所有凸组合。 </p>
<p>凸包一定是凸集合，通过凸包操作能够将非凸集合转变为凸集合。</p>
</blockquote>
<h4 id="2-2-常见凸集"><a href="#2-2-常见凸集" class="headerlink" title="2.2 常见凸集"></a>2.2 常见凸集</h4><h5 id="一-超平面"><a href="#一-超平面" class="headerlink" title="(一) 超平面"></a>(一) 超平面</h5><ul>
<li><p><strong>定义：</strong>$n$维线性空间中维度为$n−1$的子空间，它可以把线性空间分割为不相交的两部分。 </p>
<blockquote>
<p>这里的$n$必须大于$3$，其子空间才能称之为超平面。</p>
<p>更直观理解超平面：其实就是平面中的直线、空间中的平面的推广。在三维坐标系，XoY平面把三维坐标系”分割”成两个空间，这个分割平面引申到一维，二维，四维空间…来，他就是一个超平面。</p>
</blockquote>
</li>
<li><p><strong>超平面方程推导：</strong> </p>
</li>
</ul>
<script type="math/tex; mode=display">
\boldsymbol H = \begin{Bmatrix} \boldsymbol x |\boldsymbol a^{\mathrm T} \boldsymbol x = \boldsymbol b ,(\boldsymbol a \neq \boldsymbol 0) \end{Bmatrix}</script><p>式中，$\boldsymbol a^{\mathrm T}$垂直于超平面$\boldsymbol x$。</p>
<blockquote>
<p>参考资料1：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qiyedetianfu/article/details/113113703?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-113113703-blog-53074100.pc_relevant_default&amp;spm=1001.2101.3001.4242.2&amp;utm_relevant_index=4">机器学习01-超平面理解</a></p>
<p>参考资料2：<a target="_blank" rel="noopener" href="https://blog.csdn.net/dengheCSDN/article/details/77313758?spm=1001.2101.3001.6650.3&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-3-77313758-blog-113113703.pc_relevant_antiscanv2&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-3-77313758-blog-113113703.pc_relevant_antiscanv2&amp;utm_relevant_index=6">超平面是什么？——理解超平面（SVM开篇之超平面详解）</a></p>
</blockquote>
<h5 id="二-半空间："><a href="#二-半空间：" class="headerlink" title="(二) 半空间："></a>(二) 半空间：</h5><script type="math/tex; mode=display">
\boldsymbol H^+ = \begin{Bmatrix} \boldsymbol x |\boldsymbol a^{\mathrm T} \boldsymbol x \geq \boldsymbol b ,(\boldsymbol a \neq \boldsymbol 0) \end{Bmatrix}</script><script type="math/tex; mode=display">
\boldsymbol H^- = \begin{Bmatrix} \boldsymbol x |\boldsymbol a^{\mathrm T} \boldsymbol x \leq \boldsymbol b ,(\boldsymbol a \neq \boldsymbol 0) \end{Bmatrix}</script><p><img src="https://pic.imgdb.cn/item/6281b42509475431299ca586.jpg"></p>
<h5 id="三-多面体："><a href="#三-多面体：" class="headerlink" title="(三) 多面体："></a>(三) 多面体：</h5><ul>
<li><strong>定义：</strong>多个线性不等式所刻画的集合</li>
</ul>
<script type="math/tex; mode=display">
\begin{Bmatrix} \boldsymbol x \mid \boldsymbol a_i^{\mathrm T} \boldsymbol x \leq \boldsymbol b_i , i = 1, \cdots, m \end{Bmatrix}</script><blockquote>
<p>注意：线性等式刻画的集合也是多面体，因为等式约束可以转换为不等式约束，如</p>
<script type="math/tex; mode=display">
a_{i}^{T} x=b_{i} \Leftrightarrow\left\{\begin{array}{l}
a_{i}^{T} x \leq b_{i} \\
-a_{i}^{T} x \leq-b_{i}
\end{array}\right.</script></blockquote>
<h5 id="四-球体：（Euclidean）ball-with-center-boldsymbol-x-c-and-radius-r"><a href="#四-球体：（Euclidean）ball-with-center-boldsymbol-x-c-and-radius-r" class="headerlink" title="(四) 球体：（Euclidean）ball with center $\boldsymbol x_c$and radius r"></a>(四) 球体：（Euclidean）ball with center $\boldsymbol x_c$and radius r</h5><script type="math/tex; mode=display">
B\left(\boldsymbol x_{c}, r\right)=\left\{ \boldsymbol x \mid \left\| \boldsymbol x - \boldsymbol x_{c}\right\|_{2} \leq r\right\}=\left\{\boldsymbol x_{c}+r\boldsymbol u  \mid \| \boldsymbol u \|_{2} \leq 1\right\}</script><p>式中，$\boldsymbol x_c$为球心，$r$为半径，$\boldsymbol u$表示某一距离长度范围。</p>
<h5 id="五-椭球（Ellipsoid）"><a href="#五-椭球（Ellipsoid）" class="headerlink" title="(五) 椭球（Ellipsoid）"></a>(五) 椭球（Ellipsoid）</h5><script type="math/tex; mode=display">
\left\{\boldsymbol x \mid\left(\boldsymbol x - \boldsymbol x_{c}\right)^{T} \boldsymbol P^{-1}\left(\boldsymbol x- \boldsymbol x_{c}\right) \leq 1\right\}</script><p>其中$\boldsymbol P$为<strong>正定矩阵</strong>；椭球的半轴长为$\sqrt \lambda_i$($\lambda_i$为正定矩阵的特征值)。</p>
<h5 id="六-二阶-次-锥-：Second-order-cone-ice-cream-cone"><a href="#六-二阶-次-锥-：Second-order-cone-ice-cream-cone" class="headerlink" title="(六) 二阶(次)锥 ：Second-order cone, ice-cream cone"></a>(六) 二阶(次)锥 ：Second-order cone, ice-cream cone</h5><p>假设有一个$n+1$维的锥，其前面$n$维写为$\boldsymbol x$，最后第$n+1$维分量记为$t$。</p>
<script type="math/tex; mode=display">
\left\{(\boldsymbol x, t) \mid ||\boldsymbol x||_2 \leq t\right\}</script><p><img src="https://pic.imgdb.cn/item/6281c0db0947543129bd2b92.jpg" style="zoom:50%"></p>
<blockquote>
<p>什么是锥：</p>
<p>如果<script type="math/tex">\boldsymbol x \in \boldsymbol C</script>，那么若有<script type="math/tex">\lambda \boldsymbol x \in \boldsymbol C, \forall \lambda \geq 0</script>，此时就称为锥。</p>
</blockquote>
<h5 id="七-半定矩阵锥"><a href="#七-半定矩阵锥" class="headerlink" title="(七) 半定矩阵锥"></a>(七) 半定矩阵锥</h5><ol>
<li><script type="math/tex">\boldsymbol S^n</script>：所有$n$阶<strong>对称矩阵</strong>组成的集合；</li>
<li><script type="math/tex; mode=display">\boldsymbol  S _ +^n = \begin{Bmatrix} \boldsymbol X \in \boldsymbol S^n \mid \boldsymbol X \geq  0\end{Bmatrix} $$：所有**半正定矩阵**组成的集合，其中：$$\boldsymbol X \geq  0 \Leftrightarrow \boldsymbol z^T \boldsymbol X \boldsymbol z \geq 0, \forall \boldsymbol z</script></li>
<li><script type="math/tex; mode=display">\boldsymbol S _ {++}^n = \begin{Bmatrix} \boldsymbol X \in \boldsymbol S^n \mid \boldsymbol X >  0\end{Bmatrix}$$：所有**正定矩阵**的集合，其中：$$\boldsymbol X >  0 \Leftrightarrow \boldsymbol z^T \boldsymbol X \boldsymbol z > 0, \forall \boldsymbol z</script></li>
</ol>
<p>半定矩阵锥常用于半定规划里面(一种常见的凸优化问题)。</p>
<ul>
<li>例子：<script type="math/tex">\left[\begin{array}{cc} x & y \\ y & x\end{array}\right] \in \boldsymbol S_+^2</script>，如下图所示。</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/628200f009475431297bfaed.jpg" style="zoom:50%"></p>
<blockquote>
<p>小问题：</p>
<p>线性规划</p>
<script type="math/tex; mode=display">
\min \begin{Bmatrix} \boldsymbol{c^Tx} \mid \boldsymbol A \boldsymbol x = \boldsymbol b , \boldsymbol x \geq 0 \end{Bmatrix}</script><p>的最优解组成的集合为<script type="math/tex">\boldsymbol S</script>，<script type="math/tex">\boldsymbol S</script>是凸集合吗？【答案——<script type="math/tex">\boldsymbol S</script>是凸集合】 </p>
<p>证明：</p>
<script type="math/tex; mode=display">
\begin{aligned}
&\forall \boldsymbol x_{1}, \boldsymbol x_{2} \in\boldsymbol  S,有\boldsymbol c^{T} \boldsymbol x_{1}=\boldsymbol c^{T} \boldsymbol x_{2}=\boldsymbol v^* \\
\\
&\forall \lambda \in[0,1], 验证\lambda \boldsymbol x_{1}+(1-\lambda) \boldsymbol x_{2} 是否属于\boldsymbol  S\\
\\
&c^{T}\left(\lambda \boldsymbol x_{1}+(1-\lambda) \boldsymbol x_{2} \right) \\
&=\lambda c^{T}\boldsymbol x_{1}+(1-\lambda) c^{T} \boldsymbol x_{2} \\
&=\boldsymbol v^* \in \boldsymbol  S
\end{aligned}</script></blockquote>
<h4 id="2-3-保持集合凸性的运算"><a href="#2-3-保持集合凸性的运算" class="headerlink" title="2.3 保持集合凸性的运算"></a>2.3 保持集合凸性的运算</h4><h5 id="一-第一种"><a href="#一-第一种" class="headerlink" title="(一) 第一种"></a>(一) 第一种</h5><p>设$\boldsymbol C_1, \boldsymbol C_2 ⊂  \mathbb{R}^n$是凸集，$a \in \mathbb{R}$则</p>
<ul>
<li>（1）<script type="math/tex">\boldsymbol C_{1} \cap \boldsymbol C_{2}=\left\{\boldsymbol x \mid \boldsymbol x \in \boldsymbol C_{1}, \boldsymbol x \in \boldsymbol C_{2}\right\}</script>是凸集</li>
<li>（2）<script type="math/tex">\boldsymbol C_{1} \pm \boldsymbol C_{2}=\left\{\boldsymbol{x \pm y} \mid \boldsymbol x \in \boldsymbol C_{1}, \boldsymbol y \in \boldsymbol C_{2}\right\}</script>是凸集</li>
</ul>
<blockquote>
<p>问题：<script type="math/tex">\boldsymbol S=\left\{\boldsymbol x \in \mathbb{R}^n \mid |p(t)|\leq 1,| t \mid \leq \pi / 3\right\}</script>，其中<script type="math/tex">p(t) = \sum_{i=1}^{n}x_i \cos it</script>是否为凸集？</p>
<p>答：带入<script type="math/tex">p(t)</script>得到：<script type="math/tex">-1 \leq x_{1} \cos t+x_{2} \cos 2 t+\cdots+x_{n} \cos n t \leq 1</script></p>
<p>上不等式表示两个半空间交集。如果$t$只有两种取值，那么就是两个上不等式刻画的集合的交；事实上$t$无穷多取值，那么就是无穷多个上不等式刻画的集合的交，即结果仍然是凸集。</p>
<p><img src="https://pic.imgdb.cn/item/6282072a09475431298dfd61.jpg" style="zoom:50%"></p>
</blockquote>
<h5 id="二-仿射变换"><a href="#二-仿射变换" class="headerlink" title="(二) 仿射变换"></a>(二) 仿射变换</h5><p>线性变换是特殊的仿射变换。或者说<strong><font color="red">仿射变换就是线性变换加平移</font></strong>。 </p>
<p>假设$f: \mathbb R^n \to \mathbb R^m$是仿射函数，即$f(\boldsymbol x) = \boldsymbol{Ax +b}, \boldsymbol A \in \mathbb R^{m \times n}, \boldsymbol b \in \mathbb R^m $</p>
<ul>
<li><script type="math/tex">\boldsymbol C</script>为<strong>凸集</strong><script type="math/tex">\Rightarrow f(\boldsymbol C) = \left\{f(\boldsymbol x) \mid \boldsymbol x \in \boldsymbol C \right\}</script>是<strong>凸集</strong></li>
<li><script type="math/tex">\boldsymbol C</script>为<strong>凸集</strong><script type="math/tex">\Rightarrow f^{-1}(\boldsymbol C) = \left\{\boldsymbol x \mid f(\boldsymbol x) \in \boldsymbol C \right\}</script>是<strong>凸集</strong></li>
</ul>
<blockquote>
<p><strong>特殊仿射变换：</strong></p>
<ul>
<li>放缩scaling：<script type="math/tex">\alpha \boldsymbol C = \left\{\alpha \boldsymbol x \mid \boldsymbol x \in \boldsymbol C \right\}</script></li>
<li>平移translation：<script type="math/tex">\boldsymbol x_0 + \boldsymbol C = \left\{\boldsymbol x_0 + \boldsymbol x \mid \boldsymbol x \in \boldsymbol C \right\}</script></li>
<li>投影projection：<script type="math/tex">\left\{x^{1} \mid\left(\begin{array}{l} x^{1} \\ x^{2} \end{array}\right) \in \boldsymbol C\right\}</script></li>
</ul>
</blockquote>
<h4 id="2-4-凸集的基本性质——投影定理"><a href="#2-4-凸集的基本性质——投影定理" class="headerlink" title="2.4 凸集的基本性质——投影定理"></a>2.4 凸集的基本性质——投影定理</h4><h5 id="一-投影定理概念"><a href="#一-投影定理概念" class="headerlink" title="(一) 投影定理概念"></a>(一) 投影定理概念</h5><p>设$\boldsymbol C ⊂  \mathbb{R}^n$是一个非空闭凸集，$\boldsymbol y \in  \mathbb{R}^n, \boldsymbol y \notin \boldsymbol C$，则：</p>
<p>（1）存在唯一的一点$\overline{\boldsymbol x} \in \boldsymbol C$，使得$\overline{\boldsymbol x}$是$\boldsymbol y$到$\boldsymbol C$的距离最小的点(即<strong>投影点</strong>)，即有</p>
<script type="math/tex; mode=display">
|| \overline{\boldsymbol x} - \boldsymbol y || = \inf \begin{Bmatrix} ||\boldsymbol x - \boldsymbol y|| \mid \boldsymbol x \in \boldsymbol C \end{Bmatrix} > 0</script><p>（2）$\overline{\boldsymbol x}$是$\boldsymbol y$到$\boldsymbol C$的投影点(最小距离点)的充要条件是：</p>
<script type="math/tex; mode=display">
(\boldsymbol x - \overline{\boldsymbol x})^{\mathrm T} (\boldsymbol y - \overline{\boldsymbol x}) \leq 0 , \forall \boldsymbol x \in \boldsymbol C</script><h5 id="二-投影定理的证明"><a href="#二-投影定理的证明" class="headerlink" title="(二) 投影定理的证明"></a>(二) 投影定理的证明</h5><p>不妨设，$\overline{\boldsymbol x}、\boldsymbol x’$都是投影点，则：$|| \overline{\boldsymbol x} - \boldsymbol y || = || \boldsymbol x’ - \boldsymbol y ||$</p>
<p>存在$\hat{\boldsymbol x}$在$\overline{\boldsymbol x}、\boldsymbol x’$两点之间，并作为连接三角形的中垂线，而小于其他两条边，从而小于投影点距离，矛盾！</p>
<p>因此投影点是唯一的。</p>
<p><img src="https://pic.imgdb.cn/item/628211980947543129abeb1c.jpg" style="zoom:50%"></p>
<h5 id="三-点与凸集的分离"><a href="#三-点与凸集的分离" class="headerlink" title="(三) 点与凸集的分离"></a>(三) 点与凸集的分离</h5><ul>
<li><strong>分离</strong></li>
</ul>
<p>设$\boldsymbol C_1, \boldsymbol C_2 ⊂  \mathbb{R}^n$是两个非空凸集，若非零$\boldsymbol a \in \mathbb{R}^n$和$\boldsymbol b$使得：</p>
<script type="math/tex; mode=display">
\boldsymbol{a^{\mathrm T}x} \geq \boldsymbol b, \forall \boldsymbol x \in \boldsymbol C_1, \boldsymbol{a^{\mathrm T}z} \leq \boldsymbol b, \forall \boldsymbol z \in \boldsymbol C_2 \\
\Updownarrow \\
\boldsymbol{a^{\mathrm T}x} \geq \boldsymbol{a^{\mathrm T}z}, \forall \boldsymbol x \in \boldsymbol C_1,\forall \boldsymbol z \in \boldsymbol C_2</script><p>则称超平面$\boldsymbol H = \begin{Bmatrix} \boldsymbol x \mid \boldsymbol{a^{\mathrm T}} \boldsymbol x = \boldsymbol b \end{Bmatrix}$<strong>分离</strong>集合$\boldsymbol C_1, \boldsymbol C_2$。</p>
<ul>
<li><strong>严格分离</strong></li>
</ul>
<p>设$\boldsymbol C_1, \boldsymbol C_2 ⊂  \mathbb{R}^n$是两个非空凸集，若非零$\boldsymbol a \in \mathbb{R}^n$和$\boldsymbol b$使得：</p>
<script type="math/tex; mode=display">
\boldsymbol{a^{\mathrm T}x} > \boldsymbol b, \forall \boldsymbol x \in \boldsymbol C_1, \boldsymbol{a^{\mathrm T}z} < \boldsymbol b, \forall \boldsymbol z \in \boldsymbol C_2 \\
\Updownarrow \\
\boldsymbol{a^{\mathrm T}x} > \boldsymbol{a^{\mathrm T}z}, \forall \boldsymbol x \in \boldsymbol C_1,\forall \boldsymbol z \in \boldsymbol C_2</script><p>则称超平面$\boldsymbol H = \begin{Bmatrix} \boldsymbol x \mid \boldsymbol{a^{\mathrm T}} \boldsymbol x = \boldsymbol b \end{Bmatrix}$<strong>严格分离</strong>集合$\boldsymbol C_1, \boldsymbol C_2$。</p>
<blockquote>
<p>小问题1：两个不相交的非空凸集一定能分离吗？</p>
<p>答：一定能分离。</p>
<p>小问题2：设$\boldsymbol C ⊂  \mathbb{R}^n$是两个非空闭凸集，$\boldsymbol y \notin \boldsymbol C$，是否存在超平面分离$\boldsymbol y$ 和$\boldsymbol C$？</p>
<p>答：存在</p>
</blockquote>
<h4 id="2-5-支撑超平面定理"><a href="#2-5-支撑超平面定理" class="headerlink" title="2.5 支撑超平面定理"></a>2.5 支撑超平面定理</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:left">意义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$\partial \boldsymbol C$</td>
<td style="text-align:left">集合<script type="math/tex">\boldsymbol C</script>的边界</td>
</tr>
<tr>
<td style="text-align:center">$\text{int } \boldsymbol C$</td>
<td style="text-align:left">集合<script type="math/tex">\boldsymbol C</script>所有内点表示的集合</td>
</tr>
<tr>
<td style="text-align:center">$\boldsymbol {c</td>
<td style="text-align:left">C}$</td>
<td>闭包，集合<script type="math/tex">\boldsymbol C</script>内点、边界点放在一起组成的集合(有界闭集合)</td>
</tr>
</tbody>
</table>
</div>
<p>设$\boldsymbol C ⊂  \mathbb{R}^n$是非空凸集，$\overline{\boldsymbol x} \in \partial \boldsymbol C $(意思是$\overline{\boldsymbol x}$是$\boldsymbol C$的边界点)，则存在非零向量$\boldsymbol a \in \mathbb{R}^n$使得：</p>
<script type="math/tex; mode=display">
\boldsymbol{a^{\mathrm T}x} \leq \boldsymbol{a^{\mathrm T}} \overline{\boldsymbol x}, \forall \boldsymbol x \in \boldsymbol {c|C}</script><p>其中，$\boldsymbol {c|C}$是凸集$\boldsymbol C$的全域，称为<strong>闭包</strong>，包括内部和边界。当$\boldsymbol C$不是紧的的时候，$\boldsymbol {c|C}$也是指$\boldsymbol {C}$的全域，即包括$\boldsymbol {C}$不包括的边界。</p>
<p>此时，也称超平面$\boldsymbol H = \begin{Bmatrix} \boldsymbol x \in \mathbb{R}^n \mid \boldsymbol{a^{\mathrm T}} \boldsymbol x =\boldsymbol{a^{\mathrm T}} \overline{\boldsymbol x} \end{Bmatrix}$是集合$\boldsymbol C$在$\overline{\boldsymbol x}$处的<strong>支撑超平面</strong>。</p>
<p><img src="https://pic.imgdb.cn/item/628218a80947543129bfd828.jpg" style="zoom:50%"></p>
<blockquote>
<p>通俗来说，该定理描述为：在凸集$\boldsymbol C$的边界一点$\overline{\boldsymbol x}$寻找一个超平面$\boldsymbol H$，将凸集$\boldsymbol C$放在超平面<strong>负半空间</strong>中。</p>
</blockquote>
<ul>
<li><strong>证明：</strong></li>
</ul>
<p>由于$\overline{\boldsymbol x} \in \partial \boldsymbol C $，则$\boldsymbol x_k \to \overline{\boldsymbol x}$(点列，<strong>收敛</strong>到$\overline{\boldsymbol x}$)，且$\boldsymbol x_k \notin \boldsymbol {c|C}$</p>
<p>因为$\boldsymbol x_k \notin \boldsymbol {c|C}​$，则存在$\boldsymbol a_k(\neq \boldsymbol 0)​$（边界点法向量），使得：</p>
<script type="math/tex; mode=display">
\boldsymbol{a_k^{\mathrm T}x} \leq \boldsymbol{a_k^{\mathrm T}} \boldsymbol x_k, \forall \boldsymbol x \in \boldsymbol {c|C}</script><p>不妨设，$||\boldsymbol a_k|| = 1$，则$\begin{Bmatrix} \boldsymbol a_k \end{Bmatrix}$存在收敛子列。</p>
<p>令上式中$k \to \infty$得：</p>
<script type="math/tex; mode=display">
\boldsymbol{a^{\mathrm T}x} \leq \boldsymbol{a^{\mathrm T}} \overline{\boldsymbol x}, \forall \boldsymbol x \in \boldsymbol {c|C}</script><blockquote>
<p>参考链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42518956/article/details/113943943">最优化理论与方法-第二讲-凸集 - skycrygg - CSDN</a></p>
</blockquote>
<h4 id="2-6-凸集之Farkas引理"><a href="#2-6-凸集之Farkas引理" class="headerlink" title="2.6 凸集之Farkas引理"></a>2.6 凸集之Farkas引理</h4><p><strong>Farkas引理好像可以用于<font color="red">升维度</font>。</strong></p>
<h5 id="一-Farkas引理定义"><a href="#一-Farkas引理定义" class="headerlink" title="(一) Farkas引理定义"></a>(一) Farkas引理定义</h5><p>给定矩阵$\boldsymbol A_{m \times n}$以及$n$维向量$\boldsymbol c$，则以下两个问题<strong>有且只有一个有解</strong>：</p>
<ul>
<li>问题1——<script type="math/tex">\boldsymbol{Ax \leq 0}, \boldsymbol{c^Tx > 0}</script></li>
<li>问题2——<script type="math/tex">\boldsymbol{A^Ty = c}, \boldsymbol{y \geq 0}</script></li>
</ul>
<p>Farkas引理在几何上讨论矩阵$\boldsymbol A​$的行向量与向量$\boldsymbol c​$的<strong>位置关系</strong>。</p>
<p>矩阵</p>
<script type="math/tex; mode=display">
\boldsymbol{A}=\left[\begin{array}{cccc}
a_{11} & a_{12} & \cdots & a_{1n} \\
a_{21} & a_{22} & \cdots & a_{2n} \\
\vdots & \vdots & \ddots & \vdots \\
a_{m1} & a_{m2} & \cdots & a_{mn}
\end{array}\right] 
=\left[\begin{array}{c} \boldsymbol a_{1}^{\mathrm T} \\ \boldsymbol a_{2}^{\mathrm T} \\ \vdots \\ \boldsymbol a_{m}^{\mathrm T} \end{array}\right]</script><p>其中，$\boldsymbol a_i$为$n$维列向量，将其带入问题1、2可得：</p>
<ul>
<li>问题1——<script type="math/tex">\boldsymbol{a_i^Tx \leq 0}(i = 1,2, \cdots, m), \boldsymbol{c^Tx >0}</script></li>
<li>问题2——<script type="math/tex">\boldsymbol{A^Ty} = (\boldsymbol a_1, \boldsymbol a_2, \cdots, \boldsymbol a_m) \left[\begin{array}{c} y_1 \\ y_2 \\ \vdots \\ y_{m} \end{array}\right] = \boldsymbol c,  y_i \geq 0(i = 1,2, \cdots, m)</script></li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">情况1</th>
<th style="text-align:center">情况2</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://pic.imgdb.cn/item/6282f96d094754312968a721.jpg"></td>
<td style="text-align:center"><img src="https://pic.imgdb.cn/item/6282f9a70947543129696635.jpg"></td>
</tr>
</tbody>
</table>
</div>
<h5 id="二-Farkas引理证明"><a href="#二-Farkas引理证明" class="headerlink" title="(二) Farkas引理证明"></a>(二) Farkas引理证明</h5><ul>
<li><strong>证明方法1：</strong></li>
</ul>
<p><img src="https://pic.imgdb.cn/item/6282fcf9094754312973a43c.jpg" style="zoom:50%"></p>
<ul>
<li><strong>证明方法2：利用线性规划对偶理论</strong></li>
</ul>
<h5 id="三-Farkas引理的推论"><a href="#三-Farkas引理的推论" class="headerlink" title="(三) Farkas引理的推论"></a>(三) Farkas引理的推论</h5><ul>
<li><strong>Gordan定理：</strong>给定矩阵$\boldsymbol A_{m \times n}$，则以下两个问题<strong>有且只有一个有解</strong>：<ul>
<li>问题1——<script type="math/tex">\boldsymbol{Ax < 0}</script></li>
<li>问题2——<script type="math/tex">\boldsymbol{A^Ty = 0}, \boldsymbol{y \geq 0}, \boldsymbol{y \neq 0}</script></li>
</ul>
</li>
<li>给定矩阵$\boldsymbol A_{m \times n}$以及$n$维向量以及$n$维向量$\boldsymbol c$，则以下两个问题<strong>有且只有一个有解</strong>：<ul>
<li>问题1——<script type="math/tex">\boldsymbol{Ax \leq 0}, \boldsymbol{x \geq 0}, \boldsymbol{c^Tx > 0}</script></li>
<li>问题2——<script type="math/tex">\boldsymbol{A^Ty \geq c}, \boldsymbol{y \geq 0}</script></li>
</ul>
</li>
<li>其他还有好几个推论。。。</li>
</ul>
<h3 id="第三讲-凸函数"><a href="#第三讲-凸函数" class="headerlink" title="第三讲 凸函数"></a>第三讲 凸函数</h3><h4 id="3-1-凸函数与凹函数定义"><a href="#3-1-凸函数与凹函数定义" class="headerlink" title="3.1 凸函数与凹函数定义"></a>3.1 凸函数与凹函数定义</h4><h5 id="一-凸函数"><a href="#一-凸函数" class="headerlink" title="(一) 凸函数"></a>(一) 凸函数</h5><p>设$\boldsymbol C$为非空凸集，$f$是定义在$\boldsymbol C$上的函数，如果对任意的$\boldsymbol x, \boldsymbol y \in \boldsymbol C, \alpha \in (0,1)$，均有：</p>
<script type="math/tex; mode=display">
f(\alpha \boldsymbol x + (1-\alpha)\boldsymbol y) \leq \alpha f(\boldsymbol x) + (1-\alpha)f\boldsymbol (y)</script><p>则称$f$为$\boldsymbol C$上的<strong>凸函数</strong>。</p>
<h5 id="二-严格凸函数"><a href="#二-严格凸函数" class="headerlink" title="(二) 严格凸函数"></a>(二) 严格凸函数</h5><script type="math/tex; mode=display">
f(\alpha \boldsymbol x + (1-\alpha)\boldsymbol y) < \alpha f(\boldsymbol x) + (1-\alpha)f\boldsymbol (y)</script><h5 id="三-凹函数"><a href="#三-凹函数" class="headerlink" title="(三) 凹函数"></a>(三) 凹函数</h5><p>设$\boldsymbol C$为非空凸集，$f$是定义在$\boldsymbol C$上的函数，如果对任意的$\boldsymbol x, \boldsymbol y \in \boldsymbol C, \alpha \in (0,1)$，均有：</p>
<script type="math/tex; mode=display">
f(\alpha \boldsymbol x + (1-\alpha)\boldsymbol y) \geq \alpha f(\boldsymbol x) + (1-\alpha)f\boldsymbol (y)</script><p>则称$f$为$\boldsymbol C$上的凹<strong>函数</strong>。</p>
<h5 id="四-严格凹函数"><a href="#四-严格凹函数" class="headerlink" title="(四) 严格凹函数"></a>(四) 严格凹函数</h5><script type="math/tex; mode=display">
f(\alpha \boldsymbol x + (1-\alpha)\boldsymbol y) > \alpha f(\boldsymbol x) + (1-\alpha)f\boldsymbol (y)</script><blockquote>
<p>若$-f$是凸函数，那么$f$为凹函数。</p>
<p>如果原来要求解一个凹函数$f(x)$的最大值，则可以转换为凸函数的最小值：</p>
<script type="math/tex; mode=display">
\max f(x)  \Longleftrightarrow \min -f(x)</script></blockquote>
<h4 id="3-2-常见凸函数"><a href="#3-2-常见凸函数" class="headerlink" title="3.2 常见凸函数"></a>3.2 常见凸函数</h4><h5 id="一-线性函数"><a href="#一-线性函数" class="headerlink" title="(一) 线性函数"></a>(一) 线性函数</h5><script type="math/tex; mode=display">
f(\boldsymbol x) = \boldsymbol a^{\mathrm T} \boldsymbol x + b</script><p>该函数很特殊，它既<strong>唯一一类</strong>是凸函数又是凹函数。</p>
<h5 id="二-二次函数"><a href="#二-二次函数" class="headerlink" title="(二) 二次函数"></a>(二) 二次函数</h5><script type="math/tex; mode=display">
f(\boldsymbol x) =  \boldsymbol x^{\mathrm T} \boldsymbol Q \boldsymbol x + \boldsymbol a^{\mathrm T} \boldsymbol x + b, \boldsymbol Q \in \boldsymbol S_+^n</script><p>其中$\boldsymbol Q \in \boldsymbol S_+^n$是指$\boldsymbol Q$为<strong><font color="blue">半正定</font></strong>矩阵。该式子涉及<strong><font color="red">二次型</font></strong>的知识。</p>
<h5 id="三-最小二乘函数"><a href="#三-最小二乘函数" class="headerlink" title="(三) 最小二乘函数"></a>(三) 最小二乘函数</h5><script type="math/tex; mode=display">
f(\boldsymbol x) = ||\boldsymbol{Ax - b}||_2^2</script><h5 id="四-p-范数"><a href="#四-p-范数" class="headerlink" title="(四) $p$范数"></a>(四) $p$范数</h5><script type="math/tex; mode=display">
f(\boldsymbol x) = \left( \sum_{i = 1}^n |x_i|^p\right)^{\frac{1}{p}}, p \geq 1</script><blockquote>
<p>0范数：$f(\boldsymbol x) = ||\boldsymbol x||_0$表示向量$\boldsymbol x$中<strong>0元素的个数</strong>。</p>
</blockquote>
<h4 id="3-3-凸函数的性质"><a href="#3-3-凸函数的性质" class="headerlink" title="3.3 凸函数的性质"></a>3.3 凸函数的性质</h4><h5 id="一-连续性"><a href="#一-连续性" class="headerlink" title="(一)连续性"></a>(一)连续性</h5><p>一个函数若是凸函数，那么该函数一定是连续函数。</p>
<h5 id="二-性质2"><a href="#二-性质2" class="headerlink" title="(二) 性质2"></a>(二) 性质2</h5><p>$f(\boldsymbol x)$为凸函数，等价于对任意的$\boldsymbol{x,y} \in \mathbb{R}^n$，一元函数：</p>
<script type="math/tex; mode=display">
\varphi(\alpha) = f(\boldsymbol x + \alpha \boldsymbol y)</script><p>为凸函数。相当于把函数竖着切一下得到的切面？？？</p>
<h5 id="三-性质3——判定凸函数的一阶条件"><a href="#三-性质3——判定凸函数的一阶条件" class="headerlink" title="(三) 性质3——判定凸函数的一阶条件"></a>(三) 性质3——判定凸函数的一阶条件</h5><p>$f(\boldsymbol x)$为$\boldsymbol C$上的凸函数的充要条件为：</p>
<script type="math/tex; mode=display">
f(\boldsymbol y) \geq f(\boldsymbol x) + \bigtriangledown f(\boldsymbol x)^{\mathrm T}(\boldsymbol y - \boldsymbol x), \forall \boldsymbol {x, y \in C}</script><p>几何上的意义就是$f(\boldsymbol x)$要在经过某一点的切面的上方，注意到上式中右式为函数在点处的一阶泰勒展开，在$n = 1$情形下的几何意义如下图：</p>
<p><img src="https://pic.imgdb.cn/item/628c479d09475431292ef5f0.jpg" style="zoom:50%"></p>
<p> 对应的切线方程为：$g(y) =  f(x) + \bigtriangledown f(x)^{\mathrm T}(y - x)$</p>
<p>证明：参考网络上的一些博客/b站视频。</p>
<h5 id="四-性质4——判定凸函数的二阶条件"><a href="#四-性质4——判定凸函数的二阶条件" class="headerlink" title="(四) 性质4——判定凸函数的二阶条件"></a>(四) 性质4——判定凸函数的二阶条件</h5><p>一阶条件在工作中很少被使用，我们往往使用的是二阶条件来判定函数的凸性。</p>
<blockquote>
<p>二阶条件涉及到了Hessian matrix，它是这样定义的。 </p>
<p>在数学中，海森矩阵（Hessian matrix 或 Hessian）是一个多变量实值函数的二阶偏导数组成的方块矩阵，假设有一实数函数$f (x_1 , x_2 , . . . , x_n )$ ，如果$f$所有的二阶偏导数都存在，那么$f$的海森矩阵是长下面这样：</p>
<p><img src="https://pic.imgdb.cn/item/628c49750947543129314633.jpg" style="zoom:70%"></p>
</blockquote>
<p>设$\boldsymbol C \in \mathbb{R}^n$是非空开凸集，$f(\boldsymbol x)$在$\boldsymbol C$上二阶连续可微，则$f(\boldsymbol x)$是$\boldsymbol C$上的凸函数，等价于$f(\boldsymbol x)$的二阶Hessian matrix：</p>
<script type="math/tex; mode=display">
\bigtriangledown^2 f(\boldsymbol x) \geq 0, \forall \boldsymbol x \in C</script><p>即函数的二阶Hessian matrix需要是<strong>半正定的</strong>。</p>
<p>对于$\boldsymbol C \in \mathbb{R}$上的函数, 上式退化为$ \dfrac{\mathrm d}{\mathrm d x} \left( \dfrac{\mathrm d f}{\mathrm d x} \right) = f′′(x) ⩾ 0$. 该条件表明函数$f$的导数非减，从几何上解释就是函数$f$在点$x$处具有向上(正)的曲率。</p>
<h4 id="3-4-保持函数凸性的运算"><a href="#3-4-保持函数凸性的运算" class="headerlink" title="3.4 保持函数凸性的运算"></a>3.4 保持函数凸性的运算</h4><h5 id="一-Perspective-function"><a href="#一-Perspective-function" class="headerlink" title="(一) Perspective function"></a>(一) Perspective function</h5><p>若$f(\boldsymbol x)$为凸函数，则：</p>
<script type="math/tex; mode=display">
g(\boldsymbol x, t) = t f(\dfrac{\boldsymbol x}{t}), t > 0</script><p>为凸函数，设$f(x) = x^2$，则$g(x,t)$的可视化如下图所示。</p>
<p><img src="https://pic.imgdb.cn/item/628c4da7094754312936a3c5.jpg" style="zoom:70%"></p>
<h5 id="二-非负组合"><a href="#二-非负组合" class="headerlink" title="(二) 非负组合"></a>(二) 非负组合</h5><p>设有一组凸函数：$f_1(\boldsymbol x), f_2(\boldsymbol x), \cdots, f_m(\boldsymbol x)$，则有：</p>
<script type="math/tex; mode=display">
g(\boldsymbol x) = w_1  f_1(\boldsymbol x) + w_2 f_2(\boldsymbol x) + \cdots + w_m f_m(\boldsymbol x), w_i \geq 0</script><p>为凸函数。</p>
<h5 id="三-凸函数求最大"><a href="#三-凸函数求最大" class="headerlink" title="(三) 凸函数求最大"></a>(三) 凸函数求最大</h5><p>设有一组凸函数：$f_1(\boldsymbol x), f_2(\boldsymbol x), \cdots, f_m(\boldsymbol x)$，则有：</p>
<script type="math/tex; mode=display">
g(\boldsymbol x) = \max \begin{Bmatrix} f_1(\boldsymbol x), f_2(\boldsymbol x), \cdots, f_m(\boldsymbol x) \end{Bmatrix}</script><p>为凸函数。</p>
<h4 id="3-5-凸集与凸函数的关系"><a href="#3-5-凸集与凸函数的关系" class="headerlink" title="3.5 凸集与凸函数的关系"></a>3.5 凸集与凸函数的关系</h4><p>讨论凸集和凸函数的两个工具：<strong>凸集</strong>，<strong>上(镜)图Epigraph</strong></p>
<h5 id="一-水平集"><a href="#一-水平集" class="headerlink" title="(一) 水平集"></a>(一) 水平集</h5><p>任意一个函数(不一定是凸函数)$f(\boldsymbol x)$的<strong>水平集</strong>：</p>
<script type="math/tex; mode=display">
\boldsymbol L_a = \begin{Bmatrix} \boldsymbol x \mid f(\boldsymbol x) \leq a, \boldsymbol x \in C \end{Bmatrix}</script><p>其中$a$为给定的水平值。</p>
<p>$f(\boldsymbol x)​$是凸函数，则其水平集均为凸集。反之，则不成立，即函数不是凸函数时，其水平集也可能是凸集。</p>
<h5 id="二-上-镜-图Epigraph"><a href="#二-上-镜-图Epigraph" class="headerlink" title="(二) 上(镜)图Epigraph"></a>(二) 上(镜)图Epigraph</h5><p>函数$f(\boldsymbol x)$的Epigraph定义为：</p>
<script type="math/tex; mode=display">
\text{epi} (f) = \begin{Bmatrix} (\boldsymbol x, \boldsymbol y)^{\mathrm T} \mid f(\boldsymbol x) \leq \boldsymbol y, \boldsymbol x \in \boldsymbol C \end{Bmatrix}</script><script type="math/tex; mode=display">
f(\boldsymbol x)是凸函数为凸集  \Longleftrightarrow \text{epi} (f)为凸集合</script><p><img src="https://pic.imgdb.cn/item/628c55cb094754312940ee44.jpg" style="zoom:50%"></p>
<p>小问题：给定非空闭凸集$\boldsymbol C$，证明距离函数$f(\boldsymbol y)$是凸函数，其中：</p>
<script type="math/tex; mode=display">
f(\boldsymbol y) = \min \begin{Bmatrix}||\boldsymbol{y-x}||_2 \mid  \boldsymbol x \in \boldsymbol C \end{Bmatrix}</script><h3 id="第四讲-凸优化问题"><a href="#第四讲-凸优化问题" class="headerlink" title="第四讲 凸优化问题"></a>第四讲 凸优化问题</h3><h4 id="4-1-凸优化问题通式"><a href="#4-1-凸优化问题通式" class="headerlink" title="4.1 凸优化问题通式"></a>4.1 凸优化问题通式</h4><p>考虑最优化问题（P）：</p>
<script type="math/tex; mode=display">
\begin{cases}\text { min } & f(\boldsymbol x) \\ 
\text{ s.t. } & g_{i}(\boldsymbol x) \leq 0, \text{  } i=1, \cdots, m \\ 
& h_{i}(\boldsymbol x) = 0, \text{  } i=1, \cdots, l\end{cases}</script><p>记P的可行域为<script type="math/tex">\boldsymbol S = \begin{Bmatrix} \boldsymbol x \in \mathbb{R}^n \mid g_{i}(\boldsymbol x) \leq 0, \text{  } i=1, \cdots, m,  h_{i}(\boldsymbol x) = 0, \text{  } i=1, \cdots, l \end{Bmatrix}</script>，则<font color="blue">当<script type="math/tex">f(\boldsymbol x), g_{i}(\boldsymbol x)</script>是凸函数</font>，<font color="green"><script type="math/tex">h_{i}(\boldsymbol x)</script>是线性函数时</font>，问题（P）称为<strong><font color="red">凸优化问题</font></strong>。</p>
<ul>
<li>为什么特别强调不等式约束条件<script type="math/tex">g_{i}(\boldsymbol x)</script>是凸函数呢？</li>
</ul>
<p>首先，<script type="math/tex">g_{i}(\boldsymbol x) \leq 0</script>刻画的是水平值取0时的一个<strong>水平集</strong>；又知当函数为凸函数时，其水平集均为凸集合。</p>
<ul>
<li>为什么特别强调等式约束条件<script type="math/tex">h_{i}(\boldsymbol x)</script>是线性函数呢？</li>
</ul>
<p>等式约束当为线性函数是，就相当于<script type="math/tex">h_{i}(\boldsymbol x) = \boldsymbol a^{\mathrm T} \boldsymbol x + \boldsymbol b = 0</script>，这种形式所刻画的集合是一个超平面，而超平面也是一个凸集合。</p>
<p>由以上两个小问题分析可知，在上面的条件下，由不等式约束和等式约束所刻画的集合<script type="math/tex">\boldsymbol S</script>也是一个凸集合，这是凸优化问题的一个特点。</p>
<p><img src="https://pic.imgdb.cn/item/628d92730947543129dd4af1.jpg" style="zoom:50%"></p>
<h4 id="4-2-区分凸优化与非凸优化"><a href="#4-2-区分凸优化与非凸优化" class="headerlink" title="4.2 区分凸优化与非凸优化"></a>4.2 区分凸优化与非凸优化</h4><p>区分凸优化与非凸优化是一个非常重要的事情，若是我们能够判断出该问题为凸优化问题，那么就能利用凸优化很多很好的性质进行求解分析问题。下面介绍凸优化问题的两个比较好的性质。</p>
<h5 id="一-局部最优即全局最优"><a href="#一-局部最优即全局最优" class="headerlink" title="(一) 局部最优即全局最优"></a>(一) 局部最优即全局最优</h5><p>对于凸优化问题，其局部最优解就是全局最优解。</p>
<ul>
<li><strong>局部最优解</strong></li>
</ul>
<p>设现在有一个问题可行解为<script type="math/tex">\overline{\boldsymbol x}</script>满足：<script type="math/tex">f(\overline{\boldsymbol x}) \leq f(\boldsymbol x), \forall \boldsymbol x \in \boldsymbol S \cap \boldsymbol N_{\epsilon}(\overline{\boldsymbol x})</script>即在<script type="math/tex">\overline{\boldsymbol x}</script>很小的范围内的函数值都要大于<script type="math/tex">\overline{\boldsymbol x}</script>处的函数值，此时<script type="math/tex">\overline{\boldsymbol x}</script>为局部最优解。</p>
<ul>
<li><strong>全局最优解</strong></li>
</ul>
<p>设现在有一个问题可行解为<script type="math/tex">\overline{\boldsymbol x}^*</script>满足：<script type="math/tex">f(\overline{\boldsymbol x}^*) \leq f(\boldsymbol x), \forall \boldsymbol x \in \boldsymbol S</script>即在整个可行域范围内的函数值都要大于<script type="math/tex">\overline{\boldsymbol x}^*</script>处的函数值，此时<script type="math/tex">\overline{\boldsymbol x}^*</script>为全局最优解。</p>
<p><strong>证明：</strong></p>
<p>设对于凸优化，<script type="math/tex">\overline{\boldsymbol x}</script>是局部最优解，但不是全局最优，即存在<script type="math/tex">{\boldsymbol x}^*</script>使得<script type="math/tex">f({\boldsymbol x}^*) < f(\overline{\boldsymbol x}), \forall \boldsymbol x \in \boldsymbol S</script>，取<script type="math/tex">\lambda \in (0,1)</script>，则有：</p>
<script type="math/tex; mode=display">
\begin{aligned}
f\left(\overline{\boldsymbol{x}}+\lambda\left(\boldsymbol{x}^{*}-\overline{\boldsymbol{x}}\right)\right) &\left.=f\left(\lambda \boldsymbol{x}^{*}+(1-\lambda) \overline{\boldsymbol{x}}\right)\right) \\
& \leq \lambda f\left(\boldsymbol{x}^{*}\right)+(1-\lambda) f(\overline{\boldsymbol{x}}) \\
&<f(\overline{\boldsymbol{x}})
\end{aligned}</script><p>当$\lambda \to 0$时，$\left(\overline{\boldsymbol{x}}+\lambda\left(\boldsymbol{x}^{*}-\overline{\boldsymbol{x}}\right)\right) $就非常趋近与<script type="math/tex">\overline{\boldsymbol x}</script>，即在<script type="math/tex">\overline{\boldsymbol x}</script>的邻域里面。那么就可以得出结论：凸优化的局部最优一定时全局最优，不然后产生矛盾。</p>
<h5 id="二-凸优化问题最优性条件"><a href="#二-凸优化问题最优性条件" class="headerlink" title="(二) 凸优化问题最优性条件"></a>(二) 凸优化问题最优性条件</h5><p>最优性条件其实就是在讨论优化问题的最优解要满足的条件：充分条件、必要条件、充要条件。</p>
<p>设<script type="math/tex">\overline{\boldsymbol x}^* \in \boldsymbol S</script>为某一最优化问题的最优解，则等价于(<strong>充要条件</strong>)：</p>
<script type="math/tex; mode=display">
\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}(\boldsymbol x - \overline{\boldsymbol x}^*) \geq 0, \forall  \boldsymbol x \in \boldsymbol S</script><p><strong>证明——充分性：</strong>已知<script type="math/tex">\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}(\boldsymbol x - \overline{\boldsymbol x}^*) \geq 0, \forall  \boldsymbol x \in \boldsymbol S</script>，求证此时<script type="math/tex">\overline{\boldsymbol x}^* \in \boldsymbol S</script>为某一最优化问题的最优解。</p>
<p>首先<script type="math/tex">f(\overline{\boldsymbol x}^*) + \triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}(\boldsymbol x - \overline{\boldsymbol x}^*)</script>是一个经过<script type="math/tex">(\overline{\boldsymbol x}^*, f(\overline{\boldsymbol x}^*))</script>点的切平面，因为目标函数<script type="math/tex">f</script>是凸函数，则函数在其切平面的上方，即满足：</p>
<script type="math/tex; mode=display">
f(\boldsymbol x) \geq f(\overline{\boldsymbol x}^*) + \triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}(\boldsymbol x - \overline{\boldsymbol x}^*) \geq f(\overline{\boldsymbol x}^*)  , \forall \boldsymbol x \in \boldsymbol S</script><p>即，对于任意<script type="math/tex">\boldsymbol x</script>都有<script type="math/tex">f(\boldsymbol x) \geq  f(\overline{\boldsymbol x}^*)</script>，即<script type="math/tex">\overline{\boldsymbol x}^* \in \boldsymbol S</script>为最优化问题的最优解。</p>
<p><strong>证明——必要性：</strong>已知<script type="math/tex">\overline{\boldsymbol x}^* \in \boldsymbol S</script>为某一最优化问题的最优解，求证<script type="math/tex">\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}(\boldsymbol x - \overline{\boldsymbol x}^*) \geq 0, \forall  \boldsymbol x \in \boldsymbol S</script>。</p>
<p>(反证法)：设存在<script type="math/tex">\overline{\boldsymbol x} \in \boldsymbol S</script>使得<script type="math/tex">\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}(\overline{\boldsymbol x} - \overline{\boldsymbol x}^*) < 0</script>，<script type="math/tex">\lambda \in (0,1)</script></p>
<script type="math/tex; mode=display">
f(\overline{\boldsymbol{x}}^*+\lambda(\overline{\boldsymbol{x}}-\overline{\boldsymbol{x}}^*))\overset{泰勒展开}{=} f(\overline{\boldsymbol{x}}^*) + \lambda \triangledown f (\overline{\boldsymbol{x}}^*)(\boldsymbol x - \overline{\boldsymbol x}^*) + o(\lambda||\boldsymbol x - \overline{\boldsymbol x}^*)||)</script><p>整理可得：</p>
<script type="math/tex; mode=display">
\frac{f(\overline{\boldsymbol{x}}^*+\lambda(\overline{\boldsymbol{x}}-\overline{\boldsymbol{x}}^*))-f(\overline{\boldsymbol{x}}^*)}{\lambda} = \triangledown f (\overline{\boldsymbol{x}}^*)(\boldsymbol x - \overline{\boldsymbol x}^*) + \frac{o(\lambda||\boldsymbol x - \overline{\boldsymbol x}^*)||)}{\lambda}</script><p>当<script type="math/tex">\lambda \to 0</script>时，<script type="math/tex">\dfrac{o(\lambda||\boldsymbol x - \overline{\boldsymbol x}^*)||)}{\lambda} \to 0</script>，<script type="math/tex">\triangledown f (\overline{\boldsymbol{x}}^*)(\boldsymbol x - \overline{\boldsymbol x}^*) < 0</script>，则：</p>
<script type="math/tex; mode=display">
\triangledown f (\overline{\boldsymbol{x}}^*)(\boldsymbol x - \overline{\boldsymbol x}^*) + \dfrac{o(\lambda||\boldsymbol x - \overline{\boldsymbol x}^*)||)}{\lambda} < 0</script><p>此时等式左边<script type="math/tex">\dfrac{f(\overline{\boldsymbol{x}}^*+\lambda(\overline{\boldsymbol{x}}-\overline{\boldsymbol{x}}^*))-f(\overline{\boldsymbol{x}}^*)}{\lambda} < 0</script>，即我们找到比<script type="math/tex">f(\overline{\boldsymbol x}^*)</script>函数值更小的，即与<script type="math/tex">\overline{\boldsymbol x}^*</script>是最优解矛盾。</p>
<p><strong>几何解释：</strong></p>
<script type="math/tex; mode=display">
\overline{\boldsymbol x}^* \in \boldsymbol S是最优解 \\
\Updownarrow \\
\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}(\boldsymbol x - \overline{\boldsymbol x}^*) \geq 0, \forall  \boldsymbol x \in \boldsymbol S \\
\Updownarrow \\
-\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}\overline{\boldsymbol x}^* \geq -\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T} \boldsymbol x, \forall  \boldsymbol x \in \boldsymbol S \\
\Updownarrow  \\
令\boldsymbol \alpha = -\triangledown f(\overline{\boldsymbol x}^*) \\
\Updownarrow  \\
\boldsymbol \alpha^{\mathrm T} \overline{\boldsymbol x}^* \geq \boldsymbol \alpha^{\mathrm T} {\boldsymbol x}, \forall  \boldsymbol x \in \boldsymbol S</script><p>由上面的等价表达可知，若<script type="math/tex">\boldsymbol \alpha \neq \boldsymbol 0(\triangledown f(\overline{\boldsymbol x}^*) \neq \boldsymbol 0)</script>，则就找到了一个<strong>支撑超平面</strong>，该支撑超平面经过<script type="math/tex">\overline{\boldsymbol x}^*</script>，在该点处恰好支撑整个凸集合<script type="math/tex">\boldsymbol S</script>。</p>
<p><img src="https://pic.imgdb.cn/item/628f2d8e0947543129edcef9.jpg" style="zoom:35%"></p>
<p><strong>几类特殊凸问题的最优性条件：</strong></p>
<ul>
<li><p>无约束凸优化<script type="math/tex">\min f(\boldsymbol x) \text{ over } \mathbb{R}^n</script>：<script type="math/tex">\overline{\boldsymbol x}^*最优 \Longleftrightarrow  \triangledown f(\overline{\boldsymbol x}^*) = \boldsymbol 0</script></p>
<ul>
<li>根据前面的条件，可知：<script type="math/tex">\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}(\boldsymbol x - \overline{\boldsymbol x}^*) \geq 0</script>，由于没有约束条件，即<script type="math/tex">(\boldsymbol x - \overline{\boldsymbol x}^*)</script>可以取遍<script type="math/tex">\mathbb{R}^n</script>中的所有向量，那么此时<script type="math/tex">\triangledown f(\overline{\boldsymbol x}^*) = \boldsymbol 0</script>。</li>
</ul>
</li>
<li><p>等式约束凸问题<script type="math/tex">\min \begin{Bmatrix} f(\boldsymbol x) \mid \boldsymbol{Ax = b}\end{Bmatrix}</script>：<script type="math/tex">\overline{\boldsymbol x}^*最优 \Longleftrightarrow  ∃\boldsymbol \mu,使得 \triangledown f(\overline{\boldsymbol x}^*) + \boldsymbol A^{\mathrm T} \boldsymbol \mu= \boldsymbol 0, \boldsymbol A \overline{\boldsymbol x}^* = \boldsymbol b</script></p>
<ul>
<li>根据前面的条件，可知：<script type="math/tex">\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}(\boldsymbol x - \overline{\boldsymbol x}^*) \geq 0</script>，满足<script type="math/tex">\boldsymbol{Ax = b}, \boldsymbol{A\overline{\boldsymbol x}^* = b}</script>，令向量<script type="math/tex">\boldsymbol d = \boldsymbol x - \overline{\boldsymbol x}^*</script>，那么将满足等式约束的两个式子相减：<script type="math/tex">\boldsymbol{A(x - \overline{x}^*) = \boldsymbol{Ad}= 0}</script>，即向量<script type="math/tex">\boldsymbol d</script>在<script type="math/tex">\boldsymbol A</script>的<strong>零空间</strong>中。又由于向量<script type="math/tex">\boldsymbol d</script>在<script type="math/tex">\boldsymbol A</script>的零空间中，那么<script type="math/tex">-\boldsymbol d</script>同样在<script type="math/tex">\boldsymbol A</script>的零空间中，因此向量<script type="math/tex">\boldsymbol d</script>和<script type="math/tex">-\boldsymbol d</script>都是<script type="math/tex">\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}(\boldsymbol x - \overline{\boldsymbol x}^*) = \triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T} \boldsymbol d\geq 0</script>的解，也就是该不等式添加负号不等号不变方向，也就等价于<script type="math/tex">\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}(\boldsymbol x - \overline{\boldsymbol x}^*) = \triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T} \boldsymbol d = 0</script>。由于<script type="math/tex">\boldsymbol d</script>在<script type="math/tex">\boldsymbol A</script>的<strong>零空间</strong>中，而<script type="math/tex">\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T} \boldsymbol d = 0</script>，所以<script type="math/tex">\triangledown f(\overline{\boldsymbol x}^*)^{\mathrm T}</script>在<script type="math/tex">\boldsymbol A</script>的正交补空间中，也就是<script type="math/tex">\boldsymbol A</script>的行空间，所以<script type="math/tex">\triangledown f(\overline{\boldsymbol x}^*)</script>可以表示成<script type="math/tex">\boldsymbol A^{\mathrm T}</script>的线性组合：</li>
</ul>
<script type="math/tex; mode=display">
∃\boldsymbol \mu,使得 \triangledown f(\overline{\boldsymbol x}^*) + \boldsymbol A^{\mathrm T} \boldsymbol \mu= \boldsymbol 0, \boldsymbol A \overline{\boldsymbol x}^* = \boldsymbol b</script><ul>
<li>这个就是<strong>KKT条件</strong>在本问题中的具体表现形式。</li>
</ul>
</li>
<li><p>非负约束凸优化<script type="math/tex">\min \begin{Bmatrix} f(\boldsymbol x) \mid \boldsymbol{x \geq 0}\end{Bmatrix}</script>：<script type="math/tex">\overline{\boldsymbol x}^*最优 \Longleftrightarrow  \triangledown f(\overline{\boldsymbol x}^*)_i  \overline{\boldsymbol x}^*_i= \boldsymbol 0, \overline{\boldsymbol x}^*>\boldsymbol 0, \triangledown f(\overline{\boldsymbol x}^*) \geq \boldsymbol 0</script></p>
<ul>
<li>证明暂略，比较复杂，看视频吧</li>
</ul>
</li>
</ul>
<h4 id="4-3-常见凸优化问题分类"><a href="#4-3-常见凸优化问题分类" class="headerlink" title="4.3 常见凸优化问题分类"></a>4.3 常见凸优化问题分类</h4><h5 id="一-线性规划-Linear-Programming-LP"><a href="#一-线性规划-Linear-Programming-LP" class="headerlink" title="(一) 线性规划 (Linear Programming, LP)"></a>(一) 线性规划 (Linear Programming, LP)</h5><p><strong>1 线性规划的标准形式</strong></p>
<script type="math/tex; mode=display">
\begin{cases}\text { min } & \boldsymbol c^{\mathrm T}\boldsymbol x + d \\ 
\text{ s.t.} & \boldsymbol{Gx = b}, \\ 
& \boldsymbol{Hx \leq e}. \end{cases}</script><p>一言以蔽之，目标函数和约束条件都是<strong>仿射函数</strong>。 </p>
<p>注意，凸优化问题中很多形式可以通过转换变为标准形式的！！！如下面几种情况：</p>
<ul>
<li><strong>线性分式规划</strong></li>
</ul>
<p><img src="https://pic.imgdb.cn/item/628f8221094754312973562a.jpg" style="zoom:40%"></p>
<ul>
<li><strong>最小化绝对值函数</strong></li>
</ul>
<script type="math/tex; mode=display">
\min  \begin{Bmatrix}|\boldsymbol a^{\mathrm T} \boldsymbol x + \boldsymbol c| \boldsymbol{AX = b}  \end{Bmatrix}</script><p><img src="https://pic.imgdb.cn/item/628f83b1094754312976493f.jpg" style="zoom:40%"></p>
<ul>
<li><strong>最小化多面体函数</strong></li>
</ul>
<p><img src="https://pic.imgdb.cn/item/628f85720947543129793020.jpg" style="zoom:40%"></p>
<p><strong>2 标准解法——单纯形法</strong></p>
<p>单纯形法的基本思想是——基于线性规划的可行集是一个多面体，目标函数是线性的，绘制其等值面的时候是一组平行的线/面，找到多面体的支撑超平面。所以说，如果线性规划存在最优解，则可在<strong>极点</strong>(多面体的顶点)达到。</p>
<p>若<script type="math/tex">\overline{\boldsymbol x}</script>是一个极点，则需判断<script type="math/tex">\overline{\boldsymbol x}</script>是否是最优解：</p>
<ul>
<li>若是最优解，则求解完成；</li>
<li>若不是最优解，则需从<script type="math/tex">\overline{\boldsymbol x}</script>出发，找一个更优的极点。</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/628f40da09475431290aaad7.jpg" style="zoom:50%"></p>
<blockquote>
<p>详细参见：<a target="_blank" rel="noopener" href="https://blog.csdn.net/whn19980801/article/details/115741791?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-115741791-blog-105621647.pc_relevant_default&amp;spm=1001.2101.3001.4242.2&amp;utm_relevant_index=4">线性规划问题（LP问题）</a>， <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/308189306">解决线性规划问题为什么要加入松弛变量？</a></p>
</blockquote>
<h5 id="二-凸二次规划-Quadratic-Programming-QP"><a href="#二-凸二次规划-Quadratic-Programming-QP" class="headerlink" title="(二) 凸二次规划 (Quadratic Programming, QP)"></a>(二) 凸二次规划 (Quadratic Programming, QP)</h5><p><strong>1 凸二次规划基本形式</strong></p>
<script type="math/tex; mode=display">
\begin{cases}\text { min } & \frac{1}{2} \boldsymbol x^{\mathrm T} \boldsymbol Q \boldsymbol x +  \boldsymbol c^{\mathrm T}  \boldsymbol x \\ 
\text{ s.t.} & \boldsymbol{Ax = b}, \\ 
& \boldsymbol{x \geq 0}. \end{cases}</script><p>其中，<script type="math/tex">\boldsymbol Q \geq \boldsymbol 0</script>。</p>
<p><strong>2 标准解法——有效集法</strong></p>
<blockquote>
<p>后面讲解。</p>
</blockquote>
<p><strong>3 示例</strong></p>
<ul>
<li>均值-方差模型</li>
<li>最小二乘模型</li>
</ul>
<h5 id="三-带凸二次约束的二次规划-Quadraticlly-Constrained-Quadratic-Program-QCQP"><a href="#三-带凸二次约束的二次规划-Quadraticlly-Constrained-Quadratic-Program-QCQP" class="headerlink" title="(三) 带凸二次约束的二次规划(Quadraticlly Constrained Quadratic Program, QCQP)"></a>(三) 带凸二次约束的二次规划(Quadraticlly Constrained Quadratic Program, QCQP)</h5><p><strong>1 基本形式</strong></p>
<script type="math/tex; mode=display">
\begin{cases}\text { min } & \frac{1}{2} \boldsymbol x^{\mathrm T} \boldsymbol Q_0 \boldsymbol x +  \boldsymbol c_0^{\mathrm T}  \boldsymbol x \\ 
\text{ s.t.} & \frac{1}{2} \boldsymbol x^{\mathrm T} \boldsymbol Q_i \boldsymbol x +  \boldsymbol c_i^{\mathrm T}  \boldsymbol x + b_i \leq 0, \text{ } i = 1,2, \cdots, k \\ 
& \boldsymbol{Ax \leq d}. \end{cases}</script><p>其中，<script type="math/tex">\boldsymbol Q_i \geq \boldsymbol 0, i = 0, 1, \cdots, k.</script>。</p>
<h5 id="四-二阶锥规划-Second-Order-Cone-Program-SOCP"><a href="#四-二阶锥规划-Second-Order-Cone-Program-SOCP" class="headerlink" title="(四) 二阶锥规划 (Second-Order Cone Program, SOCP)"></a>(四) 二阶锥规划 (Second-Order Cone Program, SOCP)</h5><p><strong>1 基本形式</strong></p>
<script type="math/tex; mode=display">
\begin{cases}\text { min } & \boldsymbol f^{\mathrm T}\boldsymbol x \\ 
\text{ s.t.} & \|\boldsymbol{A_i x + b_i}  \|_2 \leq \boldsymbol c_i^{\mathrm T}\boldsymbol x + \boldsymbol d_i,  \text{ } i = 1,2, \cdots, k \\ 
& \boldsymbol{Hx \leq e}. \end{cases}</script><p>当$k = 0$时，为LP问题；当所有$\boldsymbol {c_i = 0}$时，为QCQP问题。</p>
<h5 id="五-半定规划-Semidefinite-Program-SDP"><a href="#五-半定规划-Semidefinite-Program-SDP" class="headerlink" title="(五) 半定规划 (Semidefinite Program, SDP)"></a>(五) 半定规划 (Semidefinite Program, SDP)</h5><p><strong>1 半定规划标准形式</strong></p>
<script type="math/tex; mode=display">
\begin{cases}\text { min } & \text{tr}(\boldsymbol C\boldsymbol X) \\ 
\text{ s.t.} & \text{tr}(\boldsymbol Q_i\boldsymbol X) = b_i,  \text{ } i = 1,2, \cdots, m \\ 
& \boldsymbol{x \geq 0}. \end{cases}</script><p>其中，<script type="math/tex">\boldsymbol C, \boldsymbol Q_i</script>均为对称矩阵。</p>
<p><strong>转化为：线性矩阵不等式形式(LMI)：</strong></p>
<script type="math/tex; mode=display">
\begin{cases}\text { min } & \boldsymbol c^{\mathrm T}\boldsymbol x \\ 
\text{ s.t.} & \sum\limits_{i=1}^{n} {\boldsymbol {x_iQ_i}} \leq \boldsymbol Q_0 \\ 
& \boldsymbol{Ax \geq b}. \end{cases}</script><blockquote>
<p>注意：若矩阵<script type="math/tex">\boldsymbol {Q_1 \leq Q_2}</script>，则有<script type="math/tex">\boldsymbol {Q_2 - Q_1}</script>是半正定矩阵。</p>
</blockquote>
<h5 id="六-几何规划-Geometric-Programming-GP"><a href="#六-几何规划-Geometric-Programming-GP" class="headerlink" title="(六) 几何规划  (Geometric Programming, GP)"></a>(六) 几何规划  (Geometric Programming, GP)</h5><p><strong>1 例子：切比雪夫中心(集合中心)</strong></p>
<ul>
<li>给定<strong>有界</strong>的集合<script type="math/tex">\boldsymbol C, \boldsymbol x \in \boldsymbol C</script>的深度定义为：</li>
</ul>
<script type="math/tex; mode=display">
\text{depth}(\boldsymbol x, \boldsymbol C) = \text{dist}(\boldsymbol x, \mathbb{R}^n(去除 \boldsymbol C) )</script><p>可以理解为集合<script type="math/tex">\boldsymbol C</script>中的点到集合<script type="math/tex">\boldsymbol C</script>边界的距离。</p>
<ul>
<li>集合<script type="math/tex">\boldsymbol C</script>的中心(chebyshev center)定义为具有最大深度的点：</li>
</ul>
<script type="math/tex; mode=display">
\boldsymbol x_{\text{center}}(\boldsymbol C) = \arg \max_{\boldsymbol x \in \boldsymbol C} \text{dist}(\boldsymbol x, \mathbb{R}^n(去除 \boldsymbol C) )</script><ul>
<li>集合的中心即包含于该集合的最大球体的球心。</li>
</ul>
<p><strong>2 凸集合的中心问题为凸优化问题</strong></p>
<p>(1) 假设<script type="math/tex">\boldsymbol S = \begin{Bmatrix} \boldsymbol x \mid f_{i}(\boldsymbol x) \leq 0, \text{  } i=1, \cdots, m \end{Bmatrix}</script>，其中<script type="math/tex">f_{i}(\boldsymbol x)</script>是凸函数，寻找包含<script type="math/tex">\boldsymbol S</script>的最大球体。</p>
<p>设该球体球心为<script type="math/tex">\boldsymbol x</script>，半径为<script type="math/tex">r</script>，该球可以表示为：<script type="math/tex">\boldsymbol B =  \begin{Bmatrix} \boldsymbol x+r \boldsymbol u \mid \| \boldsymbol u \|_2 \leq 1 \end{Bmatrix}</script></p>
<script type="math/tex; mode=display">
\begin{cases}\text { max } &\text { } \text { } r \\ 
\text{ s.t.} & \sup\limits_{\| \boldsymbol u \|_2 \leq 1} f_i(\boldsymbol x+r \boldsymbol u) \leq 0 , \text{  } i=1, \cdots, m\\ 
 \end{cases}</script><blockquote>
<p>注意：<a target="_blank" rel="noopener" href="https://blog.csdn.net/hyl1181/article/details/111029319">max/sup、min/inf辨析</a>，<a target="_blank" rel="noopener" href="https://blog.csdn.net/robert_chen1988/article/details/81233738">sup, inf 与 min, max</a></p>
<p>使用 inf 或 sup 总能保证一个函数的 inf 或 sup 存在，而函数的 min 或 max 有时候不存在。 </p>
</blockquote>
<p>(2) 多面体的中心：假设多面体<script type="math/tex">\boldsymbol P = \begin{Bmatrix} \boldsymbol x \in \R ^n\mid \boldsymbol a_i^{\mathrm T} \boldsymbol x \leq \boldsymbol b_i, \text{  } i=1, \cdots, m \end{Bmatrix}</script>，寻找包含<script type="math/tex">\boldsymbol P</script>的最大球体，其球心即为集合<script type="math/tex">\boldsymbol P</script>的中心。</p>
<p>通过题目，可将优化问题抽象如下：(球体可以表示为：<script type="math/tex">\boldsymbol B =  \begin{Bmatrix} \boldsymbol x+r \boldsymbol u \mid \| \boldsymbol u \|_2 \leq 1 \end{Bmatrix}</script>)</p>
<script type="math/tex; mode=display">
\begin{cases}\text { max } &\text { } \text { } r \\ 
\text{ s.t.} &  \boldsymbol a_i^{\mathrm T} \boldsymbol x + \|\boldsymbol a_i  \|_2 r \leq \boldsymbol b_i, \text{  } i=1, \cdots, m\\ 
 \end{cases}</script><p><img src="https://pic.imgdb.cn/item/62902b2809475431293274b3.jpg" style="zoom:65%"></p>
<p>(3) 椭球交集的中心：假设<script type="math/tex">\boldsymbol S = \begin{Bmatrix} \boldsymbol x \in \R ^n \mid \boldsymbol x^{\mathrm T}\boldsymbol A_i \boldsymbol x + 2\boldsymbol b_i^{\mathrm T}\boldsymbol x + c_i \leq 0, \text{  } i=1, \cdots, m \end{Bmatrix}</script>，其中<script type="math/tex">\boldsymbol A_i \geq \boldsymbol 0</script>，寻找包含<script type="math/tex">\boldsymbol S</script>的最大球体和球心。</p>
<p>通过问题描述，可将该问题建模为：</p>
<script type="math/tex; mode=display">
\begin{cases} \max & r \\

\text { s.t. } & \left(\begin{array}{ccc}
\boldsymbol A_{i}^{-1} & r l & -\left( \boldsymbol x+\boldsymbol A_{i}^{-1} \boldsymbol b_{i} \right) \\
r l & \lambda_{i} l & 0 \\
-\left( \boldsymbol x+\boldsymbol A_{i}^{-1}\boldsymbol  b_{i}\right)^{T} & 0 & -\lambda_{i}-c_{i}+\boldsymbol b_{i}^{T} \boldsymbol A_{i}^{-1}\boldsymbol b_{i}
\end{array}\right) \geq 0,
 \end{cases}</script><p>本问题涉及两个小知识点：</p>
<ul>
<li>S-Procedure：<ul>
<li>$x^{\top} F_{1} x+2 b_{1}^{\top} x+c_{1} \leq 0 \Rightarrow x^{\top} F_{2} x+2 b_{2}^{\top} x+c_{2} \leq 0$，当且仅当$\exist \lambda \geq 0$使得$\left(\begin{array}{ll} F_{1} &amp; b_{1} \\ b_{1}^{T} &amp; c_{1} \end{array}\right)-\left(\begin{array}{ll} F_{2} &amp; b_{2} \\ b_{2}^{T} &amp; c_{2} \end{array}\right) \geq 0$</li>
</ul>
</li>
<li>Schur complement 对称分块矩阵：<ul>
<li>如<script type="math/tex">X=\left(\begin{array}{cc} A & B \\ B^{T} & C \end{array}\right)</script>，若<script type="math/tex">\boldsymbol A \geq \boldsymbol 0</script>，则<script type="math/tex">\boldsymbol X \geq \boldsymbol 0</script>当且仅当<script type="math/tex">C-B^{\top} A^{-1} B \geq0</script></li>
</ul>
</li>
</ul>
<hr>
<p>参考资料：</p>
<p>【1】<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/32926848">为啥要知道一个对称方阵是否为各种定呢</a></p>
<p>【2】<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/44860862">浅谈「正定矩阵」和「半正定矩阵」</a></p>
<p>【3】<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/62589178">正定(positive definite)与半正定(semi-positive definite)</a></p>
<link rel="stylesheet" href="/css/bilicard.css" type="text/css"> 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          打赏
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://junheng-wang.github.io/2022/05/15/Optimization-method1/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9C%80%E4%BC%98%E5%8C%96/" rel="tag">最优化</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2022/05/27/Optimization-method2/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            最优化方法_part2
          
        </div>
      </a>
    
    
      <a href="/2022/05/06/Character-and-conduct/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">性格与为人处事</div>
      </a>
    
  </nav>

   
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "0DieopImIy7vnuzj4jQ2wk6O-gzGzoHsz",
    app_key: "j6eRiYtlDSl8eRXVN54blF25",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "给我的文章加点评论吧~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2023
        <i class="ri-heart-fill heart_icon"></i> wjh
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Wang Junheng"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/Alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechatpay.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true,
  };
</script>

<!-- Katex -->
 
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
        <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"></script>
        
            <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.js"></script>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.css">
        
    
 
<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

</body>

</html>